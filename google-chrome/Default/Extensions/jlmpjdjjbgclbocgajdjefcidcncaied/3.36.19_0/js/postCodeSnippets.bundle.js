"use strict";(self.webpackChunkextension=self.webpackChunkextension||[]).push([[4332],{48354:(e,t,n)=>{n.r(t),n.d(t,{PostCodeSnippets:()=>x});var r=n(50122),o=n(22155),a=n(30395),i=n.n(a),c=n(89338),u=n(2827),s=n.n(u),l=n(15819),p=n(55059),f=n(30530),b=n(36899);function d(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function g(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?d(Object(n),!0).forEach((function(t){(0,r.A)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):d(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var O=n(82114),y=n(53823),P=n(83448),v=n(43918),h=n(11924),j=n(61663),m=n(57952),w=n(93526),S=o.createElement;function k(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function C(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?k(Object(n),!0).forEach((function(t){(0,r.A)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):k(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var x=function(e){var t=e.className,n=e.post,r=(0,j.DX)().logEvent,a=(0,o.useContext)(w.c).logOpts,u=function(e){var t,n=e.postId,r=e.perPage,a=void 0===r?p.qI:r,i=e.queryOptions,u=!!n,d=(0,l.q)(g(g({queryKey:(0,f.$h)(f.jZ.PostCodeSnippets,null,{id:n}),queryFn:(t=(0,c.A)(s().mark((function e(t){var r,o;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.pageParam,e.next=3,b.e.request(p.h9,{id:n,first:a,after:r});case 3:return o=e.sent,e.abrupt("return",o.postCodeSnippets);case 5:case"end":return e.stop()}}),e)}))),function(e){return t.apply(this,arguments)}),initialPageParam:"",staleTime:f.b2.OneHour},i),{},{enabled:void 0!==(null==i?void 0:i.enabled)?i.enabled&&u:u,getNextPageParam:function(e){return(0,f.iP)(null==e?void 0:e.pageInfo)},select:(0,o.useCallback)((function(e){if(e)return g(g({},e),{},{pages:e.pages.filter((function(e){return!(null==e||!e.edges.length)}))})}),[])}));return d}({postId:n.id}),d=u.data,k=u.fetchNextPage,x=(0,o.useState)(0),D=x[0],N=x[1],E=(0,o.useMemo)((function(){return null==d?void 0:d.pages.flatMap((function(e){return e.edges}))}),[d]),q=(0,o.useMemo)((function(){var e;return null==E||null===(e=E[D])||void 0===e?void 0:e.node}),[D,E]);if(!q)return null;var A="~~~\n".concat(q.content,"\n~~~"),I=S(o.Fragment,null,S(y.$n,{variant:P.Ak.Tertiary,className:"-rotate-90",icon:S(v.HK,null),disabled:0===D,size:P.Mp.Small,onClick:function(){r((0,h.P5)(m.VB.PreviousSnippet,n,C({},a))),N((function(e){return e-1}))}}),S(y.$n,{variant:P.Ak.Tertiary,className:"rotate-90",icon:S(v.HK,null),disabled:D===E.length-1,size:P.Mp.Small,onClick:function(){r((0,h.P5)(m.VB.NextSnippet,n,C({},a))),D===E.length-3&&d.pages[d.pages.length-1].pageInfo.hasNextPage&&k(),N((function(e){return e+1}))}}));return S("div",{className:i()(t,"overflow-hidden rounded-12")},S(O.s,{isExpandable:!0,content:A,header:{buttons:I},onCopy:function(){r((0,h.P5)(m.VB.CopySnippet,n,C({},a)))}}))}}}]);