"use strict";(self.webpackChunkextension=self.webpackChunkextension||[]).push([[2970],{44672:(e,t,a)=>{a.r(t),a.d(t,{ReadingHistoryModal:()=>M,default:()=>q});var n=a(22155),r=a(94198),o=a(59645),i=a(27601),l=a(43918),s=a(97838),c=n.createElement;function u(e){var t=e.onArticleClick,a=e.data,n=e.canFetchMore,r=e.isFetchingNextPage,u=e.fetchNextPage;return c(o.A,{canFetchMore:n,fetchNextPage:u,isFetchingNextPage:r},null==a?void 0:a.map((function(e){return c("button",{key:"".concat(e.post.id,"-").concat(e.timestamp),type:"button",className:"group relative -mx-6 cursor-pointer hover:bg-surface-hover",onClick:function(a){return t(a,e)},"aria-label":"Reading history item"},c(i.A,{postItem:e,showButtons:!1,clickable:!1}),c(l.HK,{size:s.lK.Medium,className:"absolute right-3 top-1/2 hidden -translate-y-1/2 rotate-90 group-hover:flex"}))})))}var d=a(80244),p=a(42104),f=a(50122),m=a(15819),v=a(36899),g=a(27724),h=a(30530);function y(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function b(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?y(Object(a),!0).forEach((function(t){(0,f.A)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):y(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}const x=function(e){var t,a=e.key,r=e.query,o=e.variables,i=(0,m.q)({queryKey:a,queryFn:function(e){var t=e.pageParam;return v.e.request(r,b(b({},o),{},{after:t}))},initialPageParam:"",getNextPageParam:function(e){var t=e.readHistory;return(0,h.iP)(null==t?void 0:t.pageInfo)}}),l=i.isPending,s=i.isFetchingNextPage,c=i.hasNextPage,u=i.data,d=i.fetchNextPage,p=!l&&!s&&c&&u.pages.length>0,f=(0,g.A)({fetchPage:d,canFetchMore:p}),y=null==u||null===(t=u.pages)||void 0===t?void 0:t.some((function(e){return e.readHistory.edges.length>0}));return(0,n.useMemo)((function(){return{queryResult:i,hasData:y,isLoading:l,data:u,isInitialLoading:!y&&l,infiniteScrollRef:f}}),[y,i,l,u,f])};var w=function(){var e=(0,n.useContext)(d.Ay).user,t={key:["readHistory",null==e?void 0:e.id],query:p.tN,variables:{isPublic:!0}},a=x(t),r=a.hasData,i=a.data,l=a.isInitialLoading,s=a.isLoading,c=a.queryResult;return{data:(0,n.useMemo)((function(){return null==i?void 0:i.pages.map((function(e){return e.readHistory.edges.map((function(e){return e.node}))})).flat()}),[i]),hasData:r,isInitialLoading:l,isLoading:s,queryResult:c,canFetchMore:(0,o.c)(c),fetchNextPage:c.fetchNextPage,isFetchingNextPage:c.isFetchingNextPage}},P=a(7186),N=n.createElement;function k(e){var t=e.hasNoData;return N(n.Fragment,null,N(P.$d,{className:"hidden tablet:block"},t?"Read":"Share"," ",N(P.wF,null,"a post")),N("p",{className:"py-4 text-center"},t?"Your reading history is empty! Please read at least one post by clicking on a post to start sharing with your Squad.":"Pick a post that you would like to discuss with your Squad members."))}var O=a(9062),j=a(63423),A=n.createElement,F=(0,j.A)(O._,"h-3 rounded-12");const S=function(e){var t=e.amount;return A("div",{className:"flex flex-col"},Array(void 0===t?7:t).fill(0).map((function(e,t){return A("div",{key:t,className:"flex flex-row items-center px-8 py-3"},A(O._,{className:"h-16 w-16 rounded-16 laptop:w-24"}),A("div",{className:"ml-4 flex flex-1 flex-col"},A(F,{className:"w-full laptop:w-1/2"}),A(F,{className:"mt-2 w-2/3 laptop:w-1/3"})))})))};var D=a(77955),C=n.createElement;function M(e){var t=e.keepOpenAfterSelecting,a=e.onArticleSelected,n=e.onRequestClose,o=w(),i=o.hasData,l=o.isInitialLoading,s=o.data,c=o.isLoading,d=o.canFetchMore,p=o.fetchNextPage,f=o.isFetchingNextPage,m=!i&&!l,v=m?"Read":"Share";return C(r.aF,{isOpen:!0,onRequestClose:n,kind:r.aF.Kind.FixedCenter,size:r.aF.Size.Small},C(r.aF.Header,{className:"flex tablet:hidden",kind:D.Vq.Primary,title:"".concat(v," a post")}),C(r.aF.Body,null,C(k,{hasNoData:m}),C(u,{onArticleClick:function(e,r){a(r),t||n(e)},data:s,canFetchMore:d,fetchNextPage:p,isFetchingNextPage:f}),c&&C(S,{amount:l?15:1})))}const q=M},27601:(e,t,a)=>{a.d(t,{A:()=>D});var n=a(22155),r=a(30395),o=a.n(r),i=a(95974),l=a(55059),s=a(88193),c=a(74921),u=a(67371),d=a(60471),p=a(63423),f=a(7986),m=a(38638),v=a(41536),g=a(27504),h=a(16763),y=a(69918),b=a(80244),x=a(30530),w=a(90087),P=a(34091),N=function(){var e=(0,y.jE)(),t=(0,n.useContext)(b.Ay).user;return(0,w.o)({variables:{key:x.jZ.ReadingHistory},onMutate:function(a){var n=a.id,r=a.vote,o=e.getQueryData((0,x.$h)(x.jZ.ReadingHistory,t));return(0,P.p)({id:n,vote:r,data:o,user:t,queryClient:e})}})},k=a(57952),O=a(53823),j=a(83448),A=a(19505),F=n.createElement,S=(0,p.A)("div","absolute left-5 -my-1 w-8 h-8 rounded-full bg-background-default");function D(e){var t,a,r,p,y,b=e.postItem,x=e.showButtons,w=void 0===x||x,P=e.clickable,D=void 0===P||P,C=e.onHide,M=e.className,q=e.onContextMenu,R=e.showVoteActions,L=void 0!==R&&R,z=e.logOrigin,E=void 0===z?k.$e.Feed:z,H=b.timestampDb,I=b.post,T=null!==(t=null==I?void 0:I.sharedPost)&&void 0!==t?t:I,$=N(),K=$.toggleUpvote,U=$.toggleDownvote,Y=o()("relative flex w-full flex-row py-3 pl-9 pr-5",L?"items-start tablet:items-center":"items-center",D&&"hover:cursor-pointer hover:bg-surface-hover",M);return F("article",{className:o()(!D&&Y)},F(g.A,{condition:D,wrapper:function(e){return F(i.A,{href:I.commentsPermalink},F("a",{className:Y,title:"Go to post"},e))}},F(n.Fragment,null,F(v._V,{src:T.image,alt:I.title,className:"h-16 w-16 rounded-16 object-cover laptop:w-24",loading:"lazy",fallbackSrc:h.uC}),F(S,{className:L&&"top-8"}),F(m.Y3,{size:m.Ov.Small,rounded:"full",className:o()("absolute left-6",L&&"top-8"),user:{image:I.source.image,username:"source of ".concat(I.title)},nativeLazyLoading:!0}),F("div",{className:o()("flex flex-1",L?"flex-col tablet:flex-row":"items-center")},F("div",{className:"ml-4 flex flex-1 flex-col"},F("h3",{className:"mr-6 line-clamp-2 flex flex-1 break-words text-left typo-callout"},I.title),F(f.A,{readTime:I.readTime,numUpvotes:I.numUpvotes,isVideoType:(0,l.CX)(I)})),F("div",{className:"ml-4 mt-1 flex tablet:ml-0 tablet:mt-1"},w&&L&&F(n.Fragment,null,F(O.$n,{size:j.Mp.Small,variant:j.Ak.Tertiary,color:L?A.h.Avocado:void 0,className:L?"flex":"hidden laptop:flex",pressed:(null==I||null===(a=I.userState)||void 0===a?void 0:a.vote)===l.mj.Up,onClick:function(e){e.preventDefault(),K({payload:I,origin:E})},icon:F(s.l,{secondary:(null==I||null===(r=I.userState)||void 0===r?void 0:r.vote)===l.mj.Up})}),F(O.$n,{size:j.Mp.Small,variant:j.Ak.Tertiary,color:L?A.h.Ketchup:void 0,className:L?"flex":"hidden laptop:flex",pressed:(null==I||null===(p=I.userState)||void 0===p?void 0:p.vote)===l.mj.Down,onClick:function(e){e.preventDefault(),U({payload:I,origin:E})},icon:F(c.y,{secondary:(null==I||null===(y=I.userState)||void 0===y?void 0:y.vote)===l.mj.Down})})),w&&!L&&C&&F(O.$n,{size:j.Mp.Small,variant:j.Ak.Tertiary,className:"hidden laptop:flex",icon:F(u.d,null),onClick:function(e){e.stopPropagation(),e.preventDefault(),C({postId:I.id,timestamp:H})}}),w&&F(O.$n,{variant:j.Ak.Tertiary,"data-testid":"post-item-".concat(I.id),icon:F(d.Z,null),onClick:function(e){e.stopPropagation(),e.preventDefault(),q(e,b)},size:j.Mp.Small}))))))}},7186:(e,t,a)=>{a.d(t,{$d:()=>g,D4:()=>b,Eh:()=>y,jG:()=>x,wF:()=>h});var n=a(50122),r=a(22155),o=a(63423),i=a(67380),l=a(16714),s=a(87822),c=a(48191),u=a(97838),d=a(77955),p=a(48389),f=r.createElement;function m(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function v(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?m(Object(a),!0).forEach((function(t){(0,n.A)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):m(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var g=function(e){var t=e.children,a=e.className;return f(i.o5,{className:a,tag:i.UL.H1,type:i.kR.LargeTitle,bold:!0},t)},h=(0,o.A)("span","text-brand-default"),y=((0,o.A)(l.mf,"!p-0 laptop:min-h-page h-full !max-w-[42.5rem] !w-full",l.hC),(0,o.A)("div","flex flex-1 flex-col"),function(e){return(null==e?void 0:e.moderationRequired)&&!(0,p.pZ)(e,s.Wk.ModeratePost)}),b={title:"Your post has been submitted for review",description:"Your post is now waiting for the admin's approval. We'll notify you once it's been reviewed.",okButton:{title:"Got it",className:"tablet:w-full"},cancelButton:null,promptSize:d.rI.XSmall,icon:f(c.x,{size:u.lK.XXXLarge})},x=v(v({},b),{},{title:"Your edit has been submitted for review",description:"Your edit is now waiting for the admin’s approval. We’ll notify you once it’s been reviewed."})}}]);