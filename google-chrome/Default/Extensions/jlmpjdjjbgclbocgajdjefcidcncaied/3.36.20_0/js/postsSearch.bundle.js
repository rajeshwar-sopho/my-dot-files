"use strict";(self.webpackChunkextension=self.webpackChunkextension||[]).push([[9152],{84178:(e,n,t)=>{t.r(n),t.d(n,{default:()=>S});var r=t(98093),a=t(89338),o=t(2827),l=t.n(o),i=t(22155),u=t(36797),s=t.n(u),c=t(14243),d=t(30395),f=t.n(d),p=t(79887);var h=t(34229),v=t(4394),y=t(56638),m=t(42104),g=t(36899),b=t(15360),k=t(55551),C=i.createElement,I=s()((function(){return t.e(7286).then(t.bind(t,84746))}),{ssr:!1,loadableGenerated:{webpack:function(){return[84746]}}}),x={searchPostSuggestions:v.cy,searchBookmarksSuggestions:y.tC,searchReadingHistorySuggestions:m.P4};function S(e){var n=e.initialQuery,t=e.autoFocus,o=void 0===t||t,u=e.placeholder,s=e.onSubmitQuery,d=e.className,y=e.suggestionType,m=void 0===y?"searchPostSuggestions":y,S=e.onFocus,w=(0,i.useRef)(),F=(0,i.useState)(),P=F[0],A=F[1],N=(0,i.useState)(),B=N[0],q=N[1],E=(0,i.useState)(null),z=E[0],T=E[1],K=(0,i.useState)([]),R=K[0],D=K[1],O=(0,b.G)({feature:k.N4.searchVersion,shouldEvaluate:!!B&&"searchPostSuggestions"===m}).value,G=x[m],H=(0,c.I)({queryKey:[m,B],queryFn:function(){return g.e.request(G,{query:B,version:O})},enabled:!!B}),L=H.data,M=H.isPending;(0,i.useEffect)((function(){P||A(n)}),[n]);var Q=function(){return T(null)},X=function(){if(!z){var e=w.current.getBoundingClientRect(),n=e.left,t=e.bottom,r=e.width;T({x:n,y:t+window.scrollY,width:r})}};(0,i.useEffect)((function(){var e,n,t;M||(null!=R&&R.length||null==L||null===(e=L[m])||void 0===e||!e.hits.length||X(),D(null!==(n=null==L||null===(t=L[m])||void 0===t?void 0:t.hits.map((function(e){return e.title})))&&void 0!==n?n:[]))}),[L,M]);var $=function(){var e=(0,a.A)(l().mark((function e(n){var t,r;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=null==n||null===(t=n.replace)||void 0===t?void 0:t.call(n,v.F,""),e.next=3,s(r||B);case 3:r&&A(r),Q();case 5:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),J=function(e,n){var t=(0,i.useState)(-1),r=t[0],a=t[1];return(0,i.useEffect)((function(){a(-1)}),[e]),{selectedItemIndex:r,onKeyDown:function(t){if(40===t.keyCode||38===t.keyCode){t.preventDefault();var o=e.length+1;if(r>-1){var l=40===t.keyCode?1:-1;a(((r+l)%o+o)%o)}else a(40===t.keyCode?0:o-1)}else 13===t.keyCode&&n(r>-1&&e[r])}}}(R,$),V=J.selectedItemIndex,W=J.onKeyDown,Y=(0,h.A)((function(e){return q(e)}),100),j=(0,r.A)(Y,1)[0];(0,i.useEffect)((function(){var e;o&&(null===(e=w.current)||void 0===e||e.querySelector("input").focus())}),[w,o]);var U=!!z&&!!R.length;return C(i.Fragment,null,C(p.L,{className:f()("compact flex-1",d),inputId:"posts-search",fieldSize:"medium",placeholder:null!=u?u:"Find posts",ref:w,value:P,valueChanged:function(e){if(!e.length)return Q(),void q("");e&&e!==n&&j(e),null===z&&X()},onKeyDown:W,onBlur:function(){null!=B&&B.length&&Q()},onFocus:function(e){null==S||S(e),null!=R&&R.length&&X()},"aria-haspopup":"true","aria-expanded":U}),C(I,{placement:z,items:R,focusedItemIndex:V,onItemClick:$,isOpen:U}))}},79887:(e,n,t)=>{t.d(n,{L:()=>k});var r=t(7527),a=t(75087),o=t(22155),l=t(30395),i=t.n(l),u=t(95098),s=t(86548),c=t(67371),d=t(43918),f=t(96044),p=t(53823),h=t(83448),v=t(77501),y=["isPrimary"],m=["inputId","name","value","valueChanged","placeholder","fieldSize","readOnly","fieldType","className","autoFocus","type","disabled","rightButtonProps","aria-describedby","aria-label","onBlur","onFocus","showIcon"],g=o.createElement,b=function(e){var n=e.isPrimary,t=(0,a.A)(e,y);return n?g(c.d,t):g(d.HK,(0,r.A)({},t,{className:"rotate-90"}))},k=(0,o.forwardRef)((function(e,n){var t=e.inputId,o=e.name,l=e.value,d=e.valueChanged,y=e.placeholder,k=void 0===y?"Search":y,C=e.fieldSize,I=void 0===C?"large":C,x=e.readOnly,S=e.fieldType,w=void 0===S?"primary":S,F=e.className,P=e.autoFocus,A=e.type,N=e.disabled,B=e.rightButtonProps,q=void 0===B?{type:"button"}:B,E=e["aria-describedby"],z=e["aria-label"],T=e.onBlur,K=e.onFocus,R=e.showIcon,D=void 0===R||R,O=(0,a.A)(e,m),G=(0,u.G)(l,d),H=G.inputRef,L=G.focused,M=G.hasInput,Q=G.onFocus,X=G.onBlur,$=G.onInput,J=G.focusInput,V=G.setInput,W=function(e){e.stopPropagation(),V(null)},Y="primary"===w,j="secondary"===w,U="medium"===I?"h-10 rounded-12":"h-12 rounded-14";return g(s.s,(0,r.A)({},O,{className:i()("items-center !border !border-border-subtlest-tertiary !bg-background-default",U,F,{focused:L}),onClick:J,"data-testid":"searchField",ref:n}),!!D&&(j&&M?g(p.$n,{"aria-label":"Clear input text",className:"mr-2",size:h.Mp.XSmall,variant:h.Ak.Tertiary,title:"Clear query",onClick:W,icon:g(c.d,{className:"icon text-lg group-hover:text-text-primary"}),disabled:!M}):g(f.W,{"aria-hidden":!0,className:"icon mr-2 text-2xl",role:"presentation",secondary:L,style:{color:L||M?"var(--theme-text-primary)":"var(--field-placeholder-color)"}})),g(s.T,{"aria-label":z,disabled:N,placeholder:k,name:o,id:t,ref:H,onFocus:function(e){Q(),null==K||K(e)},onBlur:function(e){X(),null==T||T(e)},onInput:$,autoFocus:P,type:A,"aria-describedby":E,autoComplete:"off",className:i()("flex-1",U,(0,v.pJ)({readOnly:x,disabled:N,hasInput:M,focused:L})),required:!0}),(M&&Y||j)&&!!q&&g(p.$n,(0,r.A)({},q,{variant:j?h.Ak.Primary:h.Ak.Tertiary,size:q.size||h.Mp.XSmall,title:q.title||"Clear query",onClick:"submit"!==q.type?W:q.onClick,icon:g(b,{"aria-hidden":!0,role:"presentation",isPrimary:Y}),disabled:(null==q?void 0:q.disabled)||!M})))}))}}]);