"use strict";(self.webpackChunkextension=self.webpackChunkextension||[]).push([[2114,9686],{95412:(e,t,n)=>{n.d(t,{S:()=>p});var r=n(7527),o=n(75087),a=n(22155),l=n(30395),c=n.n(l),i=n(36780),s=n(52788),u=["name","checked","children","className","checkmarkClassName","onToggleCallback","id","disabled","defaultChecked"],d=a.createElement,p=(0,a.forwardRef)((function(e,t){var n=e.name,l=e.checked,p=e.children,f=e.className,b=e.checkmarkClassName,m=e.onToggleCallback,y=e.id,h=void 0===y?"":y,k=e.disabled,v=e.defaultChecked,g=(0,o.A)(e,u),O=(0,a.useState)(null!=l?l:v),R=O[0],A=O[1],S=(0,a.useId)(),w=h.concat(S);(0,a.useEffect)((function(){A(null!=l?l:v)}),[l,v]);return d("label",{className:c()("relative z-1 inline-flex select-none items-center p-1 pr-3 text-text-tertiary typo-footnote",!k&&"cursor-pointer",s.A.label,f,{checked:R,disabled:k}),style:{transition:"color 0.1s linear"},htmlFor:w},d("input",(0,r.A)({"aria-labelledby":"label-span-".concat(S),checked:l,defaultChecked:v,className:"absolute h-0 w-0 opacity-0","data-testid":"checkbox-input",disabled:k,id:w,name:n,onChange:function(e){A(e.target.checked),null==m||m(e.target.checked)},ref:t,type:"checkbox"},g)),d("div",{"aria-checked":l,"aria-labelledby":"label-".concat(S),className:c()("relative z-1 mr-3 flex h-5 w-5 items-center justify-center rounded-6 border-2 border-border-subtlest-primary",s.A.checkmark,b),role:"checkbox"},d(i.w,{"aria-hidden":!0,className:"icon h-full w-full text-text-primary opacity-0",role:"presentation",style:{transition:"opacity 0.1s linear"}})),d("span",{className:"min-w-0 flex-1",id:"label-span-".concat(S)},p))}))},84606:(e,t,n)=>{n.r(t),n.d(t,{OTHER_KEY:()=>m,ReasonSelectionModal:()=>y,default:()=>h});var r=n(7527),o=n(75087),a=n(22155),l=n(35234),c=n(53823),i=n(83448),s=n(94198),u=n(16714),d=n(72870),p=n(64142),f=["onReport","reasons","heading","title","footer","disabled"],b=a.createElement,m="OTHER";function y(e){var t=e.onReport,n=e.reasons,y=e.heading,h=e.title,k=e.footer,v=e.disabled,g=(0,o.A)(e,f),O=(0,a.useState)(null),R=O[0],A=O[1],S=(0,a.useState)(),w=S[0],E=S[1],C=(0,d.G6)(d.bh.MobileL),P={disabled:!R||R===m&&!w||v,onClick:function(e){return t(e,R,w)}};return b(s.aF,(0,r.A)({isOpen:!0,kind:s.aF.Kind.FixedCenter},g,{formProps:{form:null,title:y,rightButtonProps:P,copy:{right:"Submit report"}}}),b(s.aF.Header,{title:y}),b(s.aF.Body,{className:"py-5"},h&&b("p",{className:"mb-6 text-text-tertiary typo-callout"},h),b(l.s,{name:"report_reason",options:"function"==typeof n?n(R):n,value:R,onChange:A}),b("p",{className:"mb-1 mt-6 px-2 font-bold typo-caption1"},"Anything else you'd like to add?"),b("textarea",{onInput:function(e){return E(e.currentTarget.value)},onFocus:function(){R||A(p.dV.Other)},className:"mb-1 h-20 w-full resize-none self-stretch rounded-10 bg-surface-float p-2 typo-body","data-testid":"report_comment"}),C?k:null),b(s.aF.Footer,{justify:k&&!C?u.F1.Between:u.F1.End},C?null:k,b(c.$n,{variant:i.Ak.Primary,disabled:!R||R===m&&!w||v,onClick:function(e){return t(e,R,w)}},"Submit report")))}const h=y},90516:(e,t,n)=>{n.r(t),n.d(t,{ReportPostModal:()=>E,default:()=>C});var r=n(7527),o=n(89338),a=n(50122),l=n(75087),c=n(92203),i=n(2827),s=n.n(i),u=n(22155),d=n(95412),p=n(53823),f=n(83448),b=n(16714),m=n(30062),y=n(11924),h=n(61663),k=n(84606),v=n(64142),g=["index","post","origin","onReported"],O=u.createElement;function R(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function A(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?R(Object(n),!0).forEach((function(t){(0,a.A)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):R(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var S=[{value:v.dV.Irrelevant,label:"The post is not about..."},{value:v.dV.Broken,label:"Broken link"},{value:v.dV.Clickbait,label:"Clickbait"},{value:v.dV.Low,label:"Low-quality content"},{value:v.dV.Nsfw,label:"NSFW"},{value:v.dV.Other,label:"Other"}],w={IRRELEVANT:function(e){var t,n=e.post,r=e.selectedTags,o=e.setSelectedTags;return O(b.Ye,{className:"my-4 flex-wrap gap-2"},null===(t=n.tags)||void 0===t?void 0:t.map((function(e){var t=r.includes(e);return O(p.$n,{key:e,variant:t?f.Ak.Primary:f.Ak.Float,size:f.Mp.Small,onClick:function(){o(t?r.filter((function(t){return t!==e})):[].concat((0,c.A)(r),[e]))}},"#",e)})))}};function E(e){var t,n=e.index,a=e.post,c=e.origin,i=e.onReported,p=(0,l.A)(e,g),f=(0,h.DX)().logEvent,b=(0,u.useRef)(),v=(0,u.useState)((function(){return[]})),R=v[0],E=v[1],C=(0,u.useCallback)((function(e){return S.filter((function(e){var t;return("IRRELEVANT"!==e.value||0!==(null==a||null===(t=a.tags)||void 0===t?void 0:t.length))&&e})).map((function(t){var n=t.value===e&&w[t.value];return n?A(A({},t),{},{afterElement:O(n,{post:a,selectedTags:R,setSelectedTags:E})}):t}))}),[a,R]),P=(0,m.A)().reportPost,x=function(){var e=(0,o.A)(s().mark((function e(t,r,o){var l,u;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,P({id:a.id,reason:r,comment:o,tags:R});case 2:if(l=e.sent,l.successful){e.next=6;break}return e.abrupt("return");case 6:f((0,y.P5)("report post",a,{extra:{origin:c}})),"function"==typeof i&&i(a,{index:n,shouldBlockSource:null===(u=b.current)||void 0===u?void 0:u.checked}),p.onRequestClose(t);case 9:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}();return O(k.ReasonSelectionModal,(0,r.A)({},p,{isOpen:!0,onReport:x,reasons:C,heading:"Report post",title:null!=a&&a.title?'"'.concat(a.title,'"'):void 0,footer:O(d.S,{ref:b,name:"blockSource",className:"font-normal"},"Don't show posts from ",null==a||null===(t=a.source)||void 0===t?void 0:t.name)}))}const C=E},64142:(e,t,n)=>{n.d(t,{UR:()=>b,_q:()=>p,dV:()=>d,kt:()=>u});var r,o=n(50122),a=n(91591),l=n(2972),c=n(36899);function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){(0,o.A)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var u=function(e){return e.Post="post",e.Source="source",e.Comment="comment",e.User="user",e}({}),d=function(e){return e.Nsfw="NSFW",e.Other="OTHER",e.Broken="BROKEN",e.Clickbait="CLICKBAIT",e.Low="LOW",e.Irrelevant="IRRELEVANT",e.Spam="SPAM",e.Harassment="HARASSMENT",e.Hateful="HATEFUL",e.Copyright="COPYRIGHT",e.Privacy="PRIVACY",e.Miscategorized="MISCATEGORIZED",e.Misinformation="MISINFORMATION",e.Illegal="ILLEGAL",e}({}),p=(0,l.gql)(r||(r=(0,a.A)(["\n  mutation SendReport(\n    $type: ReportEntity!\n    $id: ID!\n    $reason: ReportReason!\n    $comment: String\n    $tags: [String]\n  ) {\n    sendReport(\n      type: $type\n      id: $id\n      reason: $reason\n      comment: $comment\n      tags: $tags\n    ) {\n      _\n    }\n  }\n"]))),f=function(e){return c.e.request(p,e)},b=function(e){return f(s(s({},e),{},{type:u.Source}))}},52788:(e,t,n)=>{n.d(t,{A:()=>r});const r={checkmark:"Ur6sCRLeLJ0xiAl0Ry8kcA==",label:"_0ta8J6BOiKQx6kRDDsqEHg=="}}}]);