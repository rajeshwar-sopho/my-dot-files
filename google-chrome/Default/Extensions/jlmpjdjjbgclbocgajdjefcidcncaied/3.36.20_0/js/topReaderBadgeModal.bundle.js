"use strict";(self.webpackChunkextension=self.webpackChunkextension||[]).push([[9493],{41500:(e,t,r)=>{r.d(t,{s:()=>f});var n,a=r(7527),o=r(22155),l=r(97838);function c(){return c=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},c.apply(null,arguments)}const i=function(e){return o.createElement("svg",c({width:"1em",height:"1em",viewBox:"0 0 24 24",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",className:"icon"},e),n||(n=o.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M20.25 14a.75.75 0 01.75.75v1.75a4.5 4.5 0 01-4.288 4.495L16.5 21h-9a4.5 4.5 0 01-4.495-4.288L3 16.5v-1.75a.75.75 0 011.5 0v1.75a3 3 0 002.824 2.995l.176.005h9a3 3 0 002.995-2.824l.005-.176v-1.75a.75.75 0 01.75-.75zm-7.796 1.85c-.269.2-.638.2-.907 0l-.085-.073-5.696-5.696-.074-.085A.762.762 0 016.758 8.93l.085.074 4.393 4.393.012-5.327-.01-4.304c0-.388.288-.708.661-.759L12.005 3c.387.001.706.29.755.663l.007.103-.012 4.258.011 5.371 4.391-4.391.086-.074a.762.762 0 011.066 1.066l-.074.085-5.696 5.696-.085.074z"})))};var u;function s(){return s=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},s.apply(null,arguments)}const d=function(e){return o.createElement("svg",s({width:"1em",height:"1em",viewBox:"0 0 24 24",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",className:"icon"},e),u||(u=o.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M20 13.5a1 1 0 01.993.883L21 14.5v1.75a4.751 4.751 0 01-4.317 4.73l-.215.015-.218.005h-8.5a4.751 4.751 0 01-4.73-4.317l-.015-.215L3 16.25V14.5a1 1 0 011.993-.117L5 14.5v1.75a2.75 2.75 0 002.41 2.73l.17.015.17.005h8.5a2.75 2.75 0 002.73-2.41l.015-.17.005-.17V14.5a1 1 0 011-1zm-7.398 2.301c-.367.273-.869.263-1.224-.015l-.093-.082-5.708-5.71-.086-.1a1.012 1.012 0 011.434-1.401l.095.084 3.969 3.969.009-2.714-.01-5.816c0-.524.396-.955.904-1.01L12.005 3c.522.001.952.397 1.006.905l.006.11-.012 5.758.01 2.771 3.979-3.98.1-.085a1.012 1.012 0 011.402 1.434l-.085.095-5.709 5.708-.1.085z"})))};var p=o.createElement,f=function(e){return p(l.Ay,(0,a.A)({},e,{IconPrimary:d,IconSecondary:i}))}},22639:(e,t,r)=>{r.r(t),r.d(t,{default:()=>V});var n=r(7527),a=r(89338),o=r(2827),l=r.n(o),c=r(22155),i=r(30395),u=r.n(i),s=r(5947),d=r(94198),p=r(77955),f=r(80244),m=r(54462),v=r(13351),g=r(52865),b=r(67380),y=r(9926),w=r(16763),h=r(53143),k=c.createElement,x=function(e){var t,r=e.user,n=e.issuedAt,a=e.keyword,o=r.name,l=r.username,c=r.image,i=(0,h.Yq)({value:n,type:h.pT.TopReaderBadge});return k("div",{className:"relative flex size-80 rounded-24 p-1 text-center text-text-primary",style:{backgroundImage:m.kW[m.jG.Gold]}},k("div",{className:"z-1 flex max-w-full flex-1 flex-col items-center rounded-20 px-3 py-5"},k("div",{className:"flex justify-center pb-1"},k(y.b,{imageUrl:c})),k(b.o5,{type:b.kR.Footnote,truncate:!0,bold:!0},o),k(b.o5,{type:b.kR.Caption1,color:b.X8.Secondary,truncate:!0,className:"pb-1"},"@",l),k(b.o5,{type:b.kR.Title2,bold:!0,className:"pb-1"},"Top reader"),k(b.o5,{tag:b.UL.Time,type:b.kR.Caption1,color:b.X8.Quaternary,dateTime:new Date(n).toISOString()},i),k("div",{className:"relative my-5 max-w-max rounded-12 p-1",style:{backgroundImage:m.kW[m.jG.Gold]}},k("div",{className:"relative overflow-hidden rounded-8 px-2 py-0.5"},k(b.o5,{type:b.kR.Title2,bold:!0,className:"relative z-1 text-black"},(null===(t=a.flags)||void 0===t?void 0:t.title)||a.value),k("div",{className:"absolute left-0 top-0 z-0 h-full w-full -scale-x-100",style:{backgroundImage:m.kW[m.jG.Gold]}}))),k("div",{className:"flex"},k(v.A,{className:{container:"h-logo"}}),k(g.A,{className:{container:"ml-1 h-logo"}}))),k("div",{className:"absolute left-0 top-0 z-0 h-full w-full p-1"},k("img",{src:w.ad,alt:"Badge background",className:"left-0 top-0 h-full w-full rounded-20 bg-background-default","aria-hidden":!0})))},O=r(53823),j=r(83448),A=r(41500),R=r(72870),N=function(){var e=(0,a.A)(l().mark((function e(t){var r,n,a,o,c,i;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.filename,n=t.url,e.next=3,fetch(n);case 3:return a=e.sent,e.next=6,a.blob();case 6:o=e.sent,c=URL.createObjectURL(o),(i=document.createElement("a")).href=c,i.download=r,document.body.appendChild(i),i.click(),document.body.removeChild(i);case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),B=r(61663),C=r(57952),T=r(50122),P=r(14243),I=r(30530),E=r(36899),L=r(42104),z=function(){var e=(0,a.A)(l().mark((function e(){var t,r,n,a,o=arguments;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=o.length>0&&void 0!==o[0]?o[0]:5,r=o.length>1?o[1]:void 0,e.next=4,E.e.request(L.ev,{limit:t,userId:r});case 4:return n=e.sent,a=n.topReaderBadge,e.abrupt("return",a);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),D=function(){var e=(0,a.A)(l().mark((function e(t){var r,n;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E.e.request(L.k0,{id:t});case 2:return r=e.sent,n=r.topReaderBadgeById,e.abrupt("return",n);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),S=r(68390);function q(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}var G=function(e){var t,r=e.limit,n=void 0===r?5:r,o=e.user,c=e.badgeId,i=(0,P.I)(function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?q(Object(r),!0).forEach((function(t){(0,T.A)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):q(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({queryKey:(0,I.$h)(I.jZ.TopReaderBadge,o,null!=c?c:"latest:".concat(n)),queryFn:(t=(0,a.A)(l().mark((function e(){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!c){e.next=5;break}return e.next=3,D(c);case 3:return e.t0=e.sent,e.abrupt("return",[e.t0]);case 5:return e.abrupt("return",z(n,o.id));case 6:case"end":return e.stop()}}),e)}))),function(){return t.apply(this,arguments)}),staleTime:I.b2.OneHour},S.e_));return{data:i.data,isPending:i.isPending}},F=r(74689),M=c.createElement;const V=function(e){var t,r=e.onRequestClose,o=e.onAfterOpen,i=e.onAfterClose,m=e.badgeId,v=e.origin,g=(0,f.Z2)().user,b=(0,B.DX)().logEvent,y=(0,R.G6)(R.bh.MobileL),w=G({user:g,limit:1,badgeId:m}).data,k=null==w?void 0:w[0],T=(0,s.n)({mutationFn:N}),P=T.mutateAsync,I=T.isPending,E=(0,c.useCallback)((function(e){b({event_name:e,target_type:C.yK.Badge,target_id:C.TB.TopReader,extra:JSON.stringify({tag:k.keyword.value,origin:v})})}),[b,v,null==k||null===(t=k.keyword)||void 0===t?void 0:t.value]),L=(0,c.useCallback)((0,a.A)(l().mark((function e(){var t,r,n;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(k){e.next=2;break}return e.abrupt("return");case 2:return r=(0,h.Yq)({value:k.issuedAt,type:h.pT.TopReaderBadge}),n=(null===(t=k.keyword.flags)||void 0===t?void 0:t.title)||k.keyword.value,e.next=6,P({url:k.image,filename:"".concat(r," Top Reader in ").concat(n,".png")});case 6:E(C.VB.TopReaderBadgeDownload);case 7:case"end":return e.stop()}}),e)}))),[E,P,k]);return k?M(d.aF,(0,n.A)({},e,{size:p.rI.Small,isDrawerOnMobile:!0,onAfterClose:function(){E(C.VB.TopReaderModalClose),null==i||i()},onAfterOpen:function(){E(C.VB.Impression),null==o||o()}}),M(d.aF.Body,{className:"flex flex-col items-center justify-center gap-4 text-center"},M(F.O,{top:"2",onClick:r}),M("h1",{className:"font-bold typo-title1"},"You've earned the top reader badge!"),M(x,{user:g,keyword:k.keyword,issuedAt:k.issuedAt}),M(O.$n,{className:u()("w-full",!y&&"max-w-80"),variant:j.Ak.Primary,icon:M(A.s,{secondary:!0}),disabled:!k.image,loading:I,onClick:function(){return L()}},"Download badge"))):null}}}]);