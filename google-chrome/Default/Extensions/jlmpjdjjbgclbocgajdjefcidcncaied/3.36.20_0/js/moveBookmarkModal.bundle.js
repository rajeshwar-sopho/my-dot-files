"use strict";(self.webpackChunkextension=self.webpackChunkextension||[]).push([[7415],{156:(e,n,r)=>{r.r(n),r.d(n,{default:()=>C});var t=r(89338),o=r(75087),a=r(2827),i=r.n(a),c=r(22155),u=r(94198),s=r(99968),l=r(53823),d=r(83448),p=r(59904),f=r(71548),m=r(36780),v=r(75912),k=r(46757),y=r(38817),b=r(89883),O=r(77955),g=r(68392),j=r(50122),h=r(69918),P=r(5947),w=r(85021),F=r(30530);function D(e,n){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);n&&(t=t.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),r.push.apply(r,t)}return r}function A(e){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{};n%2?D(Object(r),!0).forEach((function(n){(0,j.A)(e,n,r[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):D(Object(r)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))}))}return e}var I=["postId","listId","onMoveBookmark"],B=c.createElement;const C=function(e){var n=e.postId,r=e.listId,a=e.onMoveBookmark,c=(0,o.A)(e,I),j=(0,g.mu)().displayToast,D=(0,k.a)().createFolder,C=(0,b.d)(),E=C.openModal,x=C.closeModal,S=(0,y.u)(),M=S.folders,Q=S.isPending,T=function(){var e=(0,g.mu)().displayToast,n=(0,h.jE)(),r=(0,P.n)({mutationFn:w.br,onError:function(){e("❌ Failed to move bookmark")},onMutate:function(e){var r=(0,F.UH)(e.postId),t=n.getQueryData(r);return n.setQueryData(r,(function(n){return A(A({},n),{},{post:A(A({},null==n?void 0:n.post),{},{bookmarkList:{id:e.listId}})})})),function(){return n.setQueryData(r,t)}}});return{isPending:r.isPending,moveBookmarkToFolder:r.mutateAsync}}(),N=T.moveBookmarkToFolder,$=T.isPending,K=function(){var e=(0,t.A)(i().mark((function e(t){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!$){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,N({postId:n,listId:null==t?void 0:t.id});case 4:j("✅ Moved to ".concat(null==t?void 0:t.name),{onUndo:function(){return K({id:r})}}),null==a||a(null==t?void 0:t.id),x();case 7:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),Z=function(){var e=(0,t.A)(i().mark((function e(n){var r;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,D(n);case 2:r=e.sent,K(r),x();case 5:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}();return B(u.aF,c,B(s.rQ,{title:"Choose a folder"}),B(u.aF.Body,null,B(l.$n,{onClick:function(){E({type:O.K2.BookmarkFolder,props:{onSubmit:function(e){return Z(e)},onAfterClose:function(){return E({type:O.K2.MoveBookmark,props:{postId:n,listId:r}})}}})},icon:B("div",{className:"flex  rounded-6 bg-background-subtle"},B(p.c,{className:"m-auto"})),variant:d.Ak.Option},"New folder"),B(l.$n,{onClick:function(){return K({name:"Quick saves"})},icon:B(f.c,null),variant:d.Ak.Option,role:"radio","aria-checked":!r},"Quick saves",!r&&B("span",{className:"ml-auto"},B(m.w,{secondary:!0,"aria-hidden":!0}))),(null==M?void 0:M.length)>0&&M.map((function(e){return B(l.$n,{loading:Q,key:e.id,onClick:function(){return K(e)},variant:d.Ak.Option,icon:null!=e&&e.icon?B("span",null,e.icon):B(v.s,null),role:"radio","aria-checked":e.id===r},e.name,e.id===r&&B("span",{className:"ml-auto"},B(m.w,{secondary:!0,"aria-hidden":!0})))}))))}},38817:(e,n,r)=>{r.d(n,{u:()=>c});var t=r(14243),o=r(85021),a=r(30530),i=r(80244),c=function(){var e=(0,i.Z2)(),n=e.isAuthReady,r=e.isLoggedIn,c=(0,t.I)({queryKey:(0,a.$h)(a.jZ.BookmarkFolders),queryFn:o.uC,staleTime:a.b2.Default,enabled:n&&r}),u=c.data;return{isPending:c.isPending,isSuccess:c.isSuccess,folders:null!=u?u:[]}}},46757:(e,n,r)=>{r.d(n,{a:()=>m});var t=r(50122),o=r(92203),a=r(69918),i=r(5947),c=r(85021),u=r(61663),s=r(57952),l=r(68392),d=r(30530);function p(e,n){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);n&&(t=t.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),r.push.apply(r,t)}return r}function f(e){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{};n%2?p(Object(r),!0).forEach((function(n){(0,t.A)(e,n,r[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):p(Object(r)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))}))}return e}var m=function(){var e=(0,u.DX)().logEvent,n=(0,l.mu)().displayToast,r=(0,a.jE)(),t=(0,i.n)({mutationFn:c.l0,onSuccess:function(t,a){var i=t.id;e({event_name:s.VB.CreateBookmarkFolder,target_id:i});var c=(0,d.$h)(d.jZ.BookmarkFolders);r.setQueryData(c,(function(e){return[].concat((0,o.A)(e),[f({id:i},a)]).sort((function(e,n){return e.name.localeCompare(n.name)}))})),n("".concat(t.name," has been created"))},onError:function(){n("Failed to create folder")}}),p=t.mutateAsync;return{isPending:t.isPending,createFolder:p}}}}]);