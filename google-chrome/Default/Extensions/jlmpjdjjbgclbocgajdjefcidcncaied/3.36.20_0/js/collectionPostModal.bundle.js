"use strict";(self.webpackChunkextension=self.webpackChunkextension||[]).push([[6316],{95117:(e,t,o)=>{o.r(t),o.d(t,{default:()=>we});var n=o(7527),a=o(75087),s=o(22155),i=o(94198),l=o(57952),r=o(5106),c=o(99391),u=o(55059),p=o(50122),d=o(30395),m=o.n(d),f=o(95974),g=o(71992),v=o(68392),P=o(30606),b=o(76179),x=o(59837),N=o(16763),y=o(63952),h=o(53143),C=o(37774),O=o(16714),A=o(22514),w=o(44481),k=o(63423),j=o(90269),R=o(15837),E=["post","onClose","inlineActions","className","notificationClassName","contextMenuId","onRemovePost"],S=s.createElement,D=(0,k.A)("div","flex flex-row items-center"),I=function(e){var t=e.post,o=e.onClose,s=e.inlineActions,i=e.className,r=(e.notificationClassName,e.contextMenuId),c=e.onRemovePost,u=(0,a.A)(e,E);return S(D,(0,n.A)({},u,{className:m()("gap-2",i)}),S(R.F,{post:t}),S(j.I,{post:t,onClose:o,inlineActions:s,contextMenuId:r,onRemovePost:c,origin:l.$e.CollectionModal}))},L=o(49577),T=o(9495),q=o(71623),F=o(83448),M=s.createElement,H=function(e){var t=e.className,o=(0,T.d)(),n=o.checkHasCompleted,a=o.completeAction;return!o.isActionsFetched||n(q.X2.CollectionsIntro)?null:M("span",{className:m()("relative flex w-full flex-row rounded-10 border border-accent-cabbage-default p-3 pr-2",t)},M("div",{className:"flex flex-1 flex-col typo-subhead"},M("strong",null,"Introducing collections!"),M("p",{className:"mt-2"},"Collections are posts that aggregate all the information about specific news to help you save time and discuss with the community.")),M(L.A,{size:F.Mp.XSmall,onClick:function(){return a(q.X2.CollectionsIntro)}}))},_=o(89338),V=o(2827),$=o.n(V),z=o(5196),K=o(43918),X=o(53823),B=s.createElement,Z={type:"button",iconOnly:!0,buttonSize:F.Mp.Small},J=function(e){var t=e.hasNext,o=e.hasPrevious,a=e.onNext,s=e.onPrevious;return B("div",{className:"flex items-center justify-end border-t border-border-subtlest-tertiary p-3"},B(X.$n,(0,n.A)({},Z,{icon:B(K.HK,{className:"-rotate-90"}),variant:F.Ak.Tertiary,disabled:!o,onClick:s})),B(X.$n,(0,n.A)({},Z,{icon:B(K.HK,{className:"rotate-90"}),variant:F.Ak.Tertiary,disabled:!t,onClick:a})))},Q=o(9062),U=o(69069),Y=o(7986),G=o(21861),W=o(69918),ee=o(15819),te=o(30530),oe=o(91201);function ne(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),o.push.apply(o,n)}return o}function ae(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?ne(Object(o),!0).forEach((function(t){(0,p.A)(e,t,o[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):ne(Object(o)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))}return e}var se=o(38638),ie=s.createElement,le=function(e){var t=e.className,o=e.post,n=e.perPage,a=void 0===n?u._:n,i=e.relationType,l=function(e){var t,o=e.postId,n=e.relationType,a=e.perPage,i=void 0===a?u._:a,l=(0,oe.D)().requestMethod,r=(0,W.jE)(),c=(0,ee.q)({queryKey:(0,te.$h)(te.jZ.RelatedPosts,null,{id:o,type:n}),queryFn:(t=(0,_.A)($().mark((function e(t){var a,s;return $().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.pageParam,e.next=3,l(u.bY,{id:o,relationType:n,first:i,after:a});case 3:return s=e.sent,e.abrupt("return",s.relatedPosts);case 5:case"end":return e.stop()}}),e)}))),function(e){return t.apply(this,arguments)}),initialPageParam:"",enabled:!!o,getNextPageParam:function(e){return(0,te.iP)(null==e?void 0:e.pageInfo)},select:(0,s.useCallback)((function(e){if(e)return ae(ae({},e),{},{pages:e.pages.filter((function(e){return!(null==e||!e.edges.length)}))})}),[]),staleTime:te.b2.Default,initialData:function(){if(n===u.Vv.Collection){var e=r.getQueryData((0,te.UH)(o));if(null!=e&&e.relatedCollectionPosts)return{pages:[e.relatedCollectionPosts],pageParams:[null]}}}});return{relatedPosts:c.data,isLoading:c.isLoading,hasNextPage:c.hasNextPage,fetchNextPage:c.fetchNextPage,isFetchingNextPage:c.isFetchingNextPage}}({postId:o.id,relationType:i,perPage:a}),r=l.relatedPosts,c=l.isLoading,p=l.isFetchingNextPage,d=l.hasNextPage,f=l.fetchNextPage,g=(0,s.useState)(0),v=g[0],P=g[1],b=null==r?void 0:r.pages[v],x=c||!(null==b||!b.edges.length),N=!(null==r||!r.pages[v+1]);return(0,s.useEffect)((function(){d&&!N&&f()}),[d,N,f]),x?ie("div",{className:m()(t,"flex flex-col",z.Vj)},ie("div",{className:"flex cursor-pointer items-center justify-between rounded-16 rounded-t-16 px-4 py-1.5 laptop:cursor-auto laptop:py-4 laptop:!pb-0"},ie("p",{className:"font-bold text-text-quaternary typo-callout laptop:text-text-quaternary"},o.numCollectionSources," sources")),ie("div",{className:"flex flex-col pb-0 pt-2 laptop:min-h-[14rem]"},c&&ie("article",{"aria-busy":!0,className:"flex w-60 flex-col items-stretch px-4 py-2 laptop:w-full"},ie("div",{className:"mb-2 flex items-center"},ie(Q._,{className:"mr-2 h-6 w-6 rounded-full"}),ie(Q._,{className:"h-4 w-24"})),ie("div",{className:"mb-2 flex flex-1 flex-col items-center"},ie(Q._,{className:"my-1 h-4 w-full"}),ie(Q._,{className:"my-1 h-4 w-full"}))),!c&&(null==b?void 0:b.edges.map((function(e){var t=e.node;return ie("article",{key:t.id,className:"relative flex flex-col gap-2 px-4 py-2 hover:bg-surface-hover"},ie(G.hB,{className:"cursor-pointer",href:t.commentsPermalink,title:t.title}),ie("div",{className:"flex overflow-hidden"},ie(U.J,{source:t.source,size:se.Ov.Small}),ie(Y.A,{description:t.source.name,createdAt:t.createdAt})),ie("p",{className:"line-clamp-2 text-text-link typo-callout"},t.title),!!t.summary&&ie("p",{className:"line-clamp-2 text-text-tertiary typo-footnote"},t.summary))})))),ie(J,{hasNext:N,hasPrevious:v>0,onPrevious:function(){P((function(e){return e?e-1:0}))},onNext:(0,_.A)($().mark((function e(){return $().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!p){e.next=2;break}return e.abrupt("return");case 2:if(!d||N){e.next=5;break}return e.next=5,f();case 5:P((function(e){return e+1}));case 6:case"end":return e.stop()}}),e)})))})):null},re=o(97789),ce=s.createElement,ue=function(e){var t=e.onCopyPostLink,o=e.post,n=e.origin,a=e.className,s=e.onClose;return ce(O.P8,{className:a},ce(I,{post:o,onClose:s,className:"hidden pt-6 laptop:flex",contextMenuId:"post-widgets-context"}),ce(H,{className:"hidden laptop:flex"}),ce(le,{post:o,relationType:u.Vv.Collection}),ce(w.A,{post:o}),ce(A._,{post:o,origin:n,onCopyPostLink:t,link:o.commentsPermalink}),ce(re.j,null))},pe=o(56047),de=o(56392),me=o(80244),fe=o(54883),ge=o(29192),ve=o(9895),Pe=o(1414),be=o(13090),xe=o(42392),Ne=s.createElement;function ye(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),o.push.apply(o,n)}return o}function he(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?ye(Object(o),!0).forEach((function(t){(0,p.A)(e,t,o[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):ye(Object(o)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))}return e}var Ce=(0,Pe.h)((function(e){var t,o,n=e.post,a=e.className,i=void 0===a?{}:a,l=e.shouldOnboardAuthor,r=e.origin,c=e.position,u=e.inlineActions,p=e.onPreviousPost,d=e.onNextPost,O=e.onClose,A=e.postPosition,w=e.isFallback,k=e.customNavigation,j=e.onRemovePost,R=e.backToSquad,E=e.isBannerVisible,S=e.isPostPage,D=(0,me.Z2)().user,I=(0,v.mu)().subject,L=(0,b.A)({origin:r,post:n}),T=n.updatedAt,q=n.contentHtml,F=n.image,M=L.onCopyPostLink,_=L.onReadArticle,V=!!p||!!d,$=m()("laptop:flex-row laptop:pb-0",null==i?void 0:i.container),z={postPosition:A,onPreviousPost:p,onNextPost:d,post:n,onReadArticle:_,onClose:O,inlineActions:u,onRemovePost:j},K=(0,ge.L)();return(0,s.useEffect)((function(){null!=n&&n.id&&null!=D&&D.id&&K(n.id)}),[null==n?void 0:n.id,K,null==D?void 0:D.id]),Ne(P.A,{hasNavigation:V,className:$,"aria-live":I===v.a0.PostContent?"polite":"off",navigationProps:"fixed"===c?he(he({},z),{},{isBannerVisible:E,className:null==i?void 0:i.fixedNavigation}):null},Ne(pe.K,{className:m()("relative",null==i?void 0:i.content),"data-testid":"postContainer"},Ne(x.N,{className:he(he({},i),{},{onboarding:m()(null==i?void 0:i.onboarding,R&&"mb-6"),navigation:{actions:null==i||null===(t=i.navigation)||void 0===t?void 0:t.actions,container:m()("pt-6",null==i||null===(o=i.navigation)||void 0===o?void 0:o.container)}}),isPostPage:S,isFallback:w,customNavigation:k,shouldOnboardAuthor:l,navigationProps:z,engagementProps:L,origin:r,post:n},Ne(be.i,{className:"mb-3"}),Ne("div",{className:m()("mb-6 flex flex-col gap-6",V||k?"mt-6":"mt-6 laptop:mt-0")},Ne(H,{className:"laptop:hidden"}),Ne(f.A,{href:"".concat(fe.ZO,"sources/collections"),passHref:!0},Ne(de.a,{tag:"a",label:"Collection",className:"bg-theme-overlay-float-cabbage text-brand-default"})),Ne("h1",{className:"break-words font-bold typo-large-title","data-testid":"post-modal-title"},n.title),Ne(xe.h,{post:n}),!!T&&Ne("div",{className:"flex items-center text-text-tertiary typo-footnote"},Ne("span",null,"Last updated")," ",Ne(y.wv,null),Ne(ve.o,{date:T,type:h.pT.Post})),F&&Ne("div",{className:"block h-auto w-full overflow-hidden rounded-12"},Ne(g.o,{imgSrc:F,imgAlt:"Post cover image",ratio:"52%",fallbackSrc:N.uC,eager:!0,fetchPriority:"high"})),Ne(C.A,{content:q})))),Ne(ue,{onCopyPostLink:M,post:n,className:"pb-8",onClose:O,origin:r}))})),Oe=["id","className","onRequestClose","onPreviousPost","onNextPost","postPosition","post","onRemovePost"],Ae=s.createElement;function we(e){e.id,e.className;var t=e.onRequestClose,o=e.onPreviousPost,s=e.onNextPost,p=e.postPosition,d=e.post,m=e.onRemovePost,f=(0,a.A)(e,Oe),g=(0,r.A)({isDisplayed:f.isOpen,offset:0}),v=g.position,P=g.onLoad;return Ae(c.A,(0,n.A)({},f,{onAfterOpen:P,onRequestClose:t,postType:u.xj.Collection,source:d.source,loadingClassName:"!pb-2 laptop:pb-0"}),Ae(Ce,{position:v,post:d,postPosition:p,onPreviousPost:o,onNextPost:s,inlineActions:!0,className:{onboarding:"mt-8",navigation:{actions:"ml-auto laptop:hidden"},fixedNavigation:{container:i.HR[i.aF.Size.XLarge],actions:"ml-auto"}},onClose:t,origin:l.$e.CollectionModal,onRemovePost:m}))}}}]);