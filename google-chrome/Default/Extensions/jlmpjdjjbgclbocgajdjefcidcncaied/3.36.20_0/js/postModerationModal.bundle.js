"use strict";(self.webpackChunkextension=self.webpackChunkextension||[]).push([[7344],{26391:(e,t,n)=>{n.r(t),n.d(t,{default:()=>oe});var r=n(7527),o=n(75087),a=n(22155),l=n(38166),s=n.n(l),i=n(94198),c=n(67380),u=n(48389),d=n(53823),m=n(83448),p=n(17631),f=n(36780),v=a.createElement;function h(e){var t=e.onApprove,n=e.onReject,r=e.isLoading;return v("div",{className:"flex w-full flex-row gap-4"},v(d.$n,{size:m.Mp.Small,className:"flex-1",disabled:r,variant:m.Ak.Float,icon:v(p.t,null),onClick:n},"Decline"),v(d.$n,{size:m.Mp.Small,className:"flex-1",disabled:r,variant:m.Ak.Primary,icon:v(f.w,{secondary:!0}),onClick:t},"Approve"))}var b=n(56697),y=n(23879),g=n(97894),P=n(87822),x=n(57952),w=n(76179),N=n(61231),k=n(37774),A=n(84682),O=n(74689),S=n(89338),j=n(2827),D=n.n(j),C=n(9487),E=n(28277),R=n(62859),F=n(15860),q=n(75472),T=n(97900),L=n(27840),M=a.createElement,z=function(e){var t=e.id,n=e.onDelete,r=(0,a.useId)(),o=(0,T.A)({id:r}),l=o.isOpen,s=o.onMenuClick,i=(0,L.k)().showPrompt,c=(0,C.useRouter)(),u=function(){var e=(0,S.A)(D().mark((function e(){return D().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i({title:"Delete post",description:"Are you sure you want to delete this post?"});case 2:e.sent&&n(t);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return M(a.Fragment,null,M(E.A,{onClick:s,className:"z-1 !my-0",tooltipPlacement:"right",size:m.Mp.Medium}),M(R.default,{options:[{label:"Edit post",action:function(){return c.push("/posts/".concat(t,"/edit?moderation=true"))},icon:M(F.q,{"aria-hidden":!0})},{label:"Delete post",action:u,icon:M(q.u,{"aria-hidden":!0})}],id:r,isOpen:l}))},I=n(50122),H=n(69918),Q=n(5947),W=n(89883),B=n(77955),$=n(68392),_=n(30530),G=n(61663),V=n(11924),Z=n(80244);function K(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function X(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?K(Object(n),!0).forEach((function(t){(0,I.A)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):K(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var U=[{value:u.tP.OffTopic,label:"Off-topic post unrelated to the Squad"},{value:u.tP.Violation,label:"Violates the Squadâ€™s code of conduct"},{value:u.tP.Promotional,label:"Too promotional without adding value"},{value:u.tP.Duplicate,label:"Duplicate or similar content already posted"},{value:u.tP.LowQuality,label:"Lacks quality or clarity"},{value:u.tP.NSFW,label:"Inappropriate, NSFW or offensive post"},{value:u.tP.Spam,label:"Post is spam or scam"},{value:u.tP.Misinformation,label:"Contains misleading or false information"},{value:u.tP.Copyright,label:"Copyright or privacy violation"},{value:u.tP.Other,label:"Other"}],Y=function(e){return e.map((function(e){return{id:e.id,source:e.source,type:e.type,image:e.image,commentsPermalink:"",author:e.createdBy,createdAt:e.createdAt}}))},J=n(38638),ee=n(27504),te=n(76800),ne=["onApprove","onReject","data","squad"],re=a.createElement;const oe=function(e){var t=e.onApprove,n=e.onReject,l=e.data,d=e.squad,m=(0,o.A)(e,ne),p=l.id,f=l.post,v=l.createdAt,j=l.createdBy,C=l.image,E=l.title,R=l.titleHtml,F=l.content,q=l.contentHtml,T=l.sharedPost,M=l.source,I=l.externalLink,K=(0,w.a)({origin:x.$e.ArticleModal,post:T}),oe=(0,u.pZ)(d,P.Wk.ModeratePost),ae=function(e){var t=e.squad,n=(0,W.d)(),r=n.openModal,o=n.closeModal,l=(0,$.mu)().displayToast,s=(0,L.k)().showPrompt,i=(0,G.DX)().logEvent,c=(0,Z.Z2)().user,d=(0,H.jE)(),m=(0,_.$h)(_.jZ.SquadPostRequests,c,null==t?void 0:t.id),p=(0,_.$h)(_.jZ.Squad,c,null==t?void 0:t.handle),f=(0,a.useCallback)((function(e){var t=d.getQueryData(m),n=d.getQueryData(p);return n&&d.setQueryData(p,(function(t){return X(X({},t),{},{moderationPostCount:n.moderationPostCount-e.postIds.length})})),d.setQueryData(m,(function(t){return t?X(X({},t),{},{pages:t.pages.map((function(t){return X(X({},t),{},{edges:t.edges.filter((function(t){return!e.postIds.includes(t.node.id)}))})}))}):t})),{currentData:t,currentSquad:n}}),[d,m,p]),v=(0,Q.n)({mutationFn:function(e){var t=e.postIds;return(0,u.Nu)(t)},onMutate:function(e){return f(e)},onSuccess:function(e){l("Post(s) approved successfully"),Y(e).forEach((function(e){i((0,V.P5)(x.VB.ApprovePost,e))}))},onError:function(e,t,n){t.postIds.length>50?l("Failed to approve post(s). Please approve maximum 50 posts at a time"):(d.setQueryData(m,null==n?void 0:n.currentData),d.setQueryData(p,null==n?void 0:n.currentSquad),l("Failed to approve post(s)"))}}),h=v.mutateAsync,b=v.isPending,y=v.isSuccess,g=(0,a.useCallback)(function(){var e=(0,S.A)(D().mark((function e(t,n){return D().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(1!==t.length){e.next=4;break}return e.next=3,h({postIds:t,sourceId:n});case 3:return e.abrupt("return");case 4:return e.next=6,s({title:"Approve all ".concat(t.length," posts?"),description:"This action cannot be undone.",okButton:{title:"Yes, Approve all"}});case 6:if(!e.sent){e.next=10;break}return e.next=10,h({postIds:t,sourceId:n});case 10:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),[h,s]),P=(0,Q.n)({mutationFn:function(e){return(0,u.NU)(e)},onMutate:function(e){return f(e)},onSuccess:function(e){l("Post(s) declined successfully"),Y(e).forEach((function(e){i((0,V.P5)(x.VB.RejectPost,e))}))},onError:function(e,t,n){d.setQueryData(m,n.currentData),d.setQueryData(p,n.currentSquad)}}),w=P.mutateAsync,N=P.isPending,k=P.isSuccess;return{isSuccess:y||k,isPending:b||N,onApprove:g,onReject:(0,a.useCallback)((function(e,t){r({type:B.K2.ReasonSelection,props:{onReport:function(n,r,a){return w({postIds:[e],sourceId:t,reason:r,note:a}).then(o)},reasons:U,heading:"Select a reason for declining"}})}),[o,w,r]),onDelete:(0,Q.n)({mutationFn:function(e){return(0,u.gT)(e)},onSuccess:function(){l("Post deleted successfully")}}).mutateAsync}}({squad:d}).onDelete;return re(i.aF,(0,r.A)({},m,{size:i.aF.Size.Large,kind:i.aF.Kind.FlexibleTop,className:"tablet:max-h-[calc(100vh-5rem)]"}),re(i.aF.Body,{className:"gap-6 !p-6"},oe&&re(h,{onReject:function(){return n([p],M.id)},onApprove:function(){return t([p],M.id)}}),re("div",{className:"flex flex-row items-center justify-between"},re(c.o5,{bold:!0,className:"flex-1",tag:c.UL.H3,truncate:!0,type:c.kR.Title3},"Post preview"),!oe&&re(z,{id:p,onDelete:function(e){return ae(e).then((function(){return m.onRequestClose(null)}))}}),re(O.O,{className:"!flex",onClick:m.onRequestClose,position:"relative",right:"0"})),re(b.A,{source:d,size:J.Ov.Small}),re(y.A,{author:j,date:v}),re(N.W,{title:E||(null==f?void 0:f.title),titleHtml:R||(null==f?void 0:f.titleHtml)}),!T&&(C||(null==f?void 0:f.image))&&re(ee.A,{condition:!!I,wrapper:function(e){return re(s(),{href:I,target:"_blank",rel:te.O8},e)}},re(A.$,{imgSrc:C||(null==f?void 0:f.image)})),!(null==q||!q.length)&&re(k.A,{className:"!mt-0",content:q}),!(null!=q&&q.length)&&!(null==F||!F.length)&&re(c.o5,{type:c.kR.Body},F),T&&re("div",{className:"-mt-8"},re(g.a,{source:d,sharedPost:T,onReadArticle:K}))))}},84682:(e,t,n)=>{n.d(t,{$:()=>f,A:()=>v});var r=n(22155),o=n(30395),a=n.n(o),l=n(95974),s=n(55059),i=n(37774),c=n(71992),u=n(16763),d=n(39762),m=n(47375),p=r.createElement,f=function(e){var t=e.imgSrc,n=e.className;return p("div",{className:a()("block h-fit max-w-sm cursor-pointer overflow-hidden rounded-16",n)},p(c.o,{imgSrc:t,imgAlt:"Post cover image",ratio:"52%",eager:!0,fallbackSrc:u.uC}))};const v=function(e){var t=e.post,n=(0,d.Z)(t).title;return p(r.Fragment,null,p("div",{className:"my-6"},p("h1",{className:"whitespace-pre-line font-bold typo-title2"},n),t.clickbaitTitleDetected&&p(m.O,{post:t})),t.type===s.xj.Freeform&&t.image&&p(l.A,{href:t.image},p("a",{target:"_blank",rel:"noopener noreferrer"},p(c.o,{eager:!1,fetchPriority:"low",ratio:"52%",imgSrc:t.image,imgAlt:"Post cover image",className:"mb-10 h-auto max-h-[62.5rem] w-full rounded-12 object-cover",fallbackSrc:u.uC}))),p(i.A,{content:t.contentHtml,className:t.type!==s.xj.Welcome&&"mb-5"}),t.type===s.xj.Welcome&&t.image&&p(f,{imgSrc:t.image,className:"mb-5 mt-8"}))}},56697:(e,t,n)=>{n.d(t,{A:()=>m});var r=n(30395),o=n.n(r),a=n(22155),l=n(38166),s=n.n(l),i=n(63952),c=n(58392),u=n(38638),d=a.createElement;const m=function(e){var t=e.date,n=e.source,r=e.size,l=void 0===r?u.Ov.Medium:r,m=e.className,p="unknown"===n.id;return d("span",{className:o()("flex flex-row items-center text-text-tertiary typo-footnote",m)},!p&&d(a.Fragment,null,d(c.A,{source:n,size:l}),d(s(),{href:n.permalink,className:"ml-2 typo-callout"},n.handle)),!!t&&d(a.Fragment,null,!p&&d(i.wv,null),d("time",{dateTime:t},t)))}},97894:(e,t,n)=>{n.d(t,{A:()=>F,a:()=>R});var r=n(7527),o=n(22155),a=n(30395),l=n.n(a),s=n(56697),i=n(3957),c=n(55059),u=n(52045),d=n(12430),m=n(24122),p=n(14721),f=n(83448),v=n(9062),h=n(38638),b=n(16714),y=n(71992),g=n(16763),P=n(61231),x=n(17631),w=n(75570),N=n(67380),k=n(54883),A=n(97838),O=n(87822),S=n(4250),j=o.createElement,D=function(){return j(o.Fragment,null,j(v._,{className:"mt-6 h-6 w-2/4 rounded-10"}),j("div",{className:"mb-5 mt-8 rounded-16 border border-border-subtlest-tertiary"},j("div",{className:"flex max-w-full flex-col p-4 pt-5 laptop:flex-row"},j("div",{className:"flex flex-1 flex-col gap-9"},j(v._,{className:"h-6 w-20 rounded-10"}),j(v._,{className:"h-6 w-20 rounded-10"})),j(v._,{className:"ml-2 h-36 w-70 rounded-16"}))))},C=function(){return j(m.N,{className:"mb-5 mt-8"},j("div",{className:"flex flex-row items-center gap-1 px-5 py-4"},j(x.t,null),j(N.o5,{className:"flex-1",type:N.kR.Subhead,color:N.X8.Secondary},"This post is no longer available. It might have been removed or the link has expired.")))},E=function(e){var t=e.post,n=e.openArticle;return j(m.N,{className:"mb-5 mt-8"},j("div",{className:"flex flex-row items-center gap-1 px-5 py-4"},j("div",{className:"flex size-6 items-center justify-center rounded-full bg-surface-secondary"},j(w.O,{size:A.lK.Size16})),j(N.o5,{className:"flex-1",type:N.kR.Subhead,color:N.X8.Secondary},"This post is in a private squad."),j(i.l,(0,r.A)({content:(0,S.L)({post:t}),className:"w-fit",href:t.commentsPermalink,variant:f.Ak.Secondary,title:"Go to post",rel:"noopener"},(0,d.t)(n)))))};function R(e){var t=e.sharedPost,n=e.source,a=e.onReadArticle,v=(0,u.Mp)().sidebarExpanded,P=(0,o.useContext)(u.Ay).openNewTab,x=(0,S.L)({post:t}),w=function(e){e.stopPropagation(),a()};if(!t)return j(D,null);var N=(0,c.aH)({sharedPost:t})||(0,c.LJ)(t),A=t.id===k.HR,R=t.private,F=t.source.type;return A?j(C,null):R&&F===O.Y1.Squad?j(E,{post:t,openArticle:w}):j(m.N,{post:t,summary:t.summary,className:"mb-5 mt-8"},j("div",{className:l()("flex max-w-full flex-col gap-2 p-4 pt-5",v?"laptopL:flex-row":"laptop:flex-row")},j("div",{className:l()("mb-5 flex max-w-full flex-1 flex-col truncate",v?"laptopL:mb-0":"laptop:mb-0")},j(p.i,{source:n,sharedPost:t,onGoToLinkProps:(0,d.t)(w),className:"mb-4 mt-0 flex flex-wrap font-bold typo-body"},j(b.mE,null,t.title)),j(s.A,{date:t.readTime?"".concat(t.readTime,"m read time"):void 0,source:t.source,size:h.Ov.Small}),j(i.l,(0,r.A)({content:x,className:"mt-5 w-fit",variant:f.Ak.Secondary,href:N?t.commentsPermalink:t.permalink,openNewTab:!N&&P,title:"Go to post",rel:"noopener"},(0,d.t)(w)))),j(p.i,{source:n,sharedPost:t,onGoToLinkProps:(0,d.t)(w),className:"mx-auto block h-fit w-70 cursor-pointer overflow-hidden rounded-16"},j(y.o,{imgSrc:t.image,imgAlt:"Post cover image",ratio:"52%",eager:!0,fallbackSrc:g.uC,fetchPriority:"high"}))))}const F=function(e){var t=e.post,n=e.onReadArticle;return j(o.Fragment,null,j(P.W,{title:null==t?void 0:t.title,titleHtml:null==t?void 0:t.titleHtml}),j(R,{onReadArticle:n,source:t.source,sharedPost:t.sharedPost}))}},24122:(e,t,n)=>{n.d(t,{N:()=>i});var r=n(22155),o=n(30395),a=n.n(o),l=n(69366),s=r.createElement;function i(e){var t=e.children,n=e.post,r=e.summary,o=e.className,i=e.Wrapper,c=null!=n&&n.summary?s("div",{className:"px-4"},s(l.u,{post:n,isContainedView:!0})):null;return s("div",{className:a()("flex flex-col rounded-16 border border-border-subtlest-tertiary hover:border-border-subtlest-secondary",o)},t,i&&r?s(i,null,c):c)}},14721:(e,t,n)=>{n.d(t,{i:()=>d});var r=n(7527),o=n(50122),a=n(75087),l=n(22155),s=n(95974),i=["href","as"],c=l.createElement;function u(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var d=function(e){var t=e.sharedPost,n=e.source,l=e.className,d=e.children,m=e.onGoToLinkProps,p="unknown"===t.source.id?function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?u(Object(n),!0).forEach((function(t){(0,o.A)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):u(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({href:t.permalink,target:"_blank",rel:"noopener",as:void 0},m):{href:"".concat(t.commentsPermalink,"?squad=").concat(n.handle,"&n=").concat(n.name),as:t.commentsPermalink},f=p.href,v=p.as,h=(0,a.A)(p,i);return c(s.A,{href:f,as:v},c("a",(0,r.A)({},h,{className:l}),d))}},61231:(e,t,n)=>{n.d(t,{W:()=>l});var r=n(22155),o=n(37774),a=r.createElement;function l(e){var t=e.title,n=e.titleHtml;return t?n?a(o.A,{className:"mt-6",content:n}):a("p",{className:"mt-6 whitespace-pre-line typo-title3"},t):null}}}]);