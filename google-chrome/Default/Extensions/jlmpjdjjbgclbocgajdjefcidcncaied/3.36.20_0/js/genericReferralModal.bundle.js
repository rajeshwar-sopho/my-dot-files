"use strict";(self.webpackChunkextension=self.webpackChunkextension||[]).push([[1220],{28523:(e,r,t)=>{t.r(r),t.d(r,{default:()=>K});var n=t(7527),a=t(75087),i=t(22155),l=t(94198),o=t(16763),u=t(77955),s=t(83448),c=t(70591),p=t(57952),f=t(89338),d=t(2827),v=t.n(d),m=t(14243),y=t(91201),C=t(42104),g=t(30530),k=t(80244),h=t(62424),b=t(54883),x=t(37673),A={},R=t(53823),S=t(46721),T=t(27179),I=t(63913),q=t(9064),O=t(4315),P=t(36599),w=t(61663),N=i.createElement;const U=function(e){var r=e.url,t=e.targetType,n=(0,i.useContext)(w.Ay).logEvent,a=r||c.nf.referral.defaultUrl,l={whatsapp:{icon:N(T.Y,null),tooltip:"Share on WhatsApp",href:(0,S.EX)(a),shareProvider:S.JA.WhatsApp},facebook:{icon:N(I.i,null),tooltip:"Share on Facebook",href:(0,S.w4)(a),shareProvider:S.JA.Facebook},x:{icon:N(q.F,null),tooltip:"Share on X",href:(0,S.RY)(a,O.W.referral.generic.inviteText),shareProvider:S.JA.Twitter}};return N(i.Fragment,null,Object.values(l).map((function(e){var r=e.tooltip,a=e.icon,i=e.href,l=e.shareProvider;return N(P.S,{content:r,key:r},N(R.$n,{icon:a,href:i,variant:s.Ak.Tertiary,target:"_blank",rel:"noopener",tag:"a",onClick:function(){n({event_name:p.VB.InviteReferral,target_id:l,target_type:t})}}))})))};var E=t(34086),L=t(74689),_=t(82422),z=["onRequestClose"],F=i.createElement;const K=function(e){var r=e.onRequestClose,t=(0,a.A)(e,z),d=(0,i.useContext)(_.Ay).updateLastReferralReminder,R=(0,i.useState)(!1),S=R[0],T=R[1],I=function(e){var r,t=e.campaignKey,n=e.enabled,a=void 0===n||n,l=Object.values(x.p).includes(t),o=A[t],u=((0,h.rk)(o)||!o&&l)&&a,s=(0,y.D)().requestMethod,c=(0,i.useContext)(k.Ay).user,p=(0,g.$h)(g.jZ.ReferralCampaigns,c,{referralOrigin:t}),d=(0,m.I)({queryKey:p,queryFn:(r=(0,f.A)(v().mark((function e(){var r;return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s(C.cb,{referralOrigin:t},{requestKey:JSON.stringify(p)});case 2:return r=e.sent,e.abrupt("return",r.referralCampaign);case 4:case"end":return e.stop()}}),e)}))),function(){return r.apply(this,arguments)}),enabled:!(null==c||!c.id||!u),staleTime:g.SJ}),R=d.data,S=d.isSuccess,T=d.fetchStatus,I=null!=R?R:{},q=I.referralCountLimit,O=void 0===q?0:q,P=I.referredUsersCount,w=void 0===P?0:P,N=I.referralToken,U=w>O?O:w;return{referredUsersCount:w,referralCountLimit:O,url:I.url,referralToken:N,isReady:S||"idle"===T||b.zS,isCompleted:U>=O,availableCount:O-w,noKeysAvailable:O-w<=0}}({campaignKey:x.p.Generic}).url,q=I||c.nf.referral.defaultUrl,O=(0,w.DX)().logEvent,P=(0,i.useRef)(!1);return(0,i.useEffect)((function(){P.current||(d(),P.current=!0,O({event_name:p.VB.Impression,target_type:p.yK.ReferralPopup}))}),[O,d]),F(l.aF,(0,n.A)({},t,{onRequestClose:r,size:u.rI.Small}),F(L.O,{onClick:r,variant:s.Ak.Secondary,size:s.Mp.Small,top:"4",right:"4",zIndex:"2"}),F(l.aF.Body,null,F("div",{className:"relative z-1 mb-5 flex aspect-square w-full flex-col items-center justify-end"},F("h1",{className:"mb-4 font-bold typo-mega3"},"Invite friends"),F("p",{className:"text-text-secondary typo-title3"},"And make Ido (our CTO) smile again.")),F("img",{src:S?o.DA:o.x4,alt:S?"CTO Ido looking happy":"CTO Ido looking sad",className:"absolute left-0 top-0 z-0 aspect-square w-full object-cover"}),F(E.U,{logProps:{event_name:p.VB.CopyReferralLink,target_id:p.TB.GenericReferralPopup},link:q,onCopy:function(){return T(!0)},text:{initial:"Copy link ðŸ˜€",copied:"Copied ðŸ˜‰"}}),F("div",{className:"mt-7 flex items-center justify-center gap-3"},F("p",{className:"mr-1 text-text-tertiary typo-callout"},"Invite via"),F(U,{url:I,targetType:p.yK.GenericReferralPopup}))))}},34086:(e,r,t)=>{t.d(r,{U:()=>p});var n=t(98093),a=t(22155),i=t(53823),l=t(83448),o=t(43660),u=t(98235),s=t(61663),c=a.createElement;function p(e){var r,t,a,p,f=e.link,d=e.text,v=void 0===d?{}:d,m=e.onCopy,y=e.className,C=e.logProps,g=(0,u.L)((function(){return f})),k=(0,n.A)(g,2),h=k[0],b=k[1],x=(0,s.DX)().logEvent;return c(o.A,{className:y,name:"inviteURL",inputId:"inviteURL",label:"Your unique invite URL",type:"url",autoComplete:"off",value:f,fieldType:"tertiary",actionButton:c(i.$n,{size:l.Mp.Small,variant:l.Ak.Primary,onClick:function(){b(),x(C),m&&m()}},(a=null!==(r=null==v?void 0:v.initial)&&void 0!==r?r:"Copy link",p=null!==(t=null==v?void 0:v.copied)&&void 0!==t?t:"Copied",h?p:a)),readOnly:!0})}}}]);