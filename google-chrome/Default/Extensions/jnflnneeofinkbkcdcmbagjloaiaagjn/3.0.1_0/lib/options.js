var browser=browser||chrome;document.addEventListener("DOMContentLoaded",function(){document.getElementById("skipMyInventory").onchange=function(a){a.target.checked?document.getElementById("sellerName").style="display:block":document.getElementById("sellerName").style="display:none"};document.getElementById("sellerName").onfocus=function(){"seller name"==this.value&&(this.value="")};document.getElementById("sellerName").onblur=function(){""==this.value&&(this.value="seller name")}},!1);
function save_options(){var a=document.getElementById("key").value,b={};b.autoNavigate=document.getElementById("autoNavigate").checked;b.showTotals=document.getElementById("showTotals").checked;b.skipMyInventory=document.getElementById("skipMyInventory").checked;b.sellerName=document.getElementById("sellerName").value;"seller name"==b.sellerName&&(b.sellerName="");chrome.storage.sync.set({key:a},function(){var a=document.getElementById("status");a.textContent="Options saved.";setTimeout(function(){a.textContent=
""},750)});chrome.storage.sync.set({otherOpts:b},function(){showStatus("Options saved.")});b={};b.productKey=a;b.clientVersion=browser.runtime.getManifest().version;sendObjecttoHost("https://rebelsoftwarellc.com/service/validateuser",b)}
function sendObjecttoHost(a,b){var d=null,c=new XMLHttpRequest;c.open("PUT",a,!0);c.setRequestHeader("Content-Type","application/json");c.onreadystatechange=function(){4==c.readyState&&(c.responseText||200<=c.status)&&c.responseText&&(d=JSON.parse(c.responseText),d.error?(showStatus("Key Not Valid"),console.log("key not valid")):d.authorized&&userValid())};c.send(JSON.stringify(b))}function userValid(){browser.storage.sync.set({clickmap:null})}
function showStatus(a){var b=document.getElementById("status");b.textContent=a;setTimeout(function(){b.textContent=""},750)}
function restore_options(){chrome.storage.sync.get({key:""},function(a){document.getElementById("key").value=a.key});chrome.storage.sync.get({otherOpts:""},function(a){document.getElementById("autoNavigate").checked=a.otherOpts.autoNavigate;document.getElementById("showTotals").checked=a.otherOpts.showTotals;document.getElementById("skipMyInventory").checked=a.otherOpts.skipMyInventory;a.otherOpts.sellerName&&(document.getElementById("sellerName").value=a.otherOpts.sellerName);a.otherOpts.skipMyInventory&&
(document.getElementById("sellerName").style="display:block")})}document.addEventListener("DOMContentLoaded",restore_options);document.getElementById("save").addEventListener("click",save_options);
