"use strict";(()=>{var ct=Object.create;var Me=Object.defineProperty;var ut=Object.getOwnPropertyDescriptor;var gt=Object.getOwnPropertyNames;var mt=Object.getPrototypeOf,ht=Object.prototype.hasOwnProperty;var W=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports);var ft=(e,t,r,i)=>{if(t&&typeof t=="object"||typeof t=="function")for(let a of gt(t))!ht.call(e,a)&&a!==r&&Me(e,a,{get:()=>t[a],enumerable:!(i=ut(t,a))||i.enumerable});return e};var q=(e,t,r)=>(r=e!=null?ct(mt(e)):{},ft(t||!e||!e.__esModule?Me(r,"default",{value:e,enumerable:!0}):r,e));var Ie=W(($t,ge)=>{function ke(e,t){if(t&&t.documentElement)e=t,t=arguments[2];else if(!e||!e.documentElement)throw new Error("First argument to Readability constructor should be a document object.");if(t=t||{},this._doc=e,this._docJSDOMParser=this._doc.firstChild.__JSDOMParser__,this._articleTitle=null,this._articleByline=null,this._articleDir=null,this._articleSiteName=null,this._attempts=[],this._debug=!!t.debug,this._maxElemsToParse=t.maxElemsToParse||this.DEFAULT_MAX_ELEMS_TO_PARSE,this._nbTopCandidates=t.nbTopCandidates||this.DEFAULT_N_TOP_CANDIDATES,this._charThreshold=t.charThreshold||this.DEFAULT_CHAR_THRESHOLD,this._classesToPreserve=this.CLASSES_TO_PRESERVE.concat(t.classesToPreserve||[]),this._keepClasses=!!t.keepClasses,this._serializer=t.serializer||function(r){return r.innerHTML},this._disableJSONLD=!!t.disableJSONLD,this._allowedVideoRegex=t.allowedVideoRegex||this.REGEXPS.videos,this._flags=this.FLAG_STRIP_UNLIKELYS|this.FLAG_WEIGHT_CLASSES|this.FLAG_CLEAN_CONDITIONALLY,this._debug){let r=function(i){if(i.nodeType==i.TEXT_NODE)return`${i.nodeName} ("${i.textContent}")`;let a=Array.from(i.attributes||[],function(n){return`${n.name}="${n.value}"`}).join(" ");return`<${i.localName} ${a}>`};this.log=function(){if(typeof console<"u"){let a=Array.from(arguments,n=>n&&n.nodeType==this.ELEMENT_NODE?r(n):n);a.unshift("Reader: (Readability)"),console.log.apply(console,a)}else if(typeof dump<"u"){var i=Array.prototype.map.call(arguments,function(a){return a&&a.nodeName?r(a):a}).join(" ");dump("Reader: (Readability) "+i+`
`)}}}else this.log=function(){}}ke.prototype={FLAG_STRIP_UNLIKELYS:1,FLAG_WEIGHT_CLASSES:2,FLAG_CLEAN_CONDITIONALLY:4,ELEMENT_NODE:1,TEXT_NODE:3,DEFAULT_MAX_ELEMS_TO_PARSE:0,DEFAULT_N_TOP_CANDIDATES:5,DEFAULT_TAGS_TO_SCORE:"section,h2,h3,h4,h5,h6,p,td,pre".toUpperCase().split(","),DEFAULT_CHAR_THRESHOLD:500,REGEXPS:{unlikelyCandidates:/-ad-|ai2html|banner|breadcrumbs|combx|comment|community|cover-wrap|disqus|extra|footer|gdpr|header|legends|menu|related|remark|replies|rss|shoutbox|sidebar|skyscraper|social|sponsor|supplemental|ad-break|agegate|pagination|pager|popup|yom-remote/i,okMaybeItsACandidate:/and|article|body|column|content|main|shadow/i,positive:/article|body|content|entry|hentry|h-entry|main|page|pagination|post|text|blog|story/i,negative:/-ad-|hidden|^hid$| hid$| hid |^hid |banner|combx|comment|com-|contact|foot|footer|footnote|gdpr|masthead|media|meta|outbrain|promo|related|scroll|share|shoutbox|sidebar|skyscraper|sponsor|shopping|tags|tool|widget/i,extraneous:/print|archive|comment|discuss|e[\-]?mail|share|reply|all|login|sign|single|utility/i,byline:/byline|author|dateline|writtenby|p-author/i,replaceFonts:/<(\/?)font[^>]*>/gi,normalize:/\s{2,}/g,videos:/\/\/(www\.)?((dailymotion|youtube|youtube-nocookie|player\.vimeo|v\.qq)\.com|(archive|upload\.wikimedia)\.org|player\.twitch\.tv)/i,shareElements:/(\b|_)(share|sharedaddy)(\b|_)/i,nextLink:/(next|weiter|continue|>([^\|]|$)|»([^\|]|$))/i,prevLink:/(prev|earl|old|new|<|«)/i,tokenize:/\W+/g,whitespace:/^\s*$/,hasContent:/\S$/,hashUrl:/^#.+/,srcsetUrl:/(\S+)(\s+[\d.]+[xw])?(\s*(?:,|$))/g,b64DataUrl:/^data:\s*([^\s;,]+)\s*;\s*base64\s*,/i,commas:/\u002C|\u060C|\uFE50|\uFE10|\uFE11|\u2E41|\u2E34|\u2E32|\uFF0C/g,jsonLdArticleTypes:/^Article|AdvertiserContentArticle|NewsArticle|AnalysisNewsArticle|AskPublicNewsArticle|BackgroundNewsArticle|OpinionNewsArticle|ReportageNewsArticle|ReviewNewsArticle|Report|SatiricalArticle|ScholarlyArticle|MedicalScholarlyArticle|SocialMediaPosting|BlogPosting|LiveBlogPosting|DiscussionForumPosting|TechArticle|APIReference$/},UNLIKELY_ROLES:["menu","menubar","complementary","navigation","alert","alertdialog","dialog"],DIV_TO_P_ELEMS:new Set(["BLOCKQUOTE","DL","DIV","IMG","OL","P","PRE","TABLE","UL"]),ALTER_TO_DIV_EXCEPTIONS:["DIV","ARTICLE","SECTION","P"],PRESENTATIONAL_ATTRIBUTES:["align","background","bgcolor","border","cellpadding","cellspacing","frame","hspace","rules","style","valign","vspace"],DEPRECATED_SIZE_ATTRIBUTE_ELEMS:["TABLE","TH","TD","HR","PRE"],PHRASING_ELEMS:["ABBR","AUDIO","B","BDO","BR","BUTTON","CITE","CODE","DATA","DATALIST","DFN","EM","EMBED","I","IMG","INPUT","KBD","LABEL","MARK","MATH","METER","NOSCRIPT","OBJECT","OUTPUT","PROGRESS","Q","RUBY","SAMP","SCRIPT","SELECT","SMALL","SPAN","STRONG","SUB","SUP","TEXTAREA","TIME","VAR","WBR"],CLASSES_TO_PRESERVE:["page"],HTML_ESCAPE_MAP:{lt:"<",gt:">",amp:"&",quot:'"',apos:"'"},_postProcessContent:function(e){this._fixRelativeUris(e),this._simplifyNestedElements(e),this._keepClasses||this._cleanClasses(e)},_removeNodes:function(e,t){if(this._docJSDOMParser&&e._isLiveNodeList)throw new Error("Do not pass live node lists to _removeNodes");for(var r=e.length-1;r>=0;r--){var i=e[r],a=i.parentNode;a&&(!t||t.call(this,i,r,e))&&a.removeChild(i)}},_replaceNodeTags:function(e,t){if(this._docJSDOMParser&&e._isLiveNodeList)throw new Error("Do not pass live node lists to _replaceNodeTags");for(let r of e)this._setNodeTag(r,t)},_forEachNode:function(e,t){Array.prototype.forEach.call(e,t,this)},_findNode:function(e,t){return Array.prototype.find.call(e,t,this)},_someNode:function(e,t){return Array.prototype.some.call(e,t,this)},_everyNode:function(e,t){return Array.prototype.every.call(e,t,this)},_concatNodeLists:function(){var e=Array.prototype.slice,t=e.call(arguments),r=t.map(function(i){return e.call(i)});return Array.prototype.concat.apply([],r)},_getAllNodesWithTag:function(e,t){return e.querySelectorAll?e.querySelectorAll(t.join(",")):[].concat.apply([],t.map(function(r){var i=e.getElementsByTagName(r);return Array.isArray(i)?i:Array.from(i)}))},_cleanClasses:function(e){var t=this._classesToPreserve,r=(e.getAttribute("class")||"").split(/\s+/).filter(function(i){return t.indexOf(i)!=-1}).join(" ");for(r?e.setAttribute("class",r):e.removeAttribute("class"),e=e.firstElementChild;e;e=e.nextElementSibling)this._cleanClasses(e)},_fixRelativeUris:function(e){var t=this._doc.baseURI,r=this._doc.documentURI;function i(s){if(t==r&&s.charAt(0)=="#")return s;try{return new URL(s,t).href}catch{}return s}var a=this._getAllNodesWithTag(e,["a"]);this._forEachNode(a,function(s){var o=s.getAttribute("href");if(o)if(o.indexOf("javascript:")===0)if(s.childNodes.length===1&&s.childNodes[0].nodeType===this.TEXT_NODE){var l=this._doc.createTextNode(s.textContent);s.parentNode.replaceChild(l,s)}else{for(var u=this._doc.createElement("span");s.firstChild;)u.appendChild(s.firstChild);s.parentNode.replaceChild(u,s)}else s.setAttribute("href",i(o))});var n=this._getAllNodesWithTag(e,["img","picture","figure","video","audio","source"]);this._forEachNode(n,function(s){var o=s.getAttribute("src"),l=s.getAttribute("poster"),u=s.getAttribute("srcset");if(o&&s.setAttribute("src",i(o)),l&&s.setAttribute("poster",i(l)),u){var d=u.replace(this.REGEXPS.srcsetUrl,function(E,R,v,L){return i(R)+(v||"")+L});s.setAttribute("srcset",d)}})},_simplifyNestedElements:function(e){for(var t=e;t;){if(t.parentNode&&["DIV","SECTION"].includes(t.tagName)&&!(t.id&&t.id.startsWith("readability"))){if(this._isElementWithoutContent(t)){t=this._removeAndGetNext(t);continue}else if(this._hasSingleTagInsideElement(t,"DIV")||this._hasSingleTagInsideElement(t,"SECTION")){for(var r=t.children[0],i=0;i<t.attributes.length;i++)r.setAttribute(t.attributes[i].name,t.attributes[i].value);t.parentNode.replaceChild(r,t),t=r;continue}}t=this._getNextNode(t)}},_getArticleTitle:function(){var e=this._doc,t="",r="";try{t=r=e.title.trim(),typeof t!="string"&&(t=r=this._getInnerText(e.getElementsByTagName("title")[0]))}catch{}var i=!1;function a(d){return d.split(/\s+/).length}if(/ [\|\-\\\/>»] /.test(t))i=/ [\\\/>»] /.test(t),t=r.replace(/(.*)[\|\-\\\/>»] .*/gi,"$1"),a(t)<3&&(t=r.replace(/[^\|\-\\\/>»]*[\|\-\\\/>»](.*)/gi,"$1"));else if(t.indexOf(": ")!==-1){var n=this._concatNodeLists(e.getElementsByTagName("h1"),e.getElementsByTagName("h2")),s=t.trim(),o=this._someNode(n,function(d){return d.textContent.trim()===s});o||(t=r.substring(r.lastIndexOf(":")+1),a(t)<3?t=r.substring(r.indexOf(":")+1):a(r.substr(0,r.indexOf(":")))>5&&(t=r))}else if(t.length>150||t.length<15){var l=e.getElementsByTagName("h1");l.length===1&&(t=this._getInnerText(l[0]))}t=t.trim().replace(this.REGEXPS.normalize," ");var u=a(t);return u<=4&&(!i||u!=a(r.replace(/[\|\-\\\/>»]+/g,""))-1)&&(t=r),t},_prepDocument:function(){var e=this._doc;this._removeNodes(this._getAllNodesWithTag(e,["style"])),e.body&&this._replaceBrs(e.body),this._replaceNodeTags(this._getAllNodesWithTag(e,["font"]),"SPAN")},_nextNode:function(e){for(var t=e;t&&t.nodeType!=this.ELEMENT_NODE&&this.REGEXPS.whitespace.test(t.textContent);)t=t.nextSibling;return t},_replaceBrs:function(e){this._forEachNode(this._getAllNodesWithTag(e,["br"]),function(t){for(var r=t.nextSibling,i=!1;(r=this._nextNode(r))&&r.tagName=="BR";){i=!0;var a=r.nextSibling;r.parentNode.removeChild(r),r=a}if(i){var n=this._doc.createElement("p");for(t.parentNode.replaceChild(n,t),r=n.nextSibling;r;){if(r.tagName=="BR"){var s=this._nextNode(r.nextSibling);if(s&&s.tagName=="BR")break}if(!this._isPhrasingContent(r))break;var o=r.nextSibling;n.appendChild(r),r=o}for(;n.lastChild&&this._isWhitespace(n.lastChild);)n.removeChild(n.lastChild);n.parentNode.tagName==="P"&&this._setNodeTag(n.parentNode,"DIV")}})},_setNodeTag:function(e,t){if(this.log("_setNodeTag",e,t),this._docJSDOMParser)return e.localName=t.toLowerCase(),e.tagName=t.toUpperCase(),e;for(var r=e.ownerDocument.createElement(t);e.firstChild;)r.appendChild(e.firstChild);e.parentNode.replaceChild(r,e),e.readability&&(r.readability=e.readability);for(var i=0;i<e.attributes.length;i++)try{r.setAttribute(e.attributes[i].name,e.attributes[i].value)}catch{}return r},_prepArticle:function(e){this._cleanStyles(e),this._markDataTables(e),this._fixLazyImages(e),this._cleanConditionally(e,"form"),this._cleanConditionally(e,"fieldset"),this._clean(e,"object"),this._clean(e,"embed"),this._clean(e,"footer"),this._clean(e,"link"),this._clean(e,"aside");var t=this.DEFAULT_CHAR_THRESHOLD;this._forEachNode(e.children,function(r){this._cleanMatchedNodes(r,function(i,a){return this.REGEXPS.shareElements.test(a)&&i.textContent.length<t})}),this._clean(e,"iframe"),this._clean(e,"input"),this._clean(e,"textarea"),this._clean(e,"select"),this._clean(e,"button"),this._cleanHeaders(e),this._cleanConditionally(e,"table"),this._cleanConditionally(e,"ul"),this._cleanConditionally(e,"div"),this._replaceNodeTags(this._getAllNodesWithTag(e,["h1"]),"h2"),this._removeNodes(this._getAllNodesWithTag(e,["p"]),function(r){var i=r.getElementsByTagName("img").length,a=r.getElementsByTagName("embed").length,n=r.getElementsByTagName("object").length,s=r.getElementsByTagName("iframe").length,o=i+a+n+s;return o===0&&!this._getInnerText(r,!1)}),this._forEachNode(this._getAllNodesWithTag(e,["br"]),function(r){var i=this._nextNode(r.nextSibling);i&&i.tagName=="P"&&r.parentNode.removeChild(r)}),this._forEachNode(this._getAllNodesWithTag(e,["table"]),function(r){var i=this._hasSingleTagInsideElement(r,"TBODY")?r.firstElementChild:r;if(this._hasSingleTagInsideElement(i,"TR")){var a=i.firstElementChild;if(this._hasSingleTagInsideElement(a,"TD")){var n=a.firstElementChild;n=this._setNodeTag(n,this._everyNode(n.childNodes,this._isPhrasingContent)?"P":"DIV"),r.parentNode.replaceChild(n,r)}}})},_initializeNode:function(e){switch(e.readability={contentScore:0},e.tagName){case"DIV":e.readability.contentScore+=5;break;case"PRE":case"TD":case"BLOCKQUOTE":e.readability.contentScore+=3;break;case"ADDRESS":case"OL":case"UL":case"DL":case"DD":case"DT":case"LI":case"FORM":e.readability.contentScore-=3;break;case"H1":case"H2":case"H3":case"H4":case"H5":case"H6":case"TH":e.readability.contentScore-=5;break}e.readability.contentScore+=this._getClassWeight(e)},_removeAndGetNext:function(e){var t=this._getNextNode(e,!0);return e.parentNode.removeChild(e),t},_getNextNode:function(e,t){if(!t&&e.firstElementChild)return e.firstElementChild;if(e.nextElementSibling)return e.nextElementSibling;do e=e.parentNode;while(e&&!e.nextElementSibling);return e&&e.nextElementSibling},_textSimilarity:function(e,t){var r=e.toLowerCase().split(this.REGEXPS.tokenize).filter(Boolean),i=t.toLowerCase().split(this.REGEXPS.tokenize).filter(Boolean);if(!r.length||!i.length)return 0;var a=i.filter(s=>!r.includes(s)),n=a.join(" ").length/i.join(" ").length;return 1-n},_checkByline:function(e,t){if(this._articleByline)return!1;if(e.getAttribute!==void 0)var r=e.getAttribute("rel"),i=e.getAttribute("itemprop");return(r==="author"||i&&i.indexOf("author")!==-1||this.REGEXPS.byline.test(t))&&this._isValidByline(e.textContent)?(this._articleByline=e.textContent.trim(),!0):!1},_getNodeAncestors:function(e,t){t=t||0;for(var r=0,i=[];e.parentNode&&(i.push(e.parentNode),!(t&&++r===t));)e=e.parentNode;return i},_grabArticle:function(e){this.log("**** grabArticle ****");var t=this._doc,r=e!==null;if(e=e||this._doc.body,!e)return this.log("No body found in document. Abort."),null;for(var i=e.innerHTML;;){this.log("Starting grabArticle loop");var a=this._flagIsActive(this.FLAG_STRIP_UNLIKELYS),n=[],s=this._doc.documentElement;let Ce=!0;for(;s;){s.tagName==="HTML"&&(this._articleLang=s.getAttribute("lang"));var o=s.className+" "+s.id;if(!this._isProbablyVisible(s)){this.log("Removing hidden node - "+o),s=this._removeAndGetNext(s);continue}if(s.getAttribute("aria-modal")=="true"&&s.getAttribute("role")=="dialog"){s=this._removeAndGetNext(s);continue}if(this._checkByline(s,o)){s=this._removeAndGetNext(s);continue}if(Ce&&this._headerDuplicatesTitle(s)){this.log("Removing header: ",s.textContent.trim(),this._articleTitle.trim()),Ce=!1,s=this._removeAndGetNext(s);continue}if(a){if(this.REGEXPS.unlikelyCandidates.test(o)&&!this.REGEXPS.okMaybeItsACandidate.test(o)&&!this._hasAncestorTag(s,"table")&&!this._hasAncestorTag(s,"code")&&s.tagName!=="BODY"&&s.tagName!=="A"){this.log("Removing unlikely candidate - "+o),s=this._removeAndGetNext(s);continue}if(this.UNLIKELY_ROLES.includes(s.getAttribute("role"))){this.log("Removing content with role "+s.getAttribute("role")+" - "+o),s=this._removeAndGetNext(s);continue}}if((s.tagName==="DIV"||s.tagName==="SECTION"||s.tagName==="HEADER"||s.tagName==="H1"||s.tagName==="H2"||s.tagName==="H3"||s.tagName==="H4"||s.tagName==="H5"||s.tagName==="H6")&&this._isElementWithoutContent(s)){s=this._removeAndGetNext(s);continue}if(this.DEFAULT_TAGS_TO_SCORE.indexOf(s.tagName)!==-1&&n.push(s),s.tagName==="DIV"){for(var l=null,u=s.firstChild;u;){var d=u.nextSibling;if(this._isPhrasingContent(u))l!==null?l.appendChild(u):this._isWhitespace(u)||(l=t.createElement("p"),s.replaceChild(l,u),l.appendChild(u));else if(l!==null){for(;l.lastChild&&this._isWhitespace(l.lastChild);)l.removeChild(l.lastChild);l=null}u=d}if(this._hasSingleTagInsideElement(s,"P")&&this._getLinkDensity(s)<.25){var E=s.children[0];s.parentNode.replaceChild(E,s),s=E,n.push(s)}else this._hasChildBlockElement(s)||(s=this._setNodeTag(s,"P"),n.push(s))}s=this._getNextNode(s)}var R=[];this._forEachNode(n,function(O){if(!(!O.parentNode||typeof O.parentNode.tagName>"u")){var B=this._getInnerText(O);if(!(B.length<25)){var Le=this._getNodeAncestors(O,5);if(Le.length!==0){var Q=0;Q+=1,Q+=B.split(this.REGEXPS.commas).length,Q+=Math.min(Math.floor(B.length/100),3),this._forEachNode(Le,function(U,ce){if(!(!U.tagName||!U.parentNode||typeof U.parentNode.tagName>"u")){if(typeof U.readability>"u"&&(this._initializeNode(U),R.push(U)),ce===0)var ue=1;else ce===1?ue=2:ue=ce*3;U.readability.contentScore+=Q/ue}})}}}});for(var v=[],L=0,M=R.length;L<M;L+=1){var w=R[L],k=w.readability.contentScore*(1-this._getLinkDensity(w));w.readability.contentScore=k,this.log("Candidate:",w,"with score "+k);for(var I=0;I<this._nbTopCandidates;I++){var P=v[I];if(!P||k>P.readability.contentScore){v.splice(I,0,w),v.length>this._nbTopCandidates&&v.pop();break}}}var c=v[0]||null,m=!1,g;if(c===null||c.tagName==="BODY"){for(c=t.createElement("DIV"),m=!0;e.firstChild;)this.log("Moving child out:",e.firstChild),c.appendChild(e.firstChild);e.appendChild(c),this._initializeNode(c)}else if(c){for(var A=[],p=1;p<v.length;p++)v[p].readability.contentScore/c.readability.contentScore>=.75&&A.push(this._getNodeAncestors(v[p]));var x=3;if(A.length>=x)for(g=c.parentNode;g.tagName!=="BODY";){for(var N=0,h=0;h<A.length&&N<x;h++)N+=Number(A[h].includes(g));if(N>=x){c=g;break}g=g.parentNode}c.readability||this._initializeNode(c),g=c.parentNode;for(var T=c.readability.contentScore,y=T/3;g.tagName!=="BODY";){if(!g.readability){g=g.parentNode;continue}var D=g.readability.contentScore;if(D<y)break;if(D>T){c=g;break}T=g.readability.contentScore,g=g.parentNode}for(g=c.parentNode;g.tagName!="BODY"&&g.children.length==1;)c=g,g=c.parentNode;c.readability||this._initializeNode(c)}var _=t.createElement("DIV");r&&(_.id="readability-content");var C=Math.max(10,c.readability.contentScore*.2);g=c.parentNode;for(var F=g.children,J=0,Te=F.length;J<Te;J++){var b=F[J],V=!1;if(this.log("Looking at sibling node:",b,b.readability?"with score "+b.readability.contentScore:""),this.log("Sibling has score",b.readability?b.readability.contentScore:"Unknown"),b===c)V=!0;else{var Se=0;if(b.className===c.className&&c.className!==""&&(Se+=c.readability.contentScore*.2),b.readability&&b.readability.contentScore+Se>=C)V=!0;else if(b.nodeName==="P"){var we=this._getLinkDensity(b),Re=this._getInnerText(b),oe=Re.length;(oe>80&&we<.25||oe<80&&oe>0&&we===0&&Re.search(/\.( |$)/)!==-1)&&(V=!0)}}V&&(this.log("Appending node:",b),this.ALTER_TO_DIV_EXCEPTIONS.indexOf(b.nodeName)===-1&&(this.log("Altering sibling:",b,"to div."),b=this._setNodeTag(b,"DIV")),_.appendChild(b),F=g.children,J-=1,Te-=1)}if(this._debug&&this.log("Article content pre-prep: "+_.innerHTML),this._prepArticle(_),this._debug&&this.log("Article content post-prep: "+_.innerHTML),m)c.id="readability-page-1",c.className="page";else{var Z=t.createElement("DIV");for(Z.id="readability-page-1",Z.className="page";_.firstChild;)Z.appendChild(_.firstChild);_.appendChild(Z)}this._debug&&this.log("Article content after paging: "+_.innerHTML);var le=!0,X=this._getInnerText(_,!0).length;if(X<this._charThreshold)if(le=!1,e.innerHTML=i,this._flagIsActive(this.FLAG_STRIP_UNLIKELYS))this._removeFlag(this.FLAG_STRIP_UNLIKELYS),this._attempts.push({articleContent:_,textLength:X});else if(this._flagIsActive(this.FLAG_WEIGHT_CLASSES))this._removeFlag(this.FLAG_WEIGHT_CLASSES),this._attempts.push({articleContent:_,textLength:X});else if(this._flagIsActive(this.FLAG_CLEAN_CONDITIONALLY))this._removeFlag(this.FLAG_CLEAN_CONDITIONALLY),this._attempts.push({articleContent:_,textLength:X});else{if(this._attempts.push({articleContent:_,textLength:X}),this._attempts.sort(function(O,B){return B.textLength-O.textLength}),!this._attempts[0].textLength)return null;_=this._attempts[0].articleContent,le=!0}if(le){var lt=[g,c].concat(this._getNodeAncestors(g));return this._someNode(lt,function(O){if(!O.tagName)return!1;var B=O.getAttribute("dir");return B?(this._articleDir=B,!0):!1}),_}}},_isValidByline:function(e){return typeof e=="string"||e instanceof String?(e=e.trim(),e.length>0&&e.length<100):!1},_unescapeHtmlEntities:function(e){if(!e)return e;var t=this.HTML_ESCAPE_MAP;return e.replace(/&(quot|amp|apos|lt|gt);/g,function(r,i){return t[i]}).replace(/&#(?:x([0-9a-z]{1,4})|([0-9]{1,4}));/gi,function(r,i,a){var n=parseInt(i||a,i?16:10);return String.fromCharCode(n)})},_getJSONLD:function(e){var t=this._getAllNodesWithTag(e,["script"]),r;return this._forEachNode(t,function(i){if(!r&&i.getAttribute("type")==="application/ld+json")try{var a=i.textContent.replace(/^\s*<!\[CDATA\[|\]\]>\s*$/g,""),n=JSON.parse(a);if(!n["@context"]||!n["@context"].match(/^https?\:\/\/schema\.org$/)||(!n["@type"]&&Array.isArray(n["@graph"])&&(n=n["@graph"].find(function(u){return(u["@type"]||"").match(this.REGEXPS.jsonLdArticleTypes)})),!n||!n["@type"]||!n["@type"].match(this.REGEXPS.jsonLdArticleTypes)))return;if(r={},typeof n.name=="string"&&typeof n.headline=="string"&&n.name!==n.headline){var s=this._getArticleTitle(),o=this._textSimilarity(n.name,s)>.75,l=this._textSimilarity(n.headline,s)>.75;l&&!o?r.title=n.headline:r.title=n.name}else typeof n.name=="string"?r.title=n.name.trim():typeof n.headline=="string"&&(r.title=n.headline.trim());n.author&&(typeof n.author.name=="string"?r.byline=n.author.name.trim():Array.isArray(n.author)&&n.author[0]&&typeof n.author[0].name=="string"&&(r.byline=n.author.filter(function(u){return u&&typeof u.name=="string"}).map(function(u){return u.name.trim()}).join(", "))),typeof n.description=="string"&&(r.excerpt=n.description.trim()),n.publisher&&typeof n.publisher.name=="string"&&(r.siteName=n.publisher.name.trim()),typeof n.datePublished=="string"&&(r.datePublished=n.datePublished.trim());return}catch(u){this.log(u.message)}}),r||{}},_getArticleMetadata:function(e){var t={},r={},i=this._doc.getElementsByTagName("meta"),a=/\s*(article|dc|dcterm|og|twitter)\s*:\s*(author|creator|description|published_time|title|site_name)\s*/gi,n=/^\s*(?:(dc|dcterm|og|twitter|weibo:(article|webpage))\s*[\.:]\s*)?(author|creator|description|title|site_name)\s*$/i;return this._forEachNode(i,function(s){var o=s.getAttribute("name"),l=s.getAttribute("property"),u=s.getAttribute("content");if(u){var d=null,E=null;l&&(d=l.match(a),d&&(E=d[0].toLowerCase().replace(/\s/g,""),r[E]=u.trim())),!d&&o&&n.test(o)&&(E=o,u&&(E=E.toLowerCase().replace(/\s/g,"").replace(/\./g,":"),r[E]=u.trim()))}}),t.title=e.title||r["dc:title"]||r["dcterm:title"]||r["og:title"]||r["weibo:article:title"]||r["weibo:webpage:title"]||r.title||r["twitter:title"],t.title||(t.title=this._getArticleTitle()),t.byline=e.byline||r["dc:creator"]||r["dcterm:creator"]||r.author,t.excerpt=e.excerpt||r["dc:description"]||r["dcterm:description"]||r["og:description"]||r["weibo:article:description"]||r["weibo:webpage:description"]||r.description||r["twitter:description"],t.siteName=e.siteName||r["og:site_name"],t.publishedTime=e.datePublished||r["article:published_time"]||null,t.title=this._unescapeHtmlEntities(t.title),t.byline=this._unescapeHtmlEntities(t.byline),t.excerpt=this._unescapeHtmlEntities(t.excerpt),t.siteName=this._unescapeHtmlEntities(t.siteName),t.publishedTime=this._unescapeHtmlEntities(t.publishedTime),t},_isSingleImage:function(e){return e.tagName==="IMG"?!0:e.children.length!==1||e.textContent.trim()!==""?!1:this._isSingleImage(e.children[0])},_unwrapNoscriptImages:function(e){var t=Array.from(e.getElementsByTagName("img"));this._forEachNode(t,function(i){for(var a=0;a<i.attributes.length;a++){var n=i.attributes[a];switch(n.name){case"src":case"srcset":case"data-src":case"data-srcset":return}if(/\.(jpg|jpeg|png|webp)/i.test(n.value))return}i.parentNode.removeChild(i)});var r=Array.from(e.getElementsByTagName("noscript"));this._forEachNode(r,function(i){var a=e.createElement("div");if(a.innerHTML=i.innerHTML,!!this._isSingleImage(a)){var n=i.previousElementSibling;if(n&&this._isSingleImage(n)){var s=n;s.tagName!=="IMG"&&(s=n.getElementsByTagName("img")[0]);for(var o=a.getElementsByTagName("img")[0],l=0;l<s.attributes.length;l++){var u=s.attributes[l];if(u.value!==""&&(u.name==="src"||u.name==="srcset"||/\.(jpg|jpeg|png|webp)/i.test(u.value))){if(o.getAttribute(u.name)===u.value)continue;var d=u.name;o.hasAttribute(d)&&(d="data-old-"+d),o.setAttribute(d,u.value)}}i.parentNode.replaceChild(a.firstElementChild,n)}}})},_removeScripts:function(e){this._removeNodes(this._getAllNodesWithTag(e,["script","noscript"]))},_hasSingleTagInsideElement:function(e,t){return e.children.length!=1||e.children[0].tagName!==t?!1:!this._someNode(e.childNodes,function(r){return r.nodeType===this.TEXT_NODE&&this.REGEXPS.hasContent.test(r.textContent)})},_isElementWithoutContent:function(e){return e.nodeType===this.ELEMENT_NODE&&e.textContent.trim().length==0&&(e.children.length==0||e.children.length==e.getElementsByTagName("br").length+e.getElementsByTagName("hr").length)},_hasChildBlockElement:function(e){return this._someNode(e.childNodes,function(t){return this.DIV_TO_P_ELEMS.has(t.tagName)||this._hasChildBlockElement(t)})},_isPhrasingContent:function(e){return e.nodeType===this.TEXT_NODE||this.PHRASING_ELEMS.indexOf(e.tagName)!==-1||(e.tagName==="A"||e.tagName==="DEL"||e.tagName==="INS")&&this._everyNode(e.childNodes,this._isPhrasingContent)},_isWhitespace:function(e){return e.nodeType===this.TEXT_NODE&&e.textContent.trim().length===0||e.nodeType===this.ELEMENT_NODE&&e.tagName==="BR"},_getInnerText:function(e,t){t=typeof t>"u"?!0:t;var r=e.textContent.trim();return t?r.replace(this.REGEXPS.normalize," "):r},_getCharCount:function(e,t){return t=t||",",this._getInnerText(e).split(t).length-1},_cleanStyles:function(e){if(!(!e||e.tagName.toLowerCase()==="svg")){for(var t=0;t<this.PRESENTATIONAL_ATTRIBUTES.length;t++)e.removeAttribute(this.PRESENTATIONAL_ATTRIBUTES[t]);this.DEPRECATED_SIZE_ATTRIBUTE_ELEMS.indexOf(e.tagName)!==-1&&(e.removeAttribute("width"),e.removeAttribute("height"));for(var r=e.firstElementChild;r!==null;)this._cleanStyles(r),r=r.nextElementSibling}},_getLinkDensity:function(e){var t=this._getInnerText(e).length;if(t===0)return 0;var r=0;return this._forEachNode(e.getElementsByTagName("a"),function(i){var a=i.getAttribute("href"),n=a&&this.REGEXPS.hashUrl.test(a)?.3:1;r+=this._getInnerText(i).length*n}),r/t},_getClassWeight:function(e){if(!this._flagIsActive(this.FLAG_WEIGHT_CLASSES))return 0;var t=0;return typeof e.className=="string"&&e.className!==""&&(this.REGEXPS.negative.test(e.className)&&(t-=25),this.REGEXPS.positive.test(e.className)&&(t+=25)),typeof e.id=="string"&&e.id!==""&&(this.REGEXPS.negative.test(e.id)&&(t-=25),this.REGEXPS.positive.test(e.id)&&(t+=25)),t},_clean:function(e,t){var r=["object","embed","iframe"].indexOf(t)!==-1;this._removeNodes(this._getAllNodesWithTag(e,[t]),function(i){if(r){for(var a=0;a<i.attributes.length;a++)if(this._allowedVideoRegex.test(i.attributes[a].value))return!1;if(i.tagName==="object"&&this._allowedVideoRegex.test(i.innerHTML))return!1}return!0})},_hasAncestorTag:function(e,t,r,i){r=r||3,t=t.toUpperCase();for(var a=0;e.parentNode;){if(r>0&&a>r)return!1;if(e.parentNode.tagName===t&&(!i||i(e.parentNode)))return!0;e=e.parentNode,a++}return!1},_getRowAndColumnCount:function(e){for(var t=0,r=0,i=e.getElementsByTagName("tr"),a=0;a<i.length;a++){var n=i[a].getAttribute("rowspan")||0;n&&(n=parseInt(n,10)),t+=n||1;for(var s=0,o=i[a].getElementsByTagName("td"),l=0;l<o.length;l++){var u=o[l].getAttribute("colspan")||0;u&&(u=parseInt(u,10)),s+=u||1}r=Math.max(r,s)}return{rows:t,columns:r}},_markDataTables:function(e){for(var t=e.getElementsByTagName("table"),r=0;r<t.length;r++){var i=t[r],a=i.getAttribute("role");if(a=="presentation"){i._readabilityDataTable=!1;continue}var n=i.getAttribute("datatable");if(n=="0"){i._readabilityDataTable=!1;continue}var s=i.getAttribute("summary");if(s){i._readabilityDataTable=!0;continue}var o=i.getElementsByTagName("caption")[0];if(o&&o.childNodes.length>0){i._readabilityDataTable=!0;continue}var l=["col","colgroup","tfoot","thead","th"],u=function(E){return!!i.getElementsByTagName(E)[0]};if(l.some(u)){this.log("Data table because found data-y descendant"),i._readabilityDataTable=!0;continue}if(i.getElementsByTagName("table")[0]){i._readabilityDataTable=!1;continue}var d=this._getRowAndColumnCount(i);if(d.rows>=10||d.columns>4){i._readabilityDataTable=!0;continue}i._readabilityDataTable=d.rows*d.columns>10}},_fixLazyImages:function(e){this._forEachNode(this._getAllNodesWithTag(e,["img","picture","figure"]),function(t){if(t.src&&this.REGEXPS.b64DataUrl.test(t.src)){var r=this.REGEXPS.b64DataUrl.exec(t.src);if(r[1]==="image/svg+xml")return;for(var i=!1,a=0;a<t.attributes.length;a++){var n=t.attributes[a];if(n.name!=="src"&&/\.(jpg|jpeg|png|webp)/i.test(n.value)){i=!0;break}}if(i){var s=t.src.search(/base64\s*/i)+7,o=t.src.length-s;o<133&&t.removeAttribute("src")}}if(!((t.src||t.srcset&&t.srcset!="null")&&t.className.toLowerCase().indexOf("lazy")===-1)){for(var l=0;l<t.attributes.length;l++)if(n=t.attributes[l],!(n.name==="src"||n.name==="srcset"||n.name==="alt")){var u=null;if(/\.(jpg|jpeg|png|webp)\s+\d/.test(n.value)?u="srcset":/^\s*\S+\.(jpg|jpeg|png|webp)\S*\s*$/.test(n.value)&&(u="src"),u){if(t.tagName==="IMG"||t.tagName==="PICTURE")t.setAttribute(u,n.value);else if(t.tagName==="FIGURE"&&!this._getAllNodesWithTag(t,["img","picture"]).length){var d=this._doc.createElement("img");d.setAttribute(u,n.value),t.appendChild(d)}}}}})},_getTextDensity:function(e,t){var r=this._getInnerText(e,!0).length;if(r===0)return 0;var i=0,a=this._getAllNodesWithTag(e,t);return this._forEachNode(a,n=>i+=this._getInnerText(n,!0).length),i/r},_cleanConditionally:function(e,t){this._flagIsActive(this.FLAG_CLEAN_CONDITIONALLY)&&this._removeNodes(this._getAllNodesWithTag(e,[t]),function(r){var i=function(g){return g._readabilityDataTable},a=t==="ul"||t==="ol";if(!a){var n=0,s=this._getAllNodesWithTag(r,["ul","ol"]);this._forEachNode(s,g=>n+=this._getInnerText(g).length),a=n/this._getInnerText(r).length>.9}if(t==="table"&&i(r)||this._hasAncestorTag(r,"table",-1,i)||this._hasAncestorTag(r,"code"))return!1;var o=this._getClassWeight(r);this.log("Cleaning Conditionally",r);var l=0;if(o+l<0)return!0;if(this._getCharCount(r,",")<10){for(var u=r.getElementsByTagName("p").length,d=r.getElementsByTagName("img").length,E=r.getElementsByTagName("li").length-100,R=r.getElementsByTagName("input").length,v=this._getTextDensity(r,["h1","h2","h3","h4","h5","h6"]),L=0,M=this._getAllNodesWithTag(r,["object","embed","iframe"]),w=0;w<M.length;w++){for(var k=0;k<M[w].attributes.length;k++)if(this._allowedVideoRegex.test(M[w].attributes[k].value))return!1;if(M[w].tagName==="object"&&this._allowedVideoRegex.test(M[w].innerHTML))return!1;L++}var I=this._getLinkDensity(r),P=this._getInnerText(r).length,c=d>1&&u/d<.5&&!this._hasAncestorTag(r,"figure")||!a&&E>u||R>Math.floor(u/3)||!a&&v<.9&&P<25&&(d===0||d>2)&&!this._hasAncestorTag(r,"figure")||!a&&o<25&&I>.2||o>=25&&I>.5||L===1&&P<75||L>1;if(a&&c){for(var m=0;m<r.children.length;m++)if(r.children[m].children.length>1)return c;let g=r.getElementsByTagName("li").length;if(d==g)return!1}return c}return!1})},_cleanMatchedNodes:function(e,t){for(var r=this._getNextNode(e,!0),i=this._getNextNode(e);i&&i!=r;)t.call(this,i,i.className+" "+i.id)?i=this._removeAndGetNext(i):i=this._getNextNode(i)},_cleanHeaders:function(e){let t=this._getAllNodesWithTag(e,["h1","h2"]);this._removeNodes(t,function(r){let i=this._getClassWeight(r)<0;return i&&this.log("Removing header with low class weight:",r),i})},_headerDuplicatesTitle:function(e){if(e.tagName!="H1"&&e.tagName!="H2")return!1;var t=this._getInnerText(e,!1);return this.log("Evaluating similarity of header:",t,this._articleTitle),this._textSimilarity(this._articleTitle,t)>.75},_flagIsActive:function(e){return(this._flags&e)>0},_removeFlag:function(e){this._flags=this._flags&~e},_isProbablyVisible:function(e){return(!e.style||e.style.display!="none")&&(!e.style||e.style.visibility!="hidden")&&!e.hasAttribute("hidden")&&(!e.hasAttribute("aria-hidden")||e.getAttribute("aria-hidden")!="true"||e.className&&e.className.indexOf&&e.className.indexOf("fallback-image")!==-1)},parse:function(){if(this._maxElemsToParse>0){var e=this._doc.getElementsByTagName("*").length;if(e>this._maxElemsToParse)throw new Error("Aborting parsing document; "+e+" elements found")}this._unwrapNoscriptImages(this._doc);var t=this._disableJSONLD?{}:this._getJSONLD(this._doc);this._removeScripts(this._doc),this._prepDocument();var r=this._getArticleMetadata(t);this._articleTitle=r.title;var i=this._grabArticle();if(!i)return null;if(this.log("Grabbed: "+i.innerHTML),this._postProcessContent(i),!r.excerpt){var a=i.getElementsByTagName("p");a.length>0&&(r.excerpt=a[0].textContent.trim())}var n=i.textContent;return{title:this._articleTitle,byline:r.byline||this._articleByline,dir:this._articleDir,lang:this._articleLang,content:this._serializer(i),textContent:n,length:n.length,excerpt:r.excerpt,siteName:r.siteName||this._articleSiteName,publishedTime:r.publishedTime}}};typeof ge=="object"&&(ge.exports=ke)});var De=W((Wt,me)=>{var Pe={unlikelyCandidates:/-ad-|ai2html|banner|breadcrumbs|combx|comment|community|cover-wrap|disqus|extra|footer|gdpr|header|legends|menu|related|remark|replies|rss|shoutbox|sidebar|skyscraper|social|sponsor|supplemental|ad-break|agegate|pagination|pager|popup|yom-remote/i,okMaybeItsACandidate:/and|article|body|column|content|main|shadow/i};function dt(e){return(!e.style||e.style.display!="none")&&!e.hasAttribute("hidden")&&(!e.hasAttribute("aria-hidden")||e.getAttribute("aria-hidden")!="true"||e.className&&e.className.indexOf&&e.className.indexOf("fallback-image")!==-1)}function At(e,t={}){typeof t=="function"&&(t={visibilityChecker:t});var r={minScore:20,minContentLength:140,visibilityChecker:dt};t=Object.assign(r,t);var i=e.querySelectorAll("p, pre, article"),a=e.querySelectorAll("div > br");if(a.length){var n=new Set(i);[].forEach.call(a,function(o){n.add(o.parentNode)}),i=Array.from(n)}var s=0;return[].some.call(i,function(o){if(!t.visibilityChecker(o))return!1;var l=o.className+" "+o.id;if(Pe.unlikelyCandidates.test(l)&&!Pe.okMaybeItsACandidate.test(l)||o.matches("li p"))return!1;var u=o.textContent.trim().length;return u<t.minContentLength?!1:(s+=Math.sqrt(u-t.minContentLength),s>t.minScore)})}typeof me=="object"&&(me.exports=At)});var Be=W((jt,Oe)=>{var pt=Ie(),_t=De();Oe.exports={Readability:pt,isProbablyReaderable:_t}});var ee=W((he,Ge)=>{(function(e,t){if(typeof define=="function"&&define.amd)define("webextension-polyfill",["module"],t);else if(typeof he<"u")t(Ge);else{var r={exports:{}};t(r),e.browser=r.exports}})(typeof globalThis<"u"?globalThis:typeof self<"u"?self:he,function(e){"use strict";if(!(globalThis.chrome&&globalThis.chrome.runtime&&globalThis.chrome.runtime.id))throw new Error("This script should only be loaded in a browser extension.");if(globalThis.browser&&globalThis.browser.runtime&&globalThis.browser.runtime.id)e.exports=globalThis.browser;else{let t="The message port closed before a response was received.",r=i=>{let a={alarms:{clear:{minArgs:0,maxArgs:1},clearAll:{minArgs:0,maxArgs:0},get:{minArgs:0,maxArgs:1},getAll:{minArgs:0,maxArgs:0}},bookmarks:{create:{minArgs:1,maxArgs:1},get:{minArgs:1,maxArgs:1},getChildren:{minArgs:1,maxArgs:1},getRecent:{minArgs:1,maxArgs:1},getSubTree:{minArgs:1,maxArgs:1},getTree:{minArgs:0,maxArgs:0},move:{minArgs:2,maxArgs:2},remove:{minArgs:1,maxArgs:1},removeTree:{minArgs:1,maxArgs:1},search:{minArgs:1,maxArgs:1},update:{minArgs:2,maxArgs:2}},browserAction:{disable:{minArgs:0,maxArgs:1,fallbackToNoCallback:!0},enable:{minArgs:0,maxArgs:1,fallbackToNoCallback:!0},getBadgeBackgroundColor:{minArgs:1,maxArgs:1},getBadgeText:{minArgs:1,maxArgs:1},getPopup:{minArgs:1,maxArgs:1},getTitle:{minArgs:1,maxArgs:1},openPopup:{minArgs:0,maxArgs:0},setBadgeBackgroundColor:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setBadgeText:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setIcon:{minArgs:1,maxArgs:1},setPopup:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setTitle:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0}},browsingData:{remove:{minArgs:2,maxArgs:2},removeCache:{minArgs:1,maxArgs:1},removeCookies:{minArgs:1,maxArgs:1},removeDownloads:{minArgs:1,maxArgs:1},removeFormData:{minArgs:1,maxArgs:1},removeHistory:{minArgs:1,maxArgs:1},removeLocalStorage:{minArgs:1,maxArgs:1},removePasswords:{minArgs:1,maxArgs:1},removePluginData:{minArgs:1,maxArgs:1},settings:{minArgs:0,maxArgs:0}},commands:{getAll:{minArgs:0,maxArgs:0}},contextMenus:{remove:{minArgs:1,maxArgs:1},removeAll:{minArgs:0,maxArgs:0},update:{minArgs:2,maxArgs:2}},cookies:{get:{minArgs:1,maxArgs:1},getAll:{minArgs:1,maxArgs:1},getAllCookieStores:{minArgs:0,maxArgs:0},remove:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}},devtools:{inspectedWindow:{eval:{minArgs:1,maxArgs:2,singleCallbackArg:!1}},panels:{create:{minArgs:3,maxArgs:3,singleCallbackArg:!0},elements:{createSidebarPane:{minArgs:1,maxArgs:1}}}},downloads:{cancel:{minArgs:1,maxArgs:1},download:{minArgs:1,maxArgs:1},erase:{minArgs:1,maxArgs:1},getFileIcon:{minArgs:1,maxArgs:2},open:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},pause:{minArgs:1,maxArgs:1},removeFile:{minArgs:1,maxArgs:1},resume:{minArgs:1,maxArgs:1},search:{minArgs:1,maxArgs:1},show:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0}},extension:{isAllowedFileSchemeAccess:{minArgs:0,maxArgs:0},isAllowedIncognitoAccess:{minArgs:0,maxArgs:0}},history:{addUrl:{minArgs:1,maxArgs:1},deleteAll:{minArgs:0,maxArgs:0},deleteRange:{minArgs:1,maxArgs:1},deleteUrl:{minArgs:1,maxArgs:1},getVisits:{minArgs:1,maxArgs:1},search:{minArgs:1,maxArgs:1}},i18n:{detectLanguage:{minArgs:1,maxArgs:1},getAcceptLanguages:{minArgs:0,maxArgs:0}},identity:{launchWebAuthFlow:{minArgs:1,maxArgs:1}},idle:{queryState:{minArgs:1,maxArgs:1}},management:{get:{minArgs:1,maxArgs:1},getAll:{minArgs:0,maxArgs:0},getSelf:{minArgs:0,maxArgs:0},setEnabled:{minArgs:2,maxArgs:2},uninstallSelf:{minArgs:0,maxArgs:1}},notifications:{clear:{minArgs:1,maxArgs:1},create:{minArgs:1,maxArgs:2},getAll:{minArgs:0,maxArgs:0},getPermissionLevel:{minArgs:0,maxArgs:0},update:{minArgs:2,maxArgs:2}},pageAction:{getPopup:{minArgs:1,maxArgs:1},getTitle:{minArgs:1,maxArgs:1},hide:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setIcon:{minArgs:1,maxArgs:1},setPopup:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setTitle:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},show:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0}},permissions:{contains:{minArgs:1,maxArgs:1},getAll:{minArgs:0,maxArgs:0},remove:{minArgs:1,maxArgs:1},request:{minArgs:1,maxArgs:1}},runtime:{getBackgroundPage:{minArgs:0,maxArgs:0},getPlatformInfo:{minArgs:0,maxArgs:0},openOptionsPage:{minArgs:0,maxArgs:0},requestUpdateCheck:{minArgs:0,maxArgs:0},sendMessage:{minArgs:1,maxArgs:3},sendNativeMessage:{minArgs:2,maxArgs:2},setUninstallURL:{minArgs:1,maxArgs:1}},sessions:{getDevices:{minArgs:0,maxArgs:1},getRecentlyClosed:{minArgs:0,maxArgs:1},restore:{minArgs:0,maxArgs:1}},storage:{local:{clear:{minArgs:0,maxArgs:0},get:{minArgs:0,maxArgs:1},getBytesInUse:{minArgs:0,maxArgs:1},remove:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}},managed:{get:{minArgs:0,maxArgs:1},getBytesInUse:{minArgs:0,maxArgs:1}},sync:{clear:{minArgs:0,maxArgs:0},get:{minArgs:0,maxArgs:1},getBytesInUse:{minArgs:0,maxArgs:1},remove:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}}},tabs:{captureVisibleTab:{minArgs:0,maxArgs:2},create:{minArgs:1,maxArgs:1},detectLanguage:{minArgs:0,maxArgs:1},discard:{minArgs:0,maxArgs:1},duplicate:{minArgs:1,maxArgs:1},executeScript:{minArgs:1,maxArgs:2},get:{minArgs:1,maxArgs:1},getCurrent:{minArgs:0,maxArgs:0},getZoom:{minArgs:0,maxArgs:1},getZoomSettings:{minArgs:0,maxArgs:1},goBack:{minArgs:0,maxArgs:1},goForward:{minArgs:0,maxArgs:1},highlight:{minArgs:1,maxArgs:1},insertCSS:{minArgs:1,maxArgs:2},move:{minArgs:2,maxArgs:2},query:{minArgs:1,maxArgs:1},reload:{minArgs:0,maxArgs:2},remove:{minArgs:1,maxArgs:1},removeCSS:{minArgs:1,maxArgs:2},sendMessage:{minArgs:2,maxArgs:3},setZoom:{minArgs:1,maxArgs:2},setZoomSettings:{minArgs:1,maxArgs:2},update:{minArgs:1,maxArgs:2}},topSites:{get:{minArgs:0,maxArgs:0}},webNavigation:{getAllFrames:{minArgs:1,maxArgs:1},getFrame:{minArgs:1,maxArgs:1}},webRequest:{handlerBehaviorChanged:{minArgs:0,maxArgs:0}},windows:{create:{minArgs:0,maxArgs:1},get:{minArgs:1,maxArgs:2},getAll:{minArgs:0,maxArgs:1},getCurrent:{minArgs:0,maxArgs:1},getLastFocused:{minArgs:0,maxArgs:1},remove:{minArgs:1,maxArgs:1},update:{minArgs:2,maxArgs:2}}};if(Object.keys(a).length===0)throw new Error("api-metadata.json has not been included in browser-polyfill");class n extends WeakMap{constructor(m,g=void 0){super(g),this.createItem=m}get(m){return this.has(m)||this.set(m,this.createItem(m)),super.get(m)}}let s=c=>c&&typeof c=="object"&&typeof c.then=="function",o=(c,m)=>(...g)=>{i.runtime.lastError?c.reject(new Error(i.runtime.lastError.message)):m.singleCallbackArg||g.length<=1&&m.singleCallbackArg!==!1?c.resolve(g[0]):c.resolve(g)},l=c=>c==1?"argument":"arguments",u=(c,m)=>function(A,...p){if(p.length<m.minArgs)throw new Error(`Expected at least ${m.minArgs} ${l(m.minArgs)} for ${c}(), got ${p.length}`);if(p.length>m.maxArgs)throw new Error(`Expected at most ${m.maxArgs} ${l(m.maxArgs)} for ${c}(), got ${p.length}`);return new Promise((x,N)=>{if(m.fallbackToNoCallback)try{A[c](...p,o({resolve:x,reject:N},m))}catch(h){console.warn(`${c} API method doesn't seem to support the callback parameter, falling back to call it without a callback: `,h),A[c](...p),m.fallbackToNoCallback=!1,m.noCallback=!0,x()}else m.noCallback?(A[c](...p),x()):A[c](...p,o({resolve:x,reject:N},m))})},d=(c,m,g)=>new Proxy(m,{apply(A,p,x){return g.call(p,c,...x)}}),E=Function.call.bind(Object.prototype.hasOwnProperty),R=(c,m={},g={})=>{let A=Object.create(null),p={has(N,h){return h in c||h in A},get(N,h,T){if(h in A)return A[h];if(!(h in c))return;let y=c[h];if(typeof y=="function")if(typeof m[h]=="function")y=d(c,c[h],m[h]);else if(E(g,h)){let D=u(h,g[h]);y=d(c,c[h],D)}else y=y.bind(c);else if(typeof y=="object"&&y!==null&&(E(m,h)||E(g,h)))y=R(y,m[h],g[h]);else if(E(g,"*"))y=R(y,m[h],g["*"]);else return Object.defineProperty(A,h,{configurable:!0,enumerable:!0,get(){return c[h]},set(D){c[h]=D}}),y;return A[h]=y,y},set(N,h,T,y){return h in A?A[h]=T:c[h]=T,!0},defineProperty(N,h,T){return Reflect.defineProperty(A,h,T)},deleteProperty(N,h){return Reflect.deleteProperty(A,h)}},x=Object.create(c);return new Proxy(x,p)},v=c=>({addListener(m,g,...A){m.addListener(c.get(g),...A)},hasListener(m,g){return m.hasListener(c.get(g))},removeListener(m,g){m.removeListener(c.get(g))}}),L=new n(c=>typeof c!="function"?c:function(g){let A=R(g,{},{getContent:{minArgs:0,maxArgs:0}});c(A)}),M=new n(c=>typeof c!="function"?c:function(g,A,p){let x=!1,N,h=new Promise(_=>{N=function(C){x=!0,_(C)}}),T;try{T=c(g,A,N)}catch(_){T=Promise.reject(_)}let y=T!==!0&&s(T);if(T!==!0&&!y&&!x)return!1;let D=_=>{_.then(C=>{p(C)},C=>{let F;C&&(C instanceof Error||typeof C.message=="string")?F=C.message:F="An unexpected error occurred",p({__mozWebExtensionPolyfillReject__:!0,message:F})}).catch(C=>{console.error("Failed to send onMessage rejected reply",C)})};return D(y?T:h),!0}),w=({reject:c,resolve:m},g)=>{i.runtime.lastError?i.runtime.lastError.message===t?m():c(new Error(i.runtime.lastError.message)):g&&g.__mozWebExtensionPolyfillReject__?c(new Error(g.message)):m(g)},k=(c,m,g,...A)=>{if(A.length<m.minArgs)throw new Error(`Expected at least ${m.minArgs} ${l(m.minArgs)} for ${c}(), got ${A.length}`);if(A.length>m.maxArgs)throw new Error(`Expected at most ${m.maxArgs} ${l(m.maxArgs)} for ${c}(), got ${A.length}`);return new Promise((p,x)=>{let N=w.bind(null,{resolve:p,reject:x});A.push(N),g.sendMessage(...A)})},I={devtools:{network:{onRequestFinished:v(L)}},runtime:{onMessage:v(M),onMessageExternal:v(M),sendMessage:k.bind(null,"sendMessage",{minArgs:1,maxArgs:3})},tabs:{sendMessage:k.bind(null,"sendMessage",{minArgs:2,maxArgs:3})}},P={clear:{minArgs:1,maxArgs:1},get:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}};return a.privacy={network:{"*":P},services:{"*":P},websites:{"*":P}},R(i,I,a)};e.exports=r(chrome)}})});var Ke=W(f=>{"use strict";var Y=Symbol.for("react.element"),yt=Symbol.for("react.portal"),Et=Symbol.for("react.fragment"),bt=Symbol.for("react.strict_mode"),xt=Symbol.for("react.profiler"),vt=Symbol.for("react.provider"),Nt=Symbol.for("react.context"),Tt=Symbol.for("react.forward_ref"),St=Symbol.for("react.suspense"),wt=Symbol.for("react.memo"),Rt=Symbol.for("react.lazy"),Fe=Symbol.iterator;function Ct(e){return e===null||typeof e!="object"?null:(e=Fe&&e[Fe]||e["@@iterator"],typeof e=="function"?e:null)}var We={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},je=Object.assign,ze={};function j(e,t,r){this.props=e,this.context=t,this.refs=ze,this.updater=r||We}j.prototype.isReactComponent={};j.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};j.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function Ve(){}Ve.prototype=j.prototype;function de(e,t,r){this.props=e,this.context=t,this.refs=ze,this.updater=r||We}var Ae=de.prototype=new Ve;Ae.constructor=de;je(Ae,j.prototype);Ae.isPureReactComponent=!0;var Ue=Array.isArray,Xe=Object.prototype.hasOwnProperty,pe={current:null},qe={key:!0,ref:!0,__self:!0,__source:!0};function Ye(e,t,r){var i,a={},n=null,s=null;if(t!=null)for(i in t.ref!==void 0&&(s=t.ref),t.key!==void 0&&(n=""+t.key),t)Xe.call(t,i)&&!qe.hasOwnProperty(i)&&(a[i]=t[i]);var o=arguments.length-2;if(o===1)a.children=r;else if(1<o){for(var l=Array(o),u=0;u<o;u++)l[u]=arguments[u+2];a.children=l}if(e&&e.defaultProps)for(i in o=e.defaultProps,o)a[i]===void 0&&(a[i]=o[i]);return{$$typeof:Y,type:e,key:n,ref:s,props:a,_owner:pe.current}}function Lt(e,t){return{$$typeof:Y,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function _e(e){return typeof e=="object"&&e!==null&&e.$$typeof===Y}function Mt(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(r){return t[r]})}var $e=/\/+/g;function fe(e,t){return typeof e=="object"&&e!==null&&e.key!=null?Mt(""+e.key):t.toString(36)}function re(e,t,r,i,a){var n=typeof e;(n==="undefined"||n==="boolean")&&(e=null);var s=!1;if(e===null)s=!0;else switch(n){case"string":case"number":s=!0;break;case"object":switch(e.$$typeof){case Y:case yt:s=!0}}if(s)return s=e,a=a(s),e=i===""?"."+fe(s,0):i,Ue(a)?(r="",e!=null&&(r=e.replace($e,"$&/")+"/"),re(a,t,r,"",function(u){return u})):a!=null&&(_e(a)&&(a=Lt(a,r+(!a.key||s&&s.key===a.key?"":(""+a.key).replace($e,"$&/")+"/")+e)),t.push(a)),1;if(s=0,i=i===""?".":i+":",Ue(e))for(var o=0;o<e.length;o++){n=e[o];var l=i+fe(n,o);s+=re(n,t,r,l,a)}else if(l=Ct(e),typeof l=="function")for(e=l.call(e),o=0;!(n=e.next()).done;)n=n.value,l=i+fe(n,o++),s+=re(n,t,r,l,a);else if(n==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return s}function te(e,t,r){if(e==null)return e;var i=[],a=0;return re(e,i,"","",function(n){return t.call(r,n,a++)}),i}function kt(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(r){(e._status===0||e._status===-1)&&(e._status=1,e._result=r)},function(r){(e._status===0||e._status===-1)&&(e._status=2,e._result=r)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var S={current:null},ie={transition:null},It={ReactCurrentDispatcher:S,ReactCurrentBatchConfig:ie,ReactCurrentOwner:pe};f.Children={map:te,forEach:function(e,t,r){te(e,function(){t.apply(this,arguments)},r)},count:function(e){var t=0;return te(e,function(){t++}),t},toArray:function(e){return te(e,function(t){return t})||[]},only:function(e){if(!_e(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};f.Component=j;f.Fragment=Et;f.Profiler=xt;f.PureComponent=de;f.StrictMode=bt;f.Suspense=St;f.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=It;f.cloneElement=function(e,t,r){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var i=je({},e.props),a=e.key,n=e.ref,s=e._owner;if(t!=null){if(t.ref!==void 0&&(n=t.ref,s=pe.current),t.key!==void 0&&(a=""+t.key),e.type&&e.type.defaultProps)var o=e.type.defaultProps;for(l in t)Xe.call(t,l)&&!qe.hasOwnProperty(l)&&(i[l]=t[l]===void 0&&o!==void 0?o[l]:t[l])}var l=arguments.length-2;if(l===1)i.children=r;else if(1<l){o=Array(l);for(var u=0;u<l;u++)o[u]=arguments[u+2];i.children=o}return{$$typeof:Y,type:e.type,key:a,ref:n,props:i,_owner:s}};f.createContext=function(e){return e={$$typeof:Nt,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:vt,_context:e},e.Consumer=e};f.createElement=Ye;f.createFactory=function(e){var t=Ye.bind(null,e);return t.type=e,t};f.createRef=function(){return{current:null}};f.forwardRef=function(e){return{$$typeof:Tt,render:e}};f.isValidElement=_e;f.lazy=function(e){return{$$typeof:Rt,_payload:{_status:-1,_result:e},_init:kt}};f.memo=function(e,t){return{$$typeof:wt,type:e,compare:t===void 0?null:t}};f.startTransition=function(e){var t=ie.transition;ie.transition={};try{e()}finally{ie.transition=t}};f.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};f.useCallback=function(e,t){return S.current.useCallback(e,t)};f.useContext=function(e){return S.current.useContext(e)};f.useDebugValue=function(){};f.useDeferredValue=function(e){return S.current.useDeferredValue(e)};f.useEffect=function(e,t){return S.current.useEffect(e,t)};f.useId=function(){return S.current.useId()};f.useImperativeHandle=function(e,t,r){return S.current.useImperativeHandle(e,t,r)};f.useInsertionEffect=function(e,t){return S.current.useInsertionEffect(e,t)};f.useLayoutEffect=function(e,t){return S.current.useLayoutEffect(e,t)};f.useMemo=function(e,t){return S.current.useMemo(e,t)};f.useReducer=function(e,t,r){return S.current.useReducer(e,t,r)};f.useRef=function(e){return S.current.useRef(e)};f.useState=function(e){return S.current.useState(e)};f.useSyncExternalStore=function(e,t,r){return S.current.useSyncExternalStore(e,t,r)};f.useTransition=function(){return S.current.useTransition()};f.version="18.2.0"});var Ze=W((Xt,Je)=>{"use strict";Je.exports=Ke()});var ot=q(Be()),ae=q(ee());function He(e){return typeof e=="object"&&e!==null&&"type"in e&&"to"in e}var Ee=q(ee());var ye=q(Ze()),Pt=q(ee());function Qe(e,t){e.style.position="fixed",e.style.transformOrigin="top left",e.style.transform="translate(0px, 0px)";let r=0,i=0;window.addEventListener("message",a=>{if(a?.data?.runtimeId!==t)return;let n=a.data;switch(n.type){case"DRAG_MOUSEMOVE":{r+=n.movementX,i+=n.movementY,e.style.transform=`translate(${r}px, ${i}px)`;break}}},!1)}function et(e,t,r=1e4){let i=document.querySelector(e);if(i){t(i);return}let a=new MutationObserver((n,s)=>{let o=document.querySelector(e);o&&(s.disconnect(),t(o))});a.observe(document.body,{childList:!0,subtree:!0}),setTimeout(()=>{a.disconnect()},r)}function se(){return new Promise(e=>{document.readyState==="loading"?document.addEventListener("DOMContentLoaded",e):e(void 0)})}var G=function(e){return"data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20viewBox%3D%220%200%20128%20128%22%3E%0A%20%20%20%20%3Cg%20fill%3D%22none%22%20fill-rule%3D%22nonzero%22%20transform%3D%22translate(5%205)%22%3E%0A%20%20%20%20%20%20%20%20%3Ccircle%20cx%3D%2259%22%20cy%3D%2259%22%20r%3D%2259%22%20fill%3D%22%23"+e+"%22%20stroke%3D%22%23"+e+"%22%20stroke-width%3D%229%22%20%2F%3E%0A%20%20%20%20%20%20%20%20%3Cpath%20fill%3D%22%23E5E7EB%22%0A%20%20%20%20%20%20%20%20%20%20%20%20d%3D%22M76.397%2067.004c-1.545%205.815-5.642%208.127-10.356%209.47-.464.148-.386.595-.386.595l.695%204.623s.077.373.696.298C83.66%2080.2%2094.714%2068.047%2092.78%2053.285c-2.01-10.215-10.356-14.167-17.93-13.123-7.652%201.193-12.908%208.053-11.67%2015.434%201.004%206.561%206.646%2011.184%2013.215%2011.408Z%22%20%2F%3E%0A%20%20%20%20%20%20%20%20%3Cpath%20fill%3D%22%23FFF%22%0A%20%20%20%20%20%20%20%20%20%20%20%20d%3D%22M26.16%2055.596c1.005%206.487%206.722%2011.11%2013.211%2011.408-1.622%205.815-5.562%208.127-10.352%209.47-.464.148-.387.595-.387.595l.773%204.623s.077.373.695.298c16.534-1.79%2027.736-13.943%2025.65-28.705-1.93-10.215-10.198-14.167-17.846-13.123C30.254%2041.355%2025%2048.215%2026.16%2055.596Z%22%20%2F%3E%0A%20%20%20%20%3C%2Fg%3E%0A%3C%2Fsvg%3E"};var rt="chatgpt-summarize-popup",tt=!1;async function z(e){let t=Ee.default.runtime.getURL("popup/index.html"),r=document.createElement("iframe");r.id=rt,r.referrerPolicy="unsafe-url",r.style.all="unset",r.style.width="700px",r.style.height="600px",r.style.maxHeight=window.innerHeight-20+"px",r.style.maxWidth=window.innerWidth-50+"px",r.style.overflow="hidden",r.style.zIndex="999999999999",r.style.background="white",r.style.borderRadius="8px",r.style.boxSizing="border-box",r.style.boxShadow="0 0 10px 0 rgba(0, 0, 0, 0.2)",r.style.top="10px",r.style.right="10px",r.style.resize="both",r.allow="clipboard-write *",r.src=t,r.addEventListener("load",()=>{r.focus()},{once:!0});let i=Ee.default.runtime.id;Qe(r,i),window.addEventListener("message",s=>{if(s?.data?.runtimeId===i)switch(s.data.type){case"CLOSE_IFRAME":return Dt();case"READY":{let o=null;e&&(o={title:document.title,dir:document.dir||"rtl",textContent:e,url:document.location.href,lang:document.documentElement.lang}),K("START",o,r)}}}),await se(),document.body.appendChild(r),st(r);let a=window.location.href,n=setInterval(()=>{if(a!==window.location.href){let s=H();s&&s.remove(),clearInterval(n)}},500);return r}async function it(){let e=H()??await z();K("VISIBILITY_CHANGE",e.style.display==="block",e),K("SUMMARIZE_SELECTED_TEXT",null,e),e.style.display=e.style.display==="block"?"none":"block",st(e)}async function K(e,t,r){r??=H()??await z(),r.contentWindow?.postMessage({type:e,data:t},"*")}function H(){return document.getElementById(rt)}function Dt(){let e=H();e&&(e.style.display="none")}function st(e){tt||(window.addEventListener("resize",function(){e.style.maxHeight=window.innerHeight-20+"px",e.style.maxWidth=window.innerWidth-50+"px"}),tt=!0)}function nt(e){Ht();let t=e.text;function r(i){let a=Ot(i);a&&Gt(a.start,a.end,a.nodes);let n=document?.querySelector("mark.gpt-summarize-mark");return n?(n.scrollIntoView({behavior:"smooth"}),!0):!1}r(t)}function be(e){return e.replace(/[.,"'!?;:[\]()]/g," ")}function Ot(e){let t=Bt(),r=be(t.text),i=e.split(/\n|\r\n/g),a=[];i.forEach(s=>{let o=s.match(/[^.!?;:]+[.!?;:]/g);o?a.push(...o.map(l=>be(l))):/^\s*$/.test(s)||a.push(be(s))});let n={start:void 0,end:void 0};for(let s=0;s<a.length;s++){let o=a[s],l=r.match(o.replace(/\s+/g,"\\s+"));if(l){n={start:l.index};break}}for(let s=a.length-1;s>=0;s--){let o=a[s],l=r.match(o.replace(/\s+/g,"\\s+"));if(l){n.end=l.index+o.length;break}}if(!(!n.start||!n.end))return{start:n.start,end:n.end,nodes:t.textNodesRange}}function Bt(){let e=document.createTreeWalker(document.body,NodeFilter.SHOW_TEXT,null),t="",r,i=[];for(;r=e.nextNode();)i.push({start:t.length,end:(t+=r.textContent).length,node:r});return{text:t,textNodesRange:i}}function Gt(e,t,r){r.forEach(({node:i,start:a,end:n})=>{if(a>t||n<e)return;let s=Math.max(e,a)-a,o=Math.min(t,n)-a;if(i.textContent)if(s===0&&o===i.textContent.length){let l=document.createElement("mark");l.setAttribute("class","gpt-summarize-mark"),i.parentNode?.insertBefore(l,i),i.parentNode?.removeChild(i),l.appendChild(i)}else{let l=document.createRange();l.setStart(i,s),l.setEnd(i,o);let u=document.createElement("mark");u.setAttribute("class","gpt-summarize-mark"),l.surroundContents(u)}})}function Ht(){document.querySelectorAll("mark.gpt-summarize-mark").forEach(t=>{for(;t.firstChild;)t.parentNode?.insertBefore(t.firstChild,t);t.parentNode?.removeChild(t)})}var $=(()=>{let e=document.createElement("div"),t=e.attachShadow({mode:"open"}),r=document.createElement("button"),i=document.createElement("style");i.textContent=`
  #gpt-text-summarize-button {
  display: none;
  background-color: #10a37f;
  border: 0;
  color: white;
  text-align: center;
  align-items: center;
  justify-content: center;
  cursor: pointer;
  padding: 0.3em;
  border-radius: 50%;
  z-index: 9999;
  position: absolute;
  box-shadow: rgba(0, 0, 0, 0.4) 3px 0 5px 0;
}

#gpt-text-summarize-button:hover {
  background-color: #14b384;
}

#gpt-text-summarize-button > img {
  width: 2em;
  height: 2em;
}
  `,t.appendChild(i);let a="10A37F",n="14b384";r.id="gpt-text-summarize-button";let s=document.createElement("img");return s.src=G(a),r.append(s),r.onmouseover=function(){s.src=G(n)},r.onmouseout=function(){s.src=G(a)},t.appendChild(r),{host:e,button:r}})();async function at(){await se(),$.button.onclick=()=>xe(),document.body.append($.host);let e=()=>{setTimeout(()=>{if((window.getSelection()?.toString()||"").length>160){let i=window.getSelection()?.getRangeAt(0)?.getBoundingClientRect();if(i){let a=i.bottom+window.scrollY+8,n=i.left+window.scrollX,s=$.button.offsetHeight;a+s+8>window.scrollY+window.innerHeight&&(a=window.scrollY+window.innerHeight-s),$.button.style.top=a+"px",$.button.style.left=n+"px",$.button.style.display="flex"}}else $.button.style.display="none"},100)};document.addEventListener("mouseup",e),window.addEventListener("resize",e),document.addEventListener("keyup",e)}async function xe(){let e=H(),t=window.getSelection()?.toString();e?K("SUMMARIZE_SELECTED_TEXT",{title:document.title,dir:document.dir||"rtl",textContent:t,url:document.location.href,lang:document.documentElement.lang},e):e=await z(t),e.style.display="block"}function ne(e){let t=/^(https?:)?(\/\/)?((www\.|m\.)?youtube(-nocookie)?\.com\/(?:embed\/)?((watch)?\?(\w+=\w*&)*vi?=|embed\/|vi?\/|e\/)|youtu.be\/)([\w-]{10,20})/i,r=e.match(t);return r?r[9]:null}async function ve(){let e=ne(window.location.href);if(!e)return;let t=await fetch(`https://www.youtube.com/watch?v=${e}`).then(i=>i.text());if(!t)return;let r=t.match(/ytInitialPlayerResponse\s*=\s*({.+?});/s);if(r)try{let i=JSON.parse(r[1]);if(!i)return;let a=i.captions.playerCaptionsTracklistRenderer.captionTracks?.[0];return{text:await(await fetch(a.baseUrl)).text(),videoId:e}}catch{return}}function Ne(){ne(window.location.href)&&(document.getElementById("gpt-youtube-summarize-button")||et("segmented-like-dislike-button-view-model",t=>{let r=document.createElement("button"),i="10A37F",a="14b384";r.id="gpt-youtube-summarize-button";let n=document.createElement("img");n.src=G(i);let s=document.createElement("span");s.textContent="Summarize!",r.append(n,s),r.onclick=async()=>{let l=H()??await z();l.style.display="block"},r.onmouseover=function(){n.src=G(a)},r.onmouseout=function(){n.src=G(i)};let o=new MutationObserver(l=>{l.forEach(()=>{document.body.contains(r)||(o.disconnect(),Ne())})});o.observe(t.parentElement,{childList:!0}),t.insertAdjacentElement("afterend",r)}))}ae.default.runtime.onMessage.addListener(async e=>{if(He(e)&&e.to==="content-script")switch(e.type){case"GET_PAGE_INFO":return Ft();case"GET_PAGE_SUBTITLES":return ve();case"OPEN_POPUP":return it();case"SUMMARIZE_TEXT":return xe();case"MARK_CONTENT":return nt(e.content.data)}});async function Ft(){let e=document.cloneNode(!0),t=null;try{t=new ot.Readability(e).parse()}catch(i){let a=document.body.querySelector("main")||document.body;console.log("readability error",i),t={title:document.title,dir:document.dir||"rtl",content:a?.innerHTML,textContent:a.innerText}}let r=await ve().catch(i=>{console.warn("could not get subtitles",i)});return t&&ne(window.location.href)&&(t.title=document.title.replace(/\s*-\s*youtube$/i,"")),{...t,subtitles:r,url:document.location.href,lang:document.documentElement.lang}}ae.default.storage.local.get("showSummarizeButton").then(e=>{e&&e.showSummarizeButton!=!1&&at()});ae.default.storage.local.get("showYoutubeButton").then(e=>{e&&e.showYoutubeButton!=!1&&document.addEventListener("yt-navigate-finish",Ne)});})();
/*! Bundled license information:

react/cjs/react.production.min.js:
  (**
   * @license React
   * react.production.min.js
   *
   * Copyright (c) Facebook, Inc. and its affiliates.
   *
   * This source code is licensed under the MIT license found in the
   * LICENSE file in the root directory of this source tree.
   *)
*/
