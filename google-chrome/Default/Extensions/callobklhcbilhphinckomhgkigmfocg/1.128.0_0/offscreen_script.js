'use strict';var h,aa=typeof Object.defineProperties=="function"?Object.defineProperty:function(a,b,c){if(a==Array.prototype||a==Object.prototype)return a;a[b]=c.value;return a},ba=function(a){a=["object"==typeof globalThis&&globalThis,a,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof global&&global];for(var b=0;b<a.length;++b){var c=a[b];if(c&&c.Math==Math)return c}throw Error("Cannot find global object");},ca=ba(this),k=function(a,b){if(b)a:{var c=ca;a=a.split(".");
for(var d=0;d<a.length-1;d++){var e=a[d];if(!(e in c))break a;c=c[e]}a=a[a.length-1];d=c[a];b=b(d);b!=d&&b!=null&&aa(c,a,{configurable:!0,writable:!0,value:b})}},m=function(a){function b(d){return a.next(d)}function c(d){return a.throw(d)}return new Promise(function(d,e){function f(g){g.done?d(g.value):Promise.resolve(g.value).then(b,c).then(f,e)}f(a.next())})};k("Symbol.dispose",function(a){return a?a:Symbol("Symbol.dispose")});
k("Object.entries",function(a){return a?a:function(b){var c=[],d;for(d in b)Object.prototype.hasOwnProperty.call(b,d)&&c.push([d,b[d]]);return c}});k("Object.values",function(a){return a?a:function(b){var c=[],d;for(d in b)Object.prototype.hasOwnProperty.call(b,d)&&c.push(b[d]);return c}});
var da=function(a,b){a instanceof String&&(a+="");var c=0,d=!1,e={next:function(){if(!d&&c<a.length){var f=c++;return{value:b(f,a[f]),done:!1}}d=!0;return{done:!0,value:void 0}}};e[Symbol.iterator]=function(){return e};return e};k("Array.prototype.values",function(a){return a?a:function(){return da(this,function(b,c){return c})}});/*

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/
var n=this||self,p=function(a){var b=typeof a;return b=="object"&&a!=null||b=="function"},ea=function(a,b,c){return a.call.apply(a.bind,arguments)},fa=function(a,b,c){if(!a)throw Error();if(arguments.length>2){var d=Array.prototype.slice.call(arguments,2);return function(){var e=Array.prototype.slice.call(arguments);Array.prototype.unshift.apply(e,d);return a.apply(b,e)}}return function(){return a.apply(b,arguments)}},ha=function(a,b,c){ha=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=
-1?ea:fa;return ha.apply(null,arguments)},q=function(a,b){function c(){}c.prototype=b.prototype;a.B=b.prototype;a.prototype=new c;a.prototype.constructor=a;a.Da=function(d,e,f){for(var g=Array(arguments.length-2),l=2;l<arguments.length;l++)g[l-2]=arguments[l];return b.prototype[e].apply(d,g)}};var na=function(a){switch(a){case ia.name:return ia;case r.name:return r;case ja.name:return ja;case ka.name:return ka;case la.name:return la;default:let b=ma.get(a);b||(b=new t(a),ma.set(a,b));return b}},t=class{constructor(a){this.name=a}toString(){return this.name}},ma=new Map,ia=new t("async"),r=new t("generic"),ja=new t("runtime"),ka=new t("system"),la=new t("crypto"),u=class extends Error{constructor(a,b,c){super(c);this.code=a;this.category=b;Object.setPrototypeOf(this,new.target.prototype)}toString(){return`${this.category}:${this.code} (${this.message||
"Undefined error."})`}};function v(a){throw new u(416,r,a);};var oa=class{constructor(){let a=void 0,b=void 0;this.promise=new Promise((c,d)=>{a=c;b=d});this.resolve=a;this.reject=b}},w=class extends u{constructor(a,b="One or more errors occurred."){super(1,ia,b);this.errors=a;Object.setPrototypeOf(this,new.target.prototype)}flatten(){const a=[],b=[this.errors.slice(0)];for(;b.length!==0;){const c=b[0];for(;c.length!==0;){const d=c.shift();if(d instanceof w){b.unshift(d.errors.slice(0));break}else a.push(d)}b[0]===c&&b.shift()}return new w(a,this.message)}};var pa=class{constructor(){this.i=[]}subscribe(a){this.i.push(a)}unsubscribe(a){a=this.i.indexOf(a);if(a===-1)return!1;this.i.splice(a,1);return!0}publish(...a){const b=[],c=this.i.slice(0);for(const d of c)b.push(d(...a));return b}};const qa=Array.prototype.indexOf?function(a,b){return Array.prototype.indexOf.call(a,b,void 0)}:function(a,b){if(typeof a==="string")return typeof b!=="string"||b.length!=1?-1:a.indexOf(b,0);for(let c=0;c<a.length;c++)if(c in a&&a[c]===b)return c;return-1};var x=function(){this.ra=Date.now()},ra=null;x.prototype.set=function(a){this.ra=a};x.prototype.reset=function(){this.set(Date.now())};x.prototype.get=function(){return this.ra};var y=class{constructor(a,b){this.name=a;this.value=b}toString(){return this.name}},z=new y("OFF",Infinity),sa=new y("SEVERE",1E3),A=new y("WARNING",900),ta=new y("INFO",800),ua=new y("CONFIG",700),va=new y("ALL",0),wa=[z,new y("SHOUT",1200),sa,A,ta,ua,new y("FINE",500),new y("FINER",400),new y("FINEST",300),va],xa=class{constructor(){this.P=0;this.clear()}clear(){this.ga=Array(this.P);this.ha=-1;this.ia=!1}},ya,Aa=class{constructor(a,b,c){this.S=void 0;this.reset(a||z,b,c,void 0,void 0)}reset(a,
b,c,d,e){this.ca=d||Date.now();this.T=a;this.ya=b;this.Z=c;this.S=void 0;this.Aa=typeof e==="number"?e:za}getMessage(){return this.ya}},za=0,Ba=function(a){return a.level?a.level:a.parent?Ba(a.parent):z},Ca=class{constructor(a,b=null){this.level=null;this.i=[];this.parent=b||null;this.children=[];this.ka={H:()=>a}}publish(a){let b=this;for(;b;)b.i.forEach(c=>{c(a)}),b=b.parent}},B=function(a,b){var c=a.entries[b];if(c)return c;c=b.lastIndexOf(".");c=b.slice(0,Math.max(c,0));c=B(a,c);const d=new Ca(b,
c);a.entries[b]=d;c.children.push(d);return d},Da=class{constructor(){this.entries={};const a=new Ca("");a.level=ua;this.entries[""]=a}},Ea,C=function(){Ea||(Ea=new Da);return Ea},Ga=function(a){var b=Fa;b&&B(C(),b.H()).i.push(a)},Ha=function(){var a=Fa;a&&(B(C(),a.H()).level=va)},D=function(a,b,c){var d;if(d=a)if(d=a&&b){d=b.value;var e=a?Ba(B(C(),a.H())):z;d=d>=e.value}if(d){b=b||z;d=B(C(),a.H());typeof c==="function"&&(c=c());ya||(ya=new xa);e=ya;a=a.H();if(e.P>0){var f=(e.ha+1)%e.P;e.ha=f;e.ia?
(e=e.ga[f],e.reset(b,c,a),a=e):(e.ia=f==e.P-1,a=e.ga[f]=new Aa(b,c,a))}else a=new Aa(b,c,a);a.S=void 0;d.publish(a)}};/*

 Copyright Google LLC
 SPDX-License-Identifier: Apache-2.0
*/
function E(a){return a.toString().indexOf("`")===-1}E(a=>a``)||E(a=>a`\0`)||E(a=>a`\n`)||E(a=>a`\u0000`);"ARTICLE SECTION NAV ASIDE H1 H2 H3 H4 H5 H6 HEADER FOOTER ADDRESS P HR PRE BLOCKQUOTE OL UL LH LI DL DT DD FIGURE FIGCAPTION MAIN DIV EM STRONG SMALL S CITE Q DFN ABBR RUBY RB RT RTC RP DATA TIME CODE VAR SAMP KBD SUB SUP I B U MARK BDI BDO SPAN BR WBR NOBR INS DEL PICTURE PARAM TRACK MAP TABLE CAPTION COLGROUP COL TBODY THEAD TFOOT TR TD TH SELECT DATALIST OPTGROUP OPTION OUTPUT PROGRESS METER FIELDSET LEGEND DETAILS SUMMARY MENU DIALOG SLOT CANVAS FONT CENTER ACRONYM BASEFONT BIG DIR HGROUP STRIKE TT".split(" ").concat(["BUTTON",
"INPUT"]);var Ia=function(a){this.za=a||"";ra||(ra=new x);this.Ca=ra};h=Ia.prototype;h.fa=!0;h.ba=!0;h.ta=!0;h.Ba=!0;h.sa=!1;h.ua=!1;var F=function(a){return a<10?"0"+a:String(a)},Ja=function(a){Ia.call(this,a)};q(Ja,Ia);
var Ka=function(a,b){var c=[];c.push(a.za," ");if(a.ba){var d=new Date(b.ca);c.push("[",F(d.getFullYear()-2E3)+F(d.getMonth()+1)+F(d.getDate())+" "+F(d.getHours())+":"+F(d.getMinutes())+":"+F(d.getSeconds())+"."+F(Math.floor(d.getMilliseconds()/10)),"] ")}if(a.ta){d=c.push;var e=a.Ca.get();e=(b.ca-e)/1E3;var f=e.toFixed(3),g=0;if(e<1)g=2;else for(;e<100;)g++,e*=10;for(;g-- >0;)f=" "+f;d.call(c,"[",f,"s] ")}a.Ba&&c.push("[",b.Z,"] ");a.ua&&c.push("[",b.T.name,"] ");c.push(b.getMessage());a.sa&&(b=
b.S,b!==void 0&&c.push("\n",b instanceof Error?b.message:String(b)));a.fa&&c.push("\n");return c.join("")};function La(a=new Ja){a.ba=!0;a.ta=!1;a.ua=!0}var Oa=class{constructor(a){this.name=a;this.target=B(C(),a).ka}log(a,b){D(this.target,a!=null?a:Ma,b)}error(a){D(this.target,sa,a)}warn(a){D(this.target,A,a)}info(a){D(this.target,ta,a)}debug(a){D(this.target,Ma,a)}trace(a){D(this.target,Na,a)}},Fa=B(C(),"").ka,Ma=new y("DEBUG",600),Na=new y("TRACE",100);wa.push(Ma);wa.push(Na);function Pa(a,b,...c){return m(function*(){const d=new oa,e={magic:91556947316803,host:a!==null&&typeof a==="number"?"*":a,method:b,args:c},f=g=>{const l=chrome.runtime.lastError;l?d.reject(new u(1,ja,`Operation '${String(b)}' failed. ${l.message||"Undefined error."}`)):g.error!==void 0?d.reject(Qa(g.error)):d.resolve(g.result)};a!==null&&typeof a==="number"?chrome.tabs.sendMessage(a,e,f):chrome.runtime.sendMessage(e,f);return d.promise}())}
function G(a){return a instanceof Error?a instanceof w?{type:3,errors:a.errors.map(G),message:a.message}:a instanceof u?{type:2,code:a.code,category:a.category.name,message:a.message}:{type:1,message:a.message||"Undefined error."}:{type:0,object:a}}function Qa(a){switch(a.type){case 0:return a.object;case 1:return Error(a.message);case 2:return new u(a.code,na(a.category),a.message);case 3:return new w(a.errors.map(Qa),a.message)}};var Ra=class{constructor(){this.host="*";this.events=new Map;this.qa=new Map}invoke(a,...b){const c=this;return m(function*(){return Pa(c.host,a,...b)}())}};const H=new Oa("MessageServiceHost");
var Sa=function(a,b){H.trace(`New connection to '${b.name}'.`);const c=a.events.get(b.name);if(c){var d=c.K;a={port:b,I:()=>{H.trace(`Data query for '${b.name}'.`);b.postMessage(c.data)},na:()=>{const e=d.findIndex(f=>f.port===b);e!==-1&&(H.trace(`Port '${b.name}' disconnected.`),d.splice(e,1))}};b.onMessage.addListener(a.I);b.onDisconnect.addListener(a.na);d.push(a)}},Ta=function(a,b){a.v&&v(`Host ${a.name} is already open.`);a.i.fetch&&v("Handler for 'fetch' is already registered.");H.debug("Registering 'fetch' handler.");
a.i.fetch=b},Ua=function(a,b,c){a.v&&v(`Host ${a.name} is already open.`);a.events.get(b)&&v(`Event ${b} is already exposed.`);H.debug(`Exposing event '${b}'.`);const d={event:c,u:(...e)=>{d.data=e;if(!d.Y){d.Y=!0;try{for(const f of d.K)try{f.port.postMessage(e)}catch(g){H.warn(`Post message to '${f.port.name}' failed. ${g.message}`)}}finally{d.Y=!1}}},K:[],Y:!1,data:[]};a.events.set(b,d)},Wa=function(a,b,c,d,e){if(c){H.trace(`Handling '${a.name}:${String(d.method)}'...`);try{const g=c(...d.args,
b);if(g instanceof Promise)return Va(g,e),!0;var f={result:g}}catch(g){f={error:G(g)}}e(f);return!1}if(d.host!=="*"&&a.name!=="*"&&d.host===a.name)return H.error(`No handler for '${a.name}:${String(d.method)}'.`),a={error:G(new u(1,r,`No handler for '${a.name}:${String(d.method)}'.`))},e(a),!1},Va=function(a,b){m(function*(){let c;try{c={result:yield a}}catch(d){c={error:G(d)}}b(c)}())},Xa=class{constructor(){this.name="*";this.i={};this.events=new Map;this.v=!1;this.I=(a,b,c)=>this.onRequest(b,a,
c);this.ma=a=>{Sa(this,a)}}open(){const a=this;return m(function*(){a.v&&v(`Host ${a.name} is already open.`);H.debug("Opening...");chrome.runtime.onMessage.addListener(a.I);chrome.runtime.onConnect.addListener(a.ma);for(const b of a.events.values())b.event.subscribe(b.u);a.v=!0;H.debug("Ready.")}())}close(){const a=this;return m(function*(){a.v||v(`Host ${a.name} is already closed.`);H.debug("Closing...");chrome.runtime.onMessage.removeListener(a.I);chrome.runtime.onConnect.removeListener(a.ma);
for(const b of a.events.values()){b.event.unsubscribe(b.u);for(const c of b.K)c.port.onMessage.removeListener(c.I),c.port.onDisconnect.removeListener(c.na),c.port.disconnect();b.K.splice(0,b.K.length)}a.v=!1;H.debug("Closed.")}())}onRequest(a,b,c){if((b.host==="*"||this.name==="*"||b.host===this.name)&&b.magic===91556947316803)return Wa(this,a,this.i[b.method],b,d=>{if(c)try{c(d)}catch(e){H.warn(`sendResponse failed. ${e.message}.`)}})}};var Ya=function(){ha(this.ea,this);this.F=new Ja;this.F.ba=!1;this.F.sa=!1;this.F.fa=!1;this.wa={}};Ya.prototype.ea=function(a){function b(f){if(f){if(f.value>=sa.value)return"error";if(f.value>=A.value)return"warn";if(f.value>=ua.value)return"log"}return"debug"}if(!this.wa[a.Z]){var c=Ka(this.F,a),d=Za;if(d){var e=b(a.T);$a(d,e,c,a.S)}}};var Za=n.console,$a=function(a,b,c,d){if(a[b])a[b](c,d===void 0?"":d);else a.log(c,d===void 0?"":d)};var I=function(){this.R=this.R;this.U=this.U};I.prototype.R=!1;I.prototype.dispose=function(){this.R||(this.R=!0,this.o())};I.prototype[Symbol.dispose]=function(){this.dispose()};I.prototype.o=function(){if(this.U)for(;this.U.length;)this.U.shift()()};var J=function(a,b){this.type=a;this.currentTarget=this.target=b;this.defaultPrevented=this.J=!1};J.prototype.stopPropagation=function(){this.J=!0};J.prototype.preventDefault=function(){this.defaultPrevented=!0};var ab=function(){if(!n.addEventListener||!Object.defineProperty)return!1;var a=!1,b=Object.defineProperty({},"passive",{get:function(){a=!0}});try{const c=()=>{};n.addEventListener("test",c,b);n.removeEventListener("test",c,b)}catch(c){}return a}();a:for(var bb=["CLOSURE_FLAGS"],cb=n,db=0;db<bb.length;db++)if(cb=cb[bb[db]],cb==null)break a;function K(){var a=n.navigator;return a&&(a=a.userAgent)?a:""}var L;const eb=n.navigator;L=eb?eb.userAgentData||null:null;function M(a){return K().indexOf(a)!=-1};function N(){return!!L&&!!L.platform}function fb(){return M("iPhone")&&!M("iPod")&&!M("iPad")};L&&L.brands.length>0||M("Opera");L&&L.brands.length>0||M("Trident")||M("MSIE");M("Edge");!M("Gecko")||K().toLowerCase().indexOf("webkit")!=-1&&!M("Edge")||M("Trident")||M("MSIE")||M("Edge");var gb=K().toLowerCase().indexOf("webkit")!=-1&&!M("Edge");gb&&M("Mobile");N()||M("Macintosh");N()||M("Windows");(N()?L.platform==="Linux":M("Linux"))||N()||M("CrOS");N()||M("Android");fb();M("iPad");M("iPod");fb()||M("iPad")||M("iPod");K().toLowerCase().indexOf("kaios");var O=function(a,b){J.call(this,a?a.type:"");this.relatedTarget=this.currentTarget=this.target=null;this.button=this.screenY=this.screenX=this.clientY=this.clientX=this.offsetY=this.offsetX=0;this.key="";this.charCode=this.keyCode=0;this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1;this.state=null;this.pointerId=0;this.pointerType="";this.timeStamp=0;this.C=null;if(a){var c=this.type=a.type,d=a.changedTouches&&a.changedTouches.length?a.changedTouches[0]:null;this.target=a.target||a.srcElement;
this.currentTarget=b;b=a.relatedTarget;b||(c=="mouseover"?b=a.fromElement:c=="mouseout"&&(b=a.toElement));this.relatedTarget=b;d?(this.clientX=d.clientX!==void 0?d.clientX:d.pageX,this.clientY=d.clientY!==void 0?d.clientY:d.pageY,this.screenX=d.screenX||0,this.screenY=d.screenY||0):(this.offsetX=gb||a.offsetX!==void 0?a.offsetX:a.layerX,this.offsetY=gb||a.offsetY!==void 0?a.offsetY:a.layerY,this.clientX=a.clientX!==void 0?a.clientX:a.pageX,this.clientY=a.clientY!==void 0?a.clientY:a.pageY,this.screenX=
a.screenX||0,this.screenY=a.screenY||0);this.button=a.button;this.keyCode=a.keyCode||0;this.key=a.key||"";this.charCode=a.charCode||(c=="keypress"?a.keyCode:0);this.ctrlKey=a.ctrlKey;this.altKey=a.altKey;this.shiftKey=a.shiftKey;this.metaKey=a.metaKey;this.pointerId=a.pointerId||0;this.pointerType=a.pointerType;this.state=a.state;this.timeStamp=a.timeStamp;this.C=a;a.defaultPrevented&&O.B.preventDefault.call(this)}};q(O,J);
O.prototype.stopPropagation=function(){O.B.stopPropagation.call(this);this.C.stopPropagation?this.C.stopPropagation():this.C.cancelBubble=!0};O.prototype.preventDefault=function(){O.B.preventDefault.call(this);var a=this.C;a.preventDefault?a.preventDefault():a.returnValue=!1};var hb="closure_listenable_"+(Math.random()*1E6|0),P=function(a){return!(!a||!a[hb])};var ib=0;var jb=function(a,b,c,d,e){this.listener=a;this.proxy=null;this.src=b;this.type=c;this.capture=!!d;this.u=e;this.key=++ib;this.removed=this.O=!1},Q=function(a){a.removed=!0;a.listener=null;a.proxy=null;a.src=null;a.u=null};function kb(a,b,c){for(const d in a)b.call(c,a[d],d,a)}function lb(a,b){for(const c in a)if(b.call(void 0,a[c],c,a))return!0;return!1}const mb="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function nb(a,b){let c,d;for(let e=1;e<arguments.length;e++){d=arguments[e];for(c in d)a[c]=d[c];for(let f=0;f<mb.length;f++)c=mb[f],Object.prototype.hasOwnProperty.call(d,c)&&(a[c]=d[c])}};var R=function(a){this.src=a;this.g={};this.N=0};R.prototype.add=function(a,b,c,d,e){var f=a.toString();a=this.g[f];a||(a=this.g[f]=[],this.N++);var g=ob(a,b,d,e);g>-1?(b=a[g],c||(b.O=!1)):(b=new jb(b,this.src,f,!!d,e),b.O=c,a.push(b));return b};R.prototype.remove=function(a,b,c,d){a=a.toString();if(!(a in this.g))return!1;var e=this.g[a];b=ob(e,b,c,d);return b>-1?(Q(e[b]),Array.prototype.splice.call(e,b,1),e.length==0&&(delete this.g[a],this.N--),!0):!1};
var pb=function(a,b){var c=b.type;if(c in a.g){var d=a.g[c],e=qa(d,b),f;(f=e>=0)&&Array.prototype.splice.call(d,e,1);f&&(Q(b),a.g[c].length==0&&(delete a.g[c],a.N--))}};R.prototype.removeAll=function(a){a=a&&a.toString();var b=0,c;for(c in this.g)if(!a||c==a){for(var d=this.g[c],e=0;e<d.length;e++)++b,Q(d[e]);delete this.g[c];this.N--}return b};R.prototype.G=function(a,b,c,d){a=this.g[a.toString()];var e=-1;a&&(e=ob(a,b,c,d));return e>-1?a[e]:null};
R.prototype.hasListener=function(a,b){var c=a!==void 0,d=c?a.toString():"",e=b!==void 0;return lb(this.g,function(f){for(var g=0;g<f.length;++g)if(!(c&&f[g].type!=d||e&&f[g].capture!=b))return!0;return!1})};var ob=function(a,b,c,d){for(var e=0;e<a.length;++e){var f=a[e];if(!f.removed&&f.listener==b&&f.capture==!!c&&f.u==d)return e}return-1};var qb="closure_lm_"+(Math.random()*1E6|0),rb={},sb=0,ub=function(a,b,c,d,e){if(d&&d.once)return tb(a,b,c,d,e);if(Array.isArray(b)){for(var f=0;f<b.length;f++)ub(a,b[f],c,d,e);return null}c=S(c);return P(a)?a.listen(b,c,p(d)?!!d.capture:!!d,e):vb(a,b,c,!1,d,e)},vb=function(a,b,c,d,e,f){if(!b)throw Error("Invalid event type");var g=p(e)?!!e.capture:!!e,l=T(a);l||(a[qb]=l=new R(a));c=l.add(b,c,d,g,f);if(c.proxy)return c;d=wb();c.proxy=d;d.src=a;d.listener=c;if(a.addEventListener)ab||(e=g),e===void 0&&
(e=!1),a.addEventListener(b.toString(),d,e);else if(a.attachEvent)a.attachEvent(xb(b.toString()),d);else if(a.addListener&&a.removeListener)a.addListener(d);else throw Error("addEventListener and attachEvent are unavailable.");sb++;return c},wb=function(){const a=yb,b=function(c){return a.call(b.src,b.listener,c)};return b},tb=function(a,b,c,d,e){if(Array.isArray(b)){for(var f=0;f<b.length;f++)tb(a,b[f],c,d,e);return null}c=S(c);return P(a)?a.ja(b,c,p(d)?!!d.capture:!!d,e):vb(a,b,c,!0,d,e)},zb=function(a,
b,c,d,e){if(Array.isArray(b))for(var f=0;f<b.length;f++)zb(a,b[f],c,d,e);else d=p(d)?!!d.capture:!!d,c=S(c),P(a)?a.da(b,c,d,e):a&&(a=T(a))&&(b=a.G(b,c,d,e))&&U(b)},U=function(a){if(typeof a!=="number"&&a&&!a.removed){var b=a.src;if(P(b))pb(b.j,a);else{var c=a.type,d=a.proxy;b.removeEventListener?b.removeEventListener(c,d,a.capture):b.detachEvent?b.detachEvent(xb(c),d):b.addListener&&b.removeListener&&b.removeListener(d);sb--;(c=T(b))?(pb(c,a),c.N==0&&(c.src=null,b[qb]=null)):Q(a)}}},xb=function(a){return a in
rb?rb[a]:rb[a]="on"+a},yb=function(a,b){if(a.removed)a=!0;else{b=new O(b,this);var c=a.listener,d=a.u||a.src;a.O&&U(a);a=c.call(d,b)}return a},T=function(a){a=a[qb];return a instanceof R?a:null},Ab="__closure_events_fn_"+(Math.random()*1E9>>>0),S=function(a){if(typeof a==="function")return a;a[Ab]||(a[Ab]=function(b){return a.handleEvent(b)});return a[Ab]};var V=function(a){I.call(this);this.X=a;this.A={}};q(V,I);var Bb=[];V.prototype.listen=function(a,b,c,d){Array.isArray(b)||(b&&(Bb[0]=b.toString()),b=Bb);for(var e=0;e<b.length;e++){var f=ub(a,b[e],c||this.handleEvent,d||!1,this.X||this);if(!f)break;this.A[f.key]=f}return this};V.prototype.ja=function(a,b,c,d){return Cb(this,a,b,c,d)};
var Cb=function(a,b,c,d,e,f){if(Array.isArray(c))for(var g=0;g<c.length;g++)Cb(a,b,c[g],d,e,f);else{b=tb(b,c,d||a.handleEvent,e,f||a.X||a);if(!b)return a;a.A[b.key]=b}return a};V.prototype.da=function(a,b,c,d,e){if(Array.isArray(b))for(var f=0;f<b.length;f++)this.da(a,b[f],c,d,e);else c=c||this.handleEvent,d=p(d)?!!d.capture:!!d,e=e||this.X||this,c=S(c),d=!!d,b=P(a)?a.G(b,c,d,e):a?(a=T(a))?a.G(b,c,d,e):null:null,b&&(U(b),delete this.A[b.key])};
V.prototype.removeAll=function(){kb(this.A,function(a,b){this.A.hasOwnProperty(b)&&U(a)},this);this.A={}};V.prototype.o=function(){V.B.o.call(this);this.removeAll()};V.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented");};var W=function(){I.call(this);this.j=new R(this);this.va=this;this.aa=null};q(W,I);W.prototype[hb]=!0;h=W.prototype;h.addEventListener=function(a,b,c,d){ub(this,a,b,c,d)};h.removeEventListener=function(a,b,c,d){zb(this,a,b,c,d)};
h.dispatchEvent=function(a){var b=this.aa;if(b){var c=[];for(var d=1;b;b=b.aa)c.push(b),++d}b=this.va;d=a.type||a;if(typeof a==="string")a=new J(a,b);else if(a instanceof J)a.target=a.target||b;else{var e=a;a=new J(d,b);nb(a,e)}e=!0;if(c)for(var f=c.length-1;!a.J&&f>=0;f--){var g=a.currentTarget=c[f];e=X(g,d,!0,a)&&e}a.J||(g=a.currentTarget=b,e=X(g,d,!0,a)&&e,a.J||(e=X(g,d,!1,a)&&e));if(c)for(f=0;!a.J&&f<c.length;f++)g=a.currentTarget=c[f],e=X(g,d,!1,a)&&e;return e};
h.o=function(){W.B.o.call(this);this.j&&this.j.removeAll(void 0);this.aa=null};h.listen=function(a,b,c,d){return this.j.add(String(a),b,!1,c,d)};h.ja=function(a,b,c,d){return this.j.add(String(a),b,!0,c,d)};h.da=function(a,b,c,d){this.j.remove(String(a),b,c,d)};var X=function(a,b,c,d){b=a.j.g[String(b)];if(!b)return!0;b=b.concat();for(var e=!0,f=0;f<b.length;++f){var g=b[f];if(g&&!g.removed&&g.capture==c){var l=g.listener,Eb=g.u||g.src;g.O&&pb(a.j,g);e=l.call(Eb,d)!==!1&&e}}return e&&!d.defaultPrevented};
W.prototype.G=function(a,b,c,d){return this.j.G(String(a),b,c,d)};W.prototype.hasListener=function(a,b){return this.j.hasListener(a!==void 0?String(a):void 0,b)};var Y=function(){W.call(this);this.V=new V(this);this.V.listen(n,["online","offline"],this.xa)};q(Y,W);Y.prototype.xa=function(){this.dispatchEvent(navigator.onLine?"online":"offline")};Y.prototype.o=function(){Y.B.o.call(this);this.V.dispose();this.V=null};const Db=function(){var a=new Ra,b="getAccounts hello getLogBuffer recordLog getQuirks updateQuirks uiEvent proxyUIEvent getProxyConfig".split(" ");for(const [d,e]of a.qa){const f=d;var c=e;if(b.every(g=>f.has(g)))return c}c={};for(const d of b)Object.defineProperty(c,d,{value:(...e)=>a.invoke(d,...e),writable:!1});a.qa.set(new Set(b),c);return c}();
function Fb(){Ha();const a=new Ya;La(a.F);Ga(c=>{const d=c.T;d&&d.value>=A.value&&a.ea(c)});let b=!1;Ga(c=>{if(!b){b=!0;try{var d=Db.recordLog;var e={t:c.ca,l:c.T.value,m:c.getMessage(),n:c.Z,s:c.Aa};d.call(Db,e)}catch(f){}finally{b=!1}}})}const Z=new Oa("Offscreen Script");
var Gb=function(a){return m(function*(){var b=new Headers;if(a.headers)for(const [e,f]of Object.entries(a.headers))b.set(e,f);a.request.headers=b;Z.debug(`Sending Fetch request to ${a.url}.`);let c;try{c=yield fetch(a.url,a.request)}catch(e){throw Z.debug(`Fetch request to ${a.url} failed. ${e.message}`),e;}b=yield c.text();Z.debug(`Fetch request to ${a.url} ${c.ok?"succeeded":"failed"}. Response: ${JSON.stringify(JSON.parse(b))}`);const d={};for(const [e,f]of c.headers.entries())d[e]=f;return{ok:c.ok,
status:c.status,statusText:c.statusText,headers:d,text:b}}())};class Hb{constructor(){this.host=new Xa;this.pa=new Y;this.oa=new pa;this.la=new pa}initialize(){const a=this;return m(function*(){Ua(a.host,"network:online",a.oa);Ua(a.host,"network:offline",a.la);Ta(a.host,b=>m(function*(){return Gb(b)}()));yield a.host.open();a.pa.listen("online",()=>{Z.debug("Online event received");a.oa.publish()});a.pa.listen("offline",()=>{Z.debug("Offline event received");a.la.publish()})}())}}
document.addEventListener("DOMContentLoaded",()=>{Fb();(new Hb).initialize()});
