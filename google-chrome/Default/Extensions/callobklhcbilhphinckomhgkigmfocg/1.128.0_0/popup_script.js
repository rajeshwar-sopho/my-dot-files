'use strict';var aa=typeof Object.defineProperties=="function"?Object.defineProperty:function(a,b,c){if(a==Array.prototype||a==Object.prototype)return a;a[b]=c.value;return a},ba=function(a){a=["object"==typeof globalThis&&globalThis,a,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof global&&global];for(var b=0;b<a.length;++b){var c=a[b];if(c&&c.Math==Math)return c}throw Error("Cannot find global object");},ca=ba(this),da=function(a,b){if(b)a:{var c=ca;a=a.split(".");for(var d=
0;d<a.length-1;d++){var e=a[d];if(!(e in c))break a;c=c[e]}a=a[a.length-1];d=c[a];b=b(d);b!=d&&b!=null&&aa(c,a,{configurable:!0,writable:!0,value:b})}},h=function(a){function b(d){return a.next(d)}function c(d){return a.throw(d)}return new Promise(function(d,e){function f(g){g.done?d(g.value):Promise.resolve(g.value).then(b,c).then(f,e)}f(a.next())})};da("Object.entries",function(a){return a?a:function(b){var c=[],d;for(d in b)Object.prototype.hasOwnProperty.call(b,d)&&c.push([d,b[d]]);return c}});/*

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/
var l=this||self,ea=function(a,b,c){return a.call.apply(a.bind,arguments)},fa=function(a,b,c){if(!a)throw Error();if(arguments.length>2){var d=Array.prototype.slice.call(arguments,2);return function(){var e=Array.prototype.slice.call(arguments);Array.prototype.unshift.apply(e,d);return a.apply(b,e)}}return function(){return a.apply(b,arguments)}},n=function(a,b,c){n=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?ea:fa;return n.apply(null,arguments)},ha=function(a,
b){function c(){}c.prototype=b.prototype;a.ib=b.prototype;a.prototype=new c;a.prototype.constructor=a;a.base=function(d,e,f){for(var g=Array(arguments.length-2),k=2;k<arguments.length;k++)g[k-2]=arguments[k];return b.prototype[e].apply(d,g)}};var ia="getAccounts hello getLogBuffer recordLog getQuirks updateQuirks uiEvent proxyUIEvent getProxyConfig".split(" ");var oa=function(a){switch(a){case ja.name:return ja;case ka.name:return ka;case p.name:return p;case la.name:return la;case ma.name:return ma;default:let b=na.get(a);b||(b=new q(a),na.set(a,b));return b}},q=class{constructor(a){this.name=a}toString(){return this.name}},na=new Map,ja=new q("async"),ka=new q("generic"),p=new q("runtime"),la=new q("system"),ma=new q("crypto"),r=class extends Error{constructor(a,b,c){super(c);this.code=a;this.category=b;Object.setPrototypeOf(this,new.target.prototype)}toString(){return`${this.category}:${this.code} (${this.message||
"Undefined error."})`}};var pa=class{constructor(){let a=void 0,b=void 0;this.promise=new Promise((c,d)=>{a=c;b=d});this.resolve=a;this.reject=b}},qa=class extends r{constructor(a,b="One or more errors occurred."){super(1,ja,b);this.errors=a;Object.setPrototypeOf(this,new.target.prototype)}flatten(){const a=[],b=[this.errors.slice(0)];for(;b.length!==0;){const c=b[0];for(;c.length!==0;){const d=c.shift();if(d instanceof qa){b.unshift(d.errors.slice(0));break}else a.push(d)}b[0]===c&&b.shift()}return new qa(a,this.message)}};var ra=class{constructor(){this.v=[]}subscribe(a){this.v.push(a)}unsubscribe(a){a=this.v.indexOf(a);if(a===-1)return!1;this.v.splice(a,1);return!0}publish(...a){const b=[],c=this.v.slice(0);for(const d of c)b.push(d(...a));return b}};function t(a,b){if(Error.captureStackTrace)Error.captureStackTrace(this,t);else{const c=Error().stack;c&&(this.stack=c)}a&&(this.message=String(a));b!==void 0&&(this.cause=b)}ha(t,Error);t.prototype.name="CustomError";var u=function(){this.ya=Date.now()},sa=null;u.prototype.set=function(a){this.ya=a};u.prototype.reset=function(){this.set(Date.now())};u.prototype.get=function(){return this.ya};var v=class{constructor(a,b){this.name=a;this.value=b}toString(){return this.name}},w=new v("OFF",Infinity),ta=new v("SEVERE",1E3),x=new v("WARNING",900),ua=new v("INFO",800),va=new v("CONFIG",700),wa=new v("ALL",0),y=[w,new v("SHOUT",1200),ta,x,ua,va,new v("FINE",500),new v("FINER",400),new v("FINEST",300),wa],z=null,xa=function(a){if(!z){z={};for(let b=0,c;c=y[b];b++)z[c.value]=c,z[c.name]=c}if(a in z)return z[a];for(let b=0;b<y.length;++b){let c=y[b];if(c.value<=a)return c}return null},ya=class{constructor(){this.R=
0;this.clear()}clear(){this.ma=Array(this.R);this.oa=-1;this.qa=!1}},za,Ba=class{constructor(a,b,c){this.S=void 0;this.reset(a||w,b,c,void 0,void 0)}reset(a,b,c,d,e){this.fa=d||Date.now();this.V=a;this.Ra=b;this.ba=c;this.S=void 0;this.Ua=typeof e==="number"?e:Aa}getMessage(){return this.Ra}},Aa=0,Ca=function(a){return a.level?a.level:a.parent?Ca(a.parent):w},Da=class{constructor(a,b=null){this.level=null;this.v=[];this.parent=b||null;this.children=[];this.sa={F:()=>a}}publish(a){let b=this;for(;b;)b.v.forEach(c=>
{c(a)}),b=b.parent}},A=function(a,b){var c=a.entries[b];if(c)return c;c=b.lastIndexOf(".");c=b.slice(0,Math.max(c,0));c=A(a,c);const d=new Da(b,c);a.entries[b]=d;c.children.push(d);return d},Ea=class{constructor(){this.entries={};const a=new Da("");a.level=va;this.entries[""]=a}},Fa,B=function(){Fa||(Fa=new Ea);return Fa},Ha=function(a){var b=Ga;b&&A(B(),b.F()).v.push(a)},Ia=function(a){var b=Ga;b&&(A(B(),b.F()).level=a)},Ja=function(){var a=Ga;return a?A(B(),a.F()).level:null},C=function(a,b,c){var d;
if(d=a)if(d=a&&b){d=b.value;var e=a?Ca(A(B(),a.F())):w;d=d>=e.value}if(d){b=b||w;d=A(B(),a.F());typeof c==="function"&&(c=c());za||(za=new ya);e=za;a=a.F();if(e.R>0){var f=(e.oa+1)%e.R;e.oa=f;e.qa?(e=e.ma[f],e.reset(b,c,a),a=e):(e.qa=f==e.R-1,a=e.ma[f]=new Ba(b,c,a))}else a=new Ba(b,c,a);a.S=void 0;d.publish(a)}};/*

 Copyright Google LLC
 SPDX-License-Identifier: Apache-2.0
*/
function D(a){return a.toString().indexOf("`")===-1}D(a=>a``)||D(a=>a`\0`)||D(a=>a`\n`)||D(a=>a`\u0000`);var E=class{constructor(a){this.va=a}toString(){return this.va}},Ka=new E("about:invalid#zClosurez");function La(a){if(a instanceof E)return a.va;throw Error("");};class Ma{constructor(a){this.isValid=a}}function F(a){return new Ma(b=>b.substr(0,a.length+1).toLowerCase()===a+":")}const Na=[F("data"),F("http"),F("https"),F("mailto"),F("ftp"),new Ma(a=>/^[^:]*([/?#]|$)/.test(a))];function Oa(a,b=Na){if(a instanceof E)return a;for(let c=0;c<b.length;++c){const d=b[c];if(d instanceof Ma&&d.isValid(a))return new E(a)}}var Pa=/^\s*(?!javascript:)(?:[\w+.-]+:|[^:/?#]*(?:[/?#]|$))/i;"ARTICLE SECTION NAV ASIDE H1 H2 H3 H4 H5 H6 HEADER FOOTER ADDRESS P HR PRE BLOCKQUOTE OL UL LH LI DL DT DD FIGURE FIGCAPTION MAIN DIV EM STRONG SMALL S CITE Q DFN ABBR RUBY RB RT RTC RP DATA TIME CODE VAR SAMP KBD SUB SUP I B U MARK BDI BDO SPAN BR WBR NOBR INS DEL PICTURE PARAM TRACK MAP TABLE CAPTION COLGROUP COL TBODY THEAD TFOOT TR TD TH SELECT DATALIST OPTGROUP OPTION OUTPUT PROGRESS METER FIELDSET LEGEND DETAILS SUMMARY MENU DIALOG SLOT CANVAS FONT CENTER ACRONYM BASEFONT BIG DIR HGROUP STRIKE TT".split(" ").concat(["BUTTON",
"INPUT"]);var G=function(a){this.Sa=a||"";sa||(sa=new u);this.Wa=sa};G.prototype.ja=!0;G.prototype.da=!0;G.prototype.Ba=!0;G.prototype.Va=!0;G.prototype.Aa=!1;G.prototype.Ca=!1;var I=function(a){return a<10?"0"+a:String(a)},Qa=function(a){G.call(this,a)};ha(Qa,G);
var Ra=function(a,b){var c=[];c.push(a.Sa," ");if(a.da){var d=new Date(b.fa);c.push("[",I(d.getFullYear()-2E3)+I(d.getMonth()+1)+I(d.getDate())+" "+I(d.getHours())+":"+I(d.getMinutes())+":"+I(d.getSeconds())+"."+I(Math.floor(d.getMilliseconds()/10)),"] ")}if(a.Ba){d=c.push;var e=a.Wa.get();e=(b.fa-e)/1E3;var f=e.toFixed(3),g=0;if(e<1)g=2;else for(;e<100;)g++,e*=10;for(;g-- >0;)f=" "+f;d.call(c,"[",f,"s] ")}a.Va&&c.push("[",b.ba,"] ");a.Ca&&c.push("[",b.V.name,"] ");c.push(b.getMessage());a.Aa&&(b=
b.S,b!==void 0&&c.push("\n",b instanceof Error?b.message:String(b)));a.ja&&c.push("\n");return c.join("")};function Sa(a=new Qa){a.da=!0;a.Ba=!1;a.Ca=!0}var Va=class{constructor(a){this.name=a;this.target=A(B(),a).sa}log(a,b){C(this.target,a!=null?a:Ta,b)}error(a){C(this.target,ta,a)}warn(a){C(this.target,x,a)}info(a){C(this.target,ua,a)}debug(a){C(this.target,Ta,a)}trace(a){C(this.target,Ua,a)}},Ga=A(B(),"").sa,Ta=new v("DEBUG",600),Ua=new v("TRACE",100);y.push(Ta);y.push(Ua);function Wa(a,b,...c){return h(function*(){const d=new pa,e={magic:91556947316803,host:a!==null&&typeof a==="number"?"*":a,method:b,args:c},f=g=>{const k=chrome.runtime.lastError;k?d.reject(new r(1,p,`Operation '${String(b)}' failed. ${k.message||"Undefined error."}`)):g.error!==void 0?d.reject(Xa(g.error)):d.resolve(g.result)};a!==null&&typeof a==="number"?chrome.tabs.sendMessage(a,e,f):chrome.runtime.sendMessage(e,f);return d.promise}())}
function Xa(a){switch(a.type){case 0:return a.object;case 1:return Error(a.message);case 2:return new r(a.code,oa(a.category),a.message);case 3:return new qa(a.errors.map(Xa),a.message)}};var Ya=function(a){for(const [c,d]of a.wa){const e=c;var b=d;if(ia.every(f=>e.has(f)))return b}b={};for(const c of ia)Object.defineProperty(b,c,{value:(...d)=>a.invoke(c,...d),writable:!1});a.wa.set(new Set(ia),b);return b},J=function(a,b){let c=a.events.get(b);if(!c){const d=chrome.runtime.connect({name:b}),e=new ra;c={port:d,source:e,xa:[]};d.onMessage.addListener(f=>{f=Array.isArray(f)?f:[f];const g=c.xa.shift();g?g.resolve(f.length>1?f:f[0]):e.publish(...f)});a.events.set(b,c)}return c},K=function(a,
b){a=J(a,b);b=new pa;a.xa.push(b);a.port.postMessage({});return b.promise},Za=class{constructor(){this.host="*";this.events=new Map;this.wa=new Map}invoke(a,...b){const c=this;return h(function*(){return Wa(c.host,a,...b)}())}};let $a=void 0;a:for(var ab=["CLOSURE_FLAGS"],bb=l,cb=0;cb<ab.length;cb++)if(bb=bb[ab[cb]],bb==null)break a;var db=String.prototype.trim?function(a){return a.trim()}:function(a){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(a)[1]},fb=function(a,b){let c=0;a=db(String(a)).split(".");b=db(String(b)).split(".");const d=Math.max(a.length,b.length);for(let g=0;c==0&&g<d;g++){var e=a[g]||"",f=b[g]||"";do{e=/(\d*)(\D*)(.*)/.exec(e)||["","","",""];f=/(\d*)(\D*)(.*)/.exec(f)||["","","",""];if(e[0].length==0&&f[0].length==0)break;c=eb(e[1].length==0?0:parseInt(e[1],10),f[1].length==0?0:parseInt(f[1],10))||eb(e[2].length==
0,f[2].length==0)||eb(e[2],f[2]);e=e[3];f=f[3]}while(c==0)}return c},eb=function(a,b){return a<b?-1:a>b?1:0};function L(){var a=l.navigator;return a&&(a=a.userAgent)?a:""}var M;const gb=l.navigator;M=gb?gb.userAgentData||null:null;function hb(a){return M?M.brands.some(({brand:b})=>b&&b.indexOf(a)!=-1):!1}function N(a){return L().indexOf(a)!=-1};var ib=class{constructor(a){this.cb=a}};var jb=new class{constructor(a){this.ra=a;this.ca=this.ga=void 0;this.ua=!1}aa(){if(M)return this.ga}load(){const a=this;return h(function*(){if(M)return a.ca||(a.ua=!0,a.ca=(()=>h(function*(){try{const b=yield M.getHighEntropyValues([a.ra]);a.ga=b[a.ra];return a.ga}finally{a.ua=!1}}()))()),yield a.ca}())}}("fullVersionList");function O(){return!!M&&M.brands.length>0}function kb(){return O()?!1:N("Opera")}function lb(){return O()?!1:N("Trident")||N("MSIE")}function mb(){return O()?hb("Microsoft Edge"):N("Edg/")}function nb(){return O()?hb("Opera"):N("OPR")}function P(){return N("Firefox")||N("FxiOS")}function Q(){return O()?hb("Chromium"):(N("Chrome")||N("CriOS"))&&!(O()?0:N("Edge"))||N("Silk")}function ob(a){const b={};a.forEach(c=>{b[c[0]]=c[1]});return c=>b[c.find(d=>d in b)]||""}
function pb(a){var b=L();if(a==="Internet Explorer"){if(lb())if((a=/rv: *([\d\.]*)/.exec(b))&&a[1])b=a[1];else{a="";var c=/MSIE +([\d\.]+)/.exec(b);if(c&&c[1])if(b=/Trident\/(\d.\d)/.exec(b),c[1]=="7.0")if(b&&b[1])switch(b[1]){case "4.0":a="8.0";break;case "5.0":a="9.0";break;case "6.0":a="10.0";break;case "7.0":a="11.0"}else a="7.0";else a=c[1];b=a}else b="";return b}const d=RegExp("([A-Z][\\w ]+)/([^\\s]+)\\s*(?:\\((.*?)\\))?","g");c=[];let e;for(;e=d.exec(b);)c.push([e[1],e[2],e[3]||void 0]);b=
ob(c);switch(a){case "Opera":if(kb())return b(["Version","Opera"]);if(nb())return b(["OPR"]);break;case "Microsoft Edge":if(O()?0:N("Edge"))return b(["Edge"]);if(mb())return b(["Edg"]);break;case "Chromium":if(Q())return b(["Chrome","CriOS","HeadlessChrome"])}return a==="Firefox"&&P()||a==="Safari"&&N("Safari")&&!(Q()||(O()?0:N("Coast"))||kb()||(O()?0:N("Edge"))||mb()||nb()||P()||N("Silk")||N("Android"))||a==="Android Browser"&&N("Android")&&!(Q()||P()||kb()||N("Silk"))||a==="Silk"&&N("Silk")?(b=
c[2])&&b[1]||"":""}function qb(){if(O()){var a=M.brands.find(({brand:b})=>b==="Chromium");if(!a||!a.version)return NaN;a=a.version.split(".")}else{a=pb("Chromium");if(a==="")return NaN;a=a.split(".")}return a.length===0?NaN:Number(a[0])}
class rb{constructor(a,b,c){this.la=a;this.Ga=new ib(c);this.Fa=b}aa(){if(this.Fa){var a=jb.aa();if(a!==void 0)return a=a.find(({brand:b})=>this.la===b),new ib(a.version)}if(sb)return this.Ga}load(){const a=this;return h(function*(){if(a.Fa){var b=yield jb.load();if(b!==void 0)return b=b.find(({brand:c})=>a.la===c),new ib(b.version)}else yield 0;sb=!0;return a.Ga}())}}let sb=!1;function tb(){return h(function*(){O()&&(yield jb.load());sb=!0}())}
function ub(a){let b="";qb()>=98||(b=pb(a));const c=a!=="Silk"&&O();if(c){if(!M.brands.find(({brand:d})=>d===a))return}else if(b==="")return;return new rb(a,c,b)}function vb(a){if(O()){var b=ub(a);return b?(b=b.aa())?b.cb:M.brands.find(({brand:c})=>c===a).version:""}return pb(a)};function wb(a,b){b=b instanceof E?La(b):Pa.test(b)?b:void 0;b!==void 0&&(a.href=b)};function xb(a,b=`unexpected value ${a}!`){throw Error(b);};function yb(){return h(function*(){return new Promise((a,b)=>{chrome.runtime.getPlatformInfo(c=>{const d=chrome.runtime.lastError;d&&b(new r(1,p,d.message||"Call to c.r.getPlatformInfo failed."));a(c)})})}())}function zb(a){switch(a){case "mac":return 1;case "win":return 2;case "cros":return 4;case "linux":return 3;default:return 0}}function Ab(){switch(Q()?mb()?2:nb()?4:1:P()?3:0){case 2:return"Microsoft Edge";case 1:return"Chromium";case 3:return"Firefox";case 4:return"Opera"}}
function Bb(){return h(function*(){const a=Ab();return a?(yield tb(),vb(a)):""}())}function Cb(){return h(function*(){var a=yield yb();a=zb(a.os);const b=yield Bb();return{ta:a,Pa:{browser:Q()?mb()?2:nb()?4:1:P()?3:0,version:b,eb:c=>fb(b,c)>=0,fb:c=>fb(b,c)<=0},hb:{version:chrome.runtime.getManifest().version,gb:chrome.runtime.getManifest().manifest_version}}}())};function Db(a){switch(a.ta){case 2:return"https://dl.google.com/tag/s/appguid=%7B5289EAA4-96AA-881C-BCCA-C3A9D2D95347%7D&appname=SecureConnect-Win&needsadmin=false/secureconnect/install/win/regular/EndpointVerification.exe";case 1:return"https://dl.google.com/dl/secureconnect/install/mac/EndpointVerification.dmg";case 3:return"https://support.google.com/a/users/answer/9018161?hl=en#linuxhelper";default:return"#"}}
function R(a,b,c){b=`[${"data-template-id"}='${b}']`;return a.querySelector(c!==void 0?b+`[${"data-variation"}='${c}']`:b+":not([data-variation])")}function S(a,b,c="element"){b=`[${"data-part"}='${b}']`;c!=="element"&&(b=`${c}${b}`);return a.querySelector(b)}function T(a,b="element"){var c=document;a=`#${a}`;b!=="element"&&(a=`${b}${a}`);return c.querySelector(a)}
function U(a,b){a=a.classList;b.visible!==void 0&&a.toggle("invisible",!b.visible);b.display!==void 0&&a.toggle("hidden",!b.display);b.active!==void 0&&a.toggle("is-active",b.active)}function Eb(a){for(;a.firstChild;)a.removeChild(a.firstChild)}const Fb=new Va("PopupPresenter");
var Gb=function(a){h(function*(){a.ea.disabled=!0;try{yield a.background.uiEvent({event:"Sync Button Click"})}catch(b){Fb.warn(`Failed to send '${"Sync Button Click"}' event notification. ${b.message}`)}finally{a.ea.disabled=!1}}())},Hb=function(a,b){U(a.Ya,{active:b})},Jb=function(a,b){var c=b!==0;let d=R(a.ka,"sync-banner");d&&!c?d.remove():c&&(d||(d=a.Xa.cloneNode(!0),a.ka.prepend(d)),c=S(d,"error-content","span"),Eb(c),a=Ib(a,b),a!==null&&typeof a==="string"?c.textContent=a:c.append(a))},Nb=function(a,
b){Fb.trace(()=>`Updating state using ${JSON.stringify(b)}.`);var c=b.items,d=c.filter(g=>g.isManaged);if(d.length===0){Eb(a.pa);U(a.Da,{display:!1});U(a.N,{display:!0});U(a.La,{display:c.length!==0});d=Math.min(c.length,4);for(var e=0;e<d;++e)a.pa.append(Kb(a,c[e]))}else{U(a.Da,{display:!0});U(a.N,{display:!1});U(a.ha,{display:!0});U(a.Ha,{display:!1});c=new Set(a.I.keys());var f=new Set(d.map(g=>g.id));for(e of d){let g=a.I.get(e.id);g||(g=Lb(a,e),a.I.set(e.id,g),a.ha.append(g));Mb(g,e)}for(const g of c)f.has(g)||
(a.I.get(g).remove(),a.I.delete(g));d=Math.min(...d.map(g=>{let k;return(k=g.syncTimestamp)!=null?k:0}));d=d!==0?`${chrome.i18n.getMessage("last_sync_date")}: ${(new Date(d)).toLocaleString()}`:chrome.i18n.getMessage("no_sync_date");a.Za.textContent=d||"PLACEHOLDER";componentHandler.upgradeDom()}},Ib=function(a,b){switch(b){case 0:return"";case 99:return a.getMessage("sync_error_text");case 2:return b=R(a.O,"error-content",`native-messaging:${a.runtime.Pa.browser===1?"chrome":"generic"}`).cloneNode(!0),
wb(S(b,"download-link","a"),Oa(Db(a.runtime))),b;case 4:return a.getMessage("data_integrity_error_text");case 3:b=a.getMessage("data_protection_key_error_text");a:switch(a.runtime.ta){case 2:var c="https://support.google.com/a?p=ev_data_key_troubleshooting_win";break a;case 1:c="https://support.google.com/a?p=ev_data_key_troubleshooting_osx";break a;default:c="https://support.google.com/a?p=ev_troubleshooting"}return Ob(a,b,c);case 11:return Ob(a,a.getMessage("dpapi_failure_error_text"),"https://support.google.com/a?p=ev_dpapi_troubleshooting");
case 21:return Ob(a,a.getMessage("keychain_auth_error_text"),"https://support.google.com/a?p=ev_keychain_troubleshooting");case 22:return a.getMessage("keychain_locked_error_text");case 1:return a.getMessage("admin_install_required_text");case 32:return a.getMessage("platform_keys_inaccessible_text");case 5:return a.getMessage("network_failure_text");case 100:return"";case 110:return"";default:xb(b,void 0)}},Kb=function(a,b){a=a.Ja.cloneNode(!0);S(a,"email","span").textContent=b.email;return a},Lb=
function(a,b){a=a.Ia.cloneNode(!0);a.id=`account-${b.id}`;return a},Mb=function(a,b){var c=S(a,"picture","img");var d=Oa(b.photoUrl,Na)||Ka;c.src=La(d);S(a,"display-name","span").textContent=b.displayName;S(a,"email","span").textContent=b.email},Ob=function(a,b,c){a=a.Ma.cloneNode(!0);S(a,"text","span").textContent=b;wb(S(a,"help-link","a"),Oa(c));return a},Qb=class{constructor(a){var b=Pb;this.B=b;this.runtime=a;this.I=new Map;this.background=Ya(b);this.O=T("templates");this.Xa=R(this.O,"sync-banner");
this.Ma=R(this.O,"error-content","text_and_help_link");this.Ia=R(this.O,"account");this.Ja=R(this.O,"account-tooltip");this.N=T("signin-view");this.La=S(this.N,"disabled-accounts");this.pa=S(this.N,"account-list");this.ka=T("banners");a=T("accounts");this.Ha=S(a,"load-indicator");this.ha=S(a,"account-list");this.Da=T("sync-view");this.Za=S(T("sync-status"),"content","span");this.ea=T("sync-button","button");this.Ya=T("sync-spinner");a=document.querySelectorAll("[data-requires-sku]:not([data-requires-sku=external])");
for(const c of a)c.remove()}initialize(){const a=this;return h(function*(){S(a.N,"add-account","button").onclick=()=>{chrome.tabs.create({url:"https://accounts.google.com/addsession"})};a.ea.onclick=()=>{Gb(a)};J(a.B,"sync/inProgress:change").source.subscribe(c=>{Hb(a,c)});Hb(a,yield K(a.B,"sync/inProgress:change"));J(a.B,"sync:completion").source.subscribe(c=>{Jb(a,c)});Jb(a,yield K(a.B,"sync:completion"));J(a.B,"accounts:update").source.subscribe(c=>{Nb(a,c)});var b=yield K(a.B,"accounts:update");
if(!b)try{b=yield a.background.getAccounts()}catch(c){Fb.warn(`Failed to retrieve accounts. ${c.message}`)}b&&Nb(a,b);b=document.querySelectorAll("[data-i18n]");for(const c of b)b=c.getAttribute("data-i18n"),c.textContent=chrome.i18n.getMessage(b)||chrome.i18n.getMessage(`${b}_${"external"}`)||"PLACEHOLDER"}())}getMessage(a){const b=chrome.i18n?chrome.i18n.getMessage(a):"";return b===void 0?(Fb.warn(`i18n key '${a}' not found.`),"PLACEHOLDER"):b}};var Rb=function(){n(this.ia,this);this.J=new Qa;this.J.da=!1;this.J.Aa=!1;this.J.ja=!1;this.Oa={}};Rb.prototype.ia=function(a){function b(f){if(f){if(f.value>=ta.value)return"error";if(f.value>=x.value)return"warn";if(f.value>=va.value)return"log"}return"debug"}if(!this.Oa[a.ba]){var c=Ra(this.J,a),d=Sb;if(d){var e=b(a.V);Tb(d,e,c,a.S)}}};var Sb=l.console,Tb=function(a,b,c,d){if(a[b])a[b](c,d===void 0?"":d);else a.log(c,d===void 0?"":d)};function V(){return!!M&&!!M.platform}function Ub(){return N("iPhone")&&!N("iPod")&&!N("iPad")};kb();lb();N("Edge");!N("Gecko")||L().toLowerCase().indexOf("webkit")!=-1&&!N("Edge")||N("Trident")||N("MSIE")||N("Edge");L().toLowerCase().indexOf("webkit")!=-1&&!N("Edge")&&N("Mobile");V()||N("Macintosh");V()||N("Windows");(V()?M.platform==="Linux":N("Linux"))||V()||N("CrOS");V()||N("Android");Ub();N("iPad");N("iPod");Ub()||N("iPad")||N("iPod");L().toLowerCase().indexOf("kaios");class Vb{constructor(a,b){this.Qa=100;this.Ka=a;this.Ta=b;this.X=0;this.U=null}get(){let a;this.X>0?(this.X--,a=this.U,this.U=a.next,a.next=null):a=this.Ka();return a}put(a){this.Ta(a);this.X<this.Qa&&(this.X++,a.next=this.U,this.U=a)}};var Wb=function(){var a=document;var b="IFRAME";a.contentType==="application/xhtml+xml"&&(b=b.toLowerCase());return a.createElement(b)};var Xb=function(){};var Yb,Zb=function(){var a=l.MessageChannel;typeof a==="undefined"&&typeof window!=="undefined"&&window.postMessage&&window.addEventListener&&!N("Presto")&&(a=function(){var e=Wb();e.style.display="none";document.documentElement.appendChild(e);var f=e.contentWindow;e=f.document;e.open();e.close();var g="callImmediate"+Math.random(),k=f.location.protocol=="file:"?"*":f.location.protocol+"//"+f.location.host;e=n(function(m){if((k=="*"||m.origin==k)&&m.data==g)this.port1.onmessage()},this);f.addEventListener("message",
e,!1);this.port1={};this.port2={postMessage:function(){f.postMessage(g,k)}}});if(typeof a!=="undefined"){var b=new a,c={},d=c;b.port1.onmessage=function(){if(c.next!==void 0){c=c.next;var e=c.na;c.na=null;e()}};return function(e){d.next={na:e};d=d.next;b.port2.postMessage(0)}}return function(e){l.setTimeout(e,0)}};function $b(a){l.setTimeout(()=>{throw a;},0)};class ac{constructor(){this.Y=this.H=null}add(a,b){const c=bc.get();c.set(a,b);this.Y?this.Y.next=c:this.H=c;this.Y=c}remove(){let a=null;this.H&&(a=this.H,this.H=this.H.next,this.H||(this.Y=null),a.next=null);return a}}var bc=new Vb(()=>new cc,a=>a.reset());class cc{constructor(){this.next=this.scope=this.fn=null}set(a,b){this.fn=a;this.scope=b;this.next=null}reset(){this.next=this.scope=this.fn=null}};let dc,ec=!1,fc=new ac,hc=(a,b)=>{dc||gc();ec||(dc(),ec=!0);fc.add(a,b)},gc=()=>{if(l.Promise&&l.Promise.resolve){const a=l.Promise.resolve(void 0);dc=()=>{a.then(ic)}}else dc=()=>{var a=ic;typeof l.setImmediate!=="function"||l.Window&&l.Window.prototype&&l.Window.prototype.setImmediate==l.setImmediate?(Yb||(Yb=Zb()),Yb(a)):l.setImmediate(a)}};var ic=()=>{let a;for(;a=fc.remove();){try{a.fn.call(a.scope)}catch(b){$b(b)}bc.put(a)}ec=!1};var X=function(a){this.g=0;this.za=void 0;this.C=this.j=this.A=null;this.T=this.Z=!1;if(a!=Xb)try{var b=this;a.call(void 0,function(c){W(b,2,c)},function(c){W(b,3,c)})}catch(c){W(this,3,c)}},jc=function(){this.next=this.context=this.G=this.K=this.o=null;this.P=!1};jc.prototype.reset=function(){this.context=this.G=this.K=this.o=null;this.P=!1};var kc=new Vb(function(){return new jc},function(a){a.reset()}),lc=function(a,b,c){var d=kc.get();d.K=a;d.G=b;d.context=c;return d};
X.prototype.then=function(a,b,c){return mc(this,typeof a==="function"?a:null,typeof b==="function"?b:null,c)};X.prototype.$goog_Thenable=!0;X.prototype.Ea=function(a,b){return mc(this,null,a,b)};X.prototype.catch=X.prototype.Ea;X.prototype.cancel=function(a){if(this.g==0){var b=new Y(a);hc(function(){nc(this,b)},this)}};
var nc=function(a,b){if(a.g==0)if(a.A){var c=a.A;if(c.j){for(var d=0,e=null,f=null,g=c.j;g&&(g.P||(d++,g.o==a&&(e=g),!(e&&d>1)));g=g.next)e||(f=g);e&&(c.g==0&&d==1?nc(c,b):(f?(d=f,d.next==c.C&&(c.C=d),d.next=d.next.next):oc(c),pc(c,e,3,b)))}a.A=null}else W(a,3,b)},rc=function(a,b){a.j||a.g!=2&&a.g!=3||qc(a);a.C?a.C.next=b:a.j=b;a.C=b},mc=function(a,b,c,d){var e=lc(null,null,null);e.o=new X(function(f,g){e.K=b?function(k){try{var m=b.call(d,k);f(m)}catch(H){g(H)}}:f;e.G=c?function(k){try{var m=c.call(d,
k);m===void 0&&k instanceof Y?g(k):f(m)}catch(H){g(H)}}:g});e.o.A=a;rc(a,e);return e.o};X.prototype.ab=function(a){this.g=0;W(this,2,a)};X.prototype.bb=function(a){this.g=0;W(this,3,a)};
var W=function(a,b,c){if(a.g==0){a===c&&(b=3,c=new TypeError("Promise cannot resolve to itself"));a.g=1;a:{var d=c,e=a.ab,f=a.bb;if(d instanceof X){rc(d,lc(e||Xb,f||null,a));var g=!0}else{if(d)try{var k=!!d.$goog_Thenable}catch(H){k=!1}else k=!1;if(k)d.then(e,f,a),g=!0;else{k=typeof d;if(k=="object"&&d!=null||k=="function")try{var m=d.then;if(typeof m==="function"){sc(d,m,e,f,a);g=!0;break a}}catch(H){f.call(a,H);g=!0;break a}g=!1}}}g||(a.za=c,a.g=b,a.A=null,qc(a),b!=3||c instanceof Y||tc(a,c))}},
sc=function(a,b,c,d,e){var f=!1,g=function(m){f||(f=!0,c.call(e,m))},k=function(m){f||(f=!0,d.call(e,m))};try{b.call(a,g,k)}catch(m){k(m)}},qc=function(a){a.Z||(a.Z=!0,hc(a.Na,a))},oc=function(a){var b=null;a.j&&(b=a.j,a.j=b.next,b.next=null);a.j||(a.C=null);return b};X.prototype.Na=function(){for(var a;a=oc(this);)pc(this,a,this.g,this.za);this.Z=!1};
var pc=function(a,b,c,d){if(c==3&&b.G&&!b.P)for(;a&&a.T;a=a.A)a.T=!1;if(b.o)b.o.A=null,uc(b,c,d);else try{b.P?b.K.call(b.context):uc(b,c,d)}catch(e){vc.call(null,e)}kc.put(b)},uc=function(a,b,c){b==2?a.K.call(a.context,c):a.G&&a.G.call(a.context,c)},tc=function(a,b){a.T=!0;hc(function(){a.T&&vc.call(null,b)})},vc=$b,Y=function(a){t.call(this,a)};ha(Y,t);Y.prototype.name="cancel";var wc=function(a,b){if(typeof a!=="function")if(a&&typeof a.handleEvent=="function")a=n(a.handleEvent,a);else throw Error("Invalid listener argument");return Number(b)>2147483647?-1:l.setTimeout(a,b||0)},xc=function(a){let b=null;return(new X(function(c,d){b=wc(function(){c(void 0)},a);b==-1&&d(Error("Failed to schedule timer."))})).Ea(function(c){l.clearTimeout(b);throw c;})};const Pb=new Za,yc=Ya(Pb);(function(){Ia(wa);const a=new Rb;Sa(a.J);Ha(c=>{const d=c.V;d&&d.value>=x.value&&a.ia(c)});let b=!1;Ha(c=>{if(!b){b=!0;try{var d=yc.recordLog;var e={t:c.fa,l:c.V.value,m:c.getMessage(),n:c.ba,s:c.Ua};d.call(yc,e)}catch(f){}finally{b=!1}}})})();const Z=new Va("Popup Script");
function zc(){h(function*(){Z.debug("Initializing...");const a=yield Cb();if($a)throw new r(416,ka,"Runtime Info has already been initialized.");$a=a;for(var b=1;b<=10;++b)try{yield yc.hello();break}catch(d){const e=d;if(b>=10)throw Z.error(`Failed to communicate with background page after ${b} attempts. ${e.message}`),e;yield xc(100+(15<<b))}b=yield K(Pb,"log/level:change");b=xa(b);Ia(b);let c;Z.warn(`Log level is set to ${(c=Ja())==null?void 0:c.name}.`);J(Pb,"log/level:change").source.subscribe(d=>
{d=xa(d);Ia(d);let e;Z.warn(`Log level is set to ${(e=Ja())==null?void 0:e.name}.`)});try{yield yc.uiEvent({event:"Popup Load"})}catch(d){Z.warn(`Failed to send '${"Popup Load"}' event notification. ${d.message}`)}yield(new Qb(a)).initialize();Z.debug("Done.")}())}document.addEventListener("DOMContentLoaded",()=>{Z.trace("Handling DOMContentLoaded...");zc()});const Ac=document.querySelector("#templates");
Ac==null||Ac.addEventListener("mdl-componentupgrading",a=>{Z.info("Handling mdl-componentupgrading...");a.preventDefault()});
